(this.webpackJsonpflowz=this.webpackJsonpflowz||[]).push([[0],{160:function(e,t,a){"use strict";(function(e){a.d(t,"a",(function(){return l}));var n=a(161),r=a.n(n),o=a(162),s=a.n(o);e.fetch=r.a;var c=new s.a({accessKey:"8ZH8zzN8CDDrZJWGYhpPmzEreLvOZ6WRPVTgnEH_6Ac"});var l={getListPhotos:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:14,t=i(1,5);return c.photos.listPhotos(t,e,"popular").then((function(e){return e.json()}))}};function i(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e))+e}}).call(this,a(54))},185:function(e,t,a){e.exports=a(370)},194:function(e,t,a){},240:function(e,t){},257:function(e,t,a){e.exports=a.p+"static/media/collage.48948499.jpg"},258:function(e,t,a){e.exports=a.p+"static/media/colors.864f4df1.jpg"},370:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(18),s=a.n(o),c=a(11),l=(a(194),a(17)),i=a(31),d=Object(i.a)(),u=a(34),p=a(5),m=a.n(p),h=a(13),f=a(7),b=a(8),g=a(10),v=a(9),E=a(14),y=a(72),w=a.n(y),C=w.a.create({withCredentials:!0}),N=function(e,t){return O(e,"GET",t)},k=function(e,t){return O(e,"POST",t)},S=function(e,t){return O(e,"PUT",t)},x=function(e,t){return O(e,"DELETE",t)};function O(e){return j.apply(this,arguments)}function j(){return(j=Object(h.a)(m.a.mark((function e(t){var a,n,r,o=arguments;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>1&&void 0!==o[1]?o[1]:"get",n=o.length>2&&void 0!==o[2]?o[2]:null,e.prev=2,e.next=5,C({url:"".concat("/api/").concat(t),method:a,data:n});case 5:return r=e.sent,e.abrupt("return",r.data);case 9:throw e.prev=9,e.t0=e.catch(2),console.dir(e.t0),e.t0.response&&d.push("/login"),e.t0;case 14:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}var B="added",L="updated",D={CARD:"a card",PHASE:"a phase",Board:"a board"};function A(){return(A=Object(h.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"",e.next=3,N("board/".concat(""));case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(){return(I=Object(h.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N("board/".concat(t));case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function M(){return(M=Object(h.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k("board",t);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(){return(T=Object(h.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S("board",t);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(){return(P=Object(h.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x("board/".concat(t));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function U(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,t="",a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=0;n<e;n++)t+=a.charAt(Math.floor(Math.random()*a.length));return t}function _(e,t){return e.phaseLists.findIndex((function(e){return e.cards.some((function(e){return e.id===t}))}))}function F(e,t,a){return e.phaseLists[t].cards.findIndex((function(e){return e.id===a}))}var R,J={query:function(e){return A.apply(this,arguments)},getById:function(e){return I.apply(this,arguments)},remove:function(e){return P.apply(this,arguments)},add:function(e){return M.apply(this,arguments)},update:function(e){return T.apply(this,arguments)},makeId:U,getBoardCopy:function(e){return JSON.parse(JSON.stringify(e))},getNewCard:function(e){return Object(E.a)(Object(E.a)({},e),{},{id:U(),bgColor:"",desc:"",dueDate:null,createdAt:Date.now(),labels:[],checkList:[],assignedTo:[],attachments:[]})},getNewPhase:function(e){return{id:U(),name:e,desc:"",cards:[]}},getSortedPhase:function(e,t){return"title"===e?t.cards.sort((function(e,t){return e.title.localeCompare(t.title)})):"firstCreated"===e?t.cards.sort((function(e,t){return e.createdAt-t.createdAt})):t.cards.sort((function(e,t){return t.createdAt-e.createdAt}))},addActivity:function(e,t,a,n,r){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s={at:Date.now(),operation:a,user:t,type:n,object:r,desc:o};e.activities.unshift(s)},createNewBoard:function(e,t,a){return{name:e,bgColor:t,createdAt:Date.now(),creator:a,members:[a],desc:null,activities:[],phaseLists:[],labels:[],isLabelTxtShown:!1,imgUrl:null}},getNewLabel:function(e){return{txt:e.txt,color:e.color,id:U()}},getPhaseIdxByCardId:_,getCardIdxById:F,getCardById:function(e,t){var a=_(e,t),n=F(e,a,t);return e.phaseLists[a].cards[n]},replaceCardInBoard:function(e,t){var a=_(e,t.id),n=F(e,a,t.id);return e.phaseLists[a].cards[n]=t,e},getBoardStats:function(e){return e.phaseLists.reduce((function(e,t){return t.cards.length&&t.cards.forEach((function(t){e.cardsCount?e.cardsCount++:e.cardsCount=1,t.assignedTo.length||(e.unassigned?e.unassigned++:e.unassigned=1),Date.now()-t.createdAt<864e5&&(e.addedToday?e.addedToday++:e.addedToday=1)})),e}),{})}},K=a(159),W=a.n(K),q={setup:function(){R=W()("/")},terminate:function(){R=null},on:function(e,t){R.on(e,t)},off:function(e,t){R.off(e,t)},emit:function(e,t){R.emit(e,t)}};function z(e){return function(){var t=Object(h.a)(m.a.mark((function t(a){var n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,J.getById(e);case 2:n=t.sent,a({type:"LOAD_BOARD",board:n});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}function H(e){return function(){var t=Object(h.a)(m.a.mark((function t(a){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:"UPDATE_BOARD",board:e}),t.prev=1,t.next=4,J.update(e);case 4:t.next=8;break;case 6:t.prev=6,t.t0=t.catch(1);case 8:q.emit("board updated",e._id);case 9:case"end":return t.stop()}}),t,null,[[1,6]])})));return function(e){return t.apply(this,arguments)}}()}function V(e){return function(t){t({type:"SET_CARD",card:e})}}var G=a(52),Y=a(415),Z=a(399),Q=a(407),X=function(e){Object(g.a)(a,e);var t=Object(v.a)(a);function a(){var e;Object(f.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={card:{title:""}},e.handleChange=function(t){var a=t.target;e.setState({card:{title:a.value}})},e.onAddCard=function(){var t=Object(h.a)(m.a.mark((function t(a){var n,r,o;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),e.state.card.title.trim()){t.next=3;break}return t.abrupt("return");case 3:return n=J.getBoardCopy(e.props.board),r=n.phaseLists.findIndex((function(t){return t.id===e.props.phaseId})),o=J.getNewCard(e.state.card),n.phaseLists[r].cards.push(o),J.addActivity(n,e.props.user,B,D.CARD,{id:o.id,title:o.title}),e.setState({card:{title:""}}),t.next=11,e.props.updateBoard(n);case 11:e.props.bottomCard.scrollIntoView({behavior:"smooth"});case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handleClick=function(t){t.target!==e.addCardBtn&&t.target!==e.cardNameInput&&(e.state.card.title&&e.addCardBtn.form.dispatchEvent(new Event("submit",{cancelable:!0})),e.props.toggleAddCardShown())},e}return Object(b.a)(a,[{key:"componentDidUpdate",value:function(){this.props.isAddCardShown?(this.cardNameInput.addEventListener("keypress",this.submitOnEnter),window.addEventListener("mouseup",this.handleClick),this.props.bottomCard.scrollIntoView({behavior:"smooth"})):window.removeEventListener("mouseup",this.handleClick)}},{key:"submitOnEnter",value:function(e){13!==e.which||e.shiftKey||(e.target.form.dispatchEvent(new Event("submit",{cancelable:!0})),e.preventDefault())}},{key:"render",value:function(){var e=this,t=this.handleChange,a=this.onAddCard,n=this.state,o=this.props,s=o.toggleAddCardShown,c=o.isAddCardShown;return r.a.createElement(r.a.Fragment,null,c&&r.a.createElement("form",{className:"add-card",onSubmit:a},r.a.createElement("textarea",{className:"card-name-input",required:!0,autoFocus:!0,type:"text",name:"title",autoComplete:"off",onChange:t,spellCheck:"false",ref:function(t){return e.cardNameInput=t},value:n.card.title,placeholder:"Enter a title for this card.."}),r.a.createElement("div",{className:"form-btns flex align-end"},r.a.createElement("button",{ref:function(t){return e.addCardBtn=t},className:"submit-btn",type:"submit"},"Add Card"),r.a.createElement("button",{className:"close-btn",onClick:s},r.a.createElement(Z.a,null)))))}}]),a}(n.Component),$={updateBoard:H},ee=Object(c.b)((function(e){return{board:e.trelloApp.board,user:e.trelloUser.user}}),$)(X),te=function(e){Object(g.a)(a,e);var t=Object(v.a)(a);function a(){var e;Object(f.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).toggleIsLabelTxtShown=function(t){t.stopPropagation();var a=J.getBoardCopy(e.props.board);a.isLabelTxtShown=!a.isLabelTxtShown,e.props.updateBoard(a)},e.getUpdatedLabels=function(){if(!e.props.board.labels.length)return[];var t=e.props.labels,a=J.getBoardCopy(e.props.board);return t.reduce((function(e,t){var n=a.labels.find((function(e){return e.id===t.id}));return n&&e.push(n),e}),[])},e}return Object(b.a)(a,[{key:"render",value:function(){var e=this.toggleIsLabelTxtShown,t=this.props.board.isLabelTxtShown,a=this.getUpdatedLabels(),n=t?"shown":"";return r.a.createElement("div",{className:"labels-container flex wrap"},a.map((function(a){return r.a.createElement("span",{title:a.txt,className:"label ".concat(n),style:{backgroundColor:a.color},onClick:e,key:a.id},r.a.createElement("span",{className:"label-txt"},t&&a.txt))})))}}]),a}(n.Component),ae={updateBoard:H},ne=Object(c.b)((function(e){return{board:e.trelloApp.board}}),ae)(te),re=a(405),oe=a(413),se=a(414),ce=a(90),le=a.n(ce),ie=a(35),de=a.n(ie),ue=a(403),pe=function(e){var t=e.dueDate,a=t?de()(t).format("MMM Do"):null,n=t-Date.now()<864e5,o=Date.now()>t?"#eb5a46":n?"#f2d600":"",s=o?"#fff":"#5e6c84";return r.a.createElement("div",{style:{backgroundColor:o,color:s},className:"card-due flex align-center"}," ",r.a.createElement("span",{className:"due-icon"},r.a.createElement(ue.a,{fontSize:"small"})),a)};function me(e){var t,a=(t=e.member?e.member.fullName.split(" "):e.fullName.split(" ")).map((function(e){return e.charAt(0)})).join("").slice(0,2),n=e.member;return r.a.createElement("div",{title:t.join(" "),className:"member-avatar"},(!n||!n.img)&&r.a.createElement("span",{className:"member-initial"},a.toUpperCase()),n&&n.img&&r.a.createElement("span",{style:{backgroundImage:"url("+n.img+")"},className:"member-initial-img"}))}var he=a(410),fe=a(411),be=a(412),ge=a(406),ve=a(404);function Ee(e){var t=e.label,a=e.toggleEditMode,n=e.card.labels.some((function(e){return e.id===t.id}));return r.a.createElement("div",{className:"label-edit flex align-center"},r.a.createElement("span",{onClick:function(){e.toggleLabelOnCard(t)},className:"grow flex align-center",style:{backgroundColor:t.color}},t.txt,n&&r.a.createElement(ve.a,{className:"icon"})),r.a.createElement("button",{onClick:function(){a(t)}},r.a.createElement(re.a,{className:"icon"})))}var ye=function(e){Object(g.a)(a,e);var t=Object(v.a)(a);function a(){var e;Object(f.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={txt:"",color:"#b3bac5"},e.handleChangeColor=function(t){var a=t.target;e.setState({color:a.value})},e.handleChange=function(t){var a=t.target;e.setState({txt:a.value})},e.handleSubmit=function(t){t.preventDefault(),e.props.addLabel(e.state)},e}return Object(b.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.txt,n=t.color;return r.a.createElement("section",{className:"add-label"},r.a.createElement("div",{className:"add-label-header flex align-center"},r.a.createElement("p",{className:"grow"},"Add a label"),r.a.createElement("button",{onClick:this.props.toggleIsAddLabelShown},r.a.createElement(ge.a,null))),r.a.createElement("div",{className:"add-label-gallery"},r.a.createElement("p",null,"Select a color"),r.a.createElement("label",{className:"#61bd4f"===n?"color-preview c-61bd4f selected":"color-preview c-61bd4f"},r.a.createElement("input",{onClick:this.handleChangeColor,className:"display-none",type:"radio",value:"#61bd4f"})),r.a.createElement("label",{className:"#f2d600"===n?"color-preview f2d600 selected":"color-preview f2d600"},r.a.createElement("input",{onClick:this.handleChangeColor,className:"display-none",type:"radio",value:"#f2d600"})),r.a.createElement("label",{className:"#ff9f1a"===n?"color-preview ff9f1a selected":"color-preview ff9f1a"},r.a.createElement("input",{onClick:this.handleChangeColor,className:"display-none",type:"radio",value:"#ff9f1a"})),r.a.createElement("label",{className:"#eb5a46"===n?"color-preview eb5a46 selected":"color-preview eb5a46"},r.a.createElement("input",{onClick:this.handleChangeColor,className:"display-none",type:"radio",value:"#eb5a46"})),r.a.createElement("label",{className:"#0079bf"===n?"color-preview c-0079bf selected":"color-preview c-0079bf"},r.a.createElement("input",{onClick:this.handleChangeColor,className:"display-none",type:"radio",value:"#0079bf"})),r.a.createElement("label",{className:"#00c2e0"===n?"color-preview c-00c2e0 selected":"color-preview c-00c2e0"},r.a.createElement("input",{onClick:this.handleChangeColor,className:"display-none",type:"radio",value:"#00c2e0"})),r.a.createElement("label",{className:"#ff78cb"===n?"color-preview ff78cb selected":"color-preview ff78cb"},r.a.createElement("input",{onClick:this.handleChangeColor,className:"display-none",type:"radio",value:"#ff78cb"})),r.a.createElement("label",{className:"#344563"===n?"color-preview c-344563 selected":"color-preview c-344563"},r.a.createElement("input",{onClick:this.handleChangeColor,className:"display-none",type:"radio",value:"#344563"})),r.a.createElement("label",{className:"#b3bac5"===n?"color-preview b3bac5 selected":"color-preview b3bac5"},r.a.createElement("input",{onClick:this.handleChangeColor,className:"display-none",type:"radio",value:"#b3bac5"})),r.a.createElement("label",{className:"#c377e0"===n?"color-preview c377e0 selected":"color-preview c377e0"},r.a.createElement("input",{onClick:this.handleChangeColor,className:"display-none",type:"radio",value:"#c377e0"})),r.a.createElement("form",{onSubmit:function(t){t.preventDefault(),e.props.addLabel(e.state)}},r.a.createElement("input",{type:"text",name:"txt",value:a,autoFocus:!0,placeholder:"Enter label name..",required:!0,autoComplete:"off",spellCheck:"false",onChange:this.handleChange}),r.a.createElement("button",{className:"save-btn"},"Save")),r.a.createElement("button",{className:"cancel-btn",onClick:this.props.toggleIsAddLabelShown},"Cancel")))}}]),a}(n.Component),we=function(e){Object(g.a)(a,e);var t=Object(v.a)(a);function a(){var e;Object(f.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={editLabel:null,isAddLabelShown:!1},e.hideLabelsEdit=function(t){"Escape"===t.code&&e.props.toggleProperty("isLabelEditShown")},e.toggleEditMode=function(t){e.setState({editLabel:t})},e.handleChange=function(t){var a=t.target;e.setState((function(e){return{editLabel:Object(E.a)(Object(E.a)({},e.editLabel),{},{txt:a.value})}}))},e.saveLabel=function(t){t.preventDefault();var a=e.state.editLabel,n=J.getBoardCopy(e.props.board);n.labels=n.labels.map((function(e){return e.id===a.id?a:e})),e.toggleEditMode(),e.props.updateBoard(n)},e.toggleLabelOnCard=function(t){var a=J.getBoardCopy(e.props.board),n=J.getCardById(a,e.props.card.id);n.labels.some((function(e){return e.id===t.id}))?n.labels=n.labels.filter((function(e){return e.id!==t.id})):n.labels.push(t);var r=J.replaceCardInBoard(a,n);e.props.updateBoard(r)},e.toggleIsAddLabelShown=function(){e.setState((function(e){return{isAddLabelShown:!e.isAddLabelShown}}))},e.addLabel=function(t){var a=J.getNewLabel(t),n=J.getBoardCopy(e.props.board);n.labels.push(a),e.props.updateBoard(n),e.toggleIsAddLabelShown()},e.removeLabel=function(t){var a=J.getBoardCopy(e.props.board),n=a.labels.filter((function(e){return e.id!==t}));a.labels=n,e.props.updateBoard(a),e.toggleEditMode(null)},e}return Object(b.a)(a,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.hideLabelsEdit)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.hideLabelsEdit)}},{key:"render",value:function(){var e=this,t=this.toggleEditMode,a=this.saveLabel,n=this.toggleLabelOnCard,o=this.removeLabel,s=this.state,c=s.editLabel,l=s.isAddLabelShown,i=this.props.board.labels;return r.a.createElement(r.a.Fragment,null,!l&&r.a.createElement("section",{className:"edit-labels flex column"},r.a.createElement("div",{className:"edit-labels-header flex align-center"},r.a.createElement("p",{className:"grow"},"Labels"),r.a.createElement("button",{onClick:function(){e.props.toggleProperty("isLabelEditShown")}},r.a.createElement(ge.a,null))),r.a.createElement("div",{className:"labels-gallery grow"},!c&&i.map((function(o){return r.a.createElement(Ee,{toggleLabelOnCard:n,card:e.props.card,saveLabel:a,key:o.id,label:o,toggleEditMode:t})})),c&&r.a.createElement("div",null,r.a.createElement("form",{onSubmit:a},r.a.createElement("input",{type:"text",name:"txt",value:c.txt,autoFocus:!0,autoComplete:"off",spellCheck:"false",onChange:this.handleChange}),r.a.createElement("button",{className:"save-btn"},"Save")),r.a.createElement("button",{className:"cancel-btn",onClick:function(){o(c.id)}},"Delete"))),r.a.createElement("button",{className:"add-label-btn flex align-center justify-center",onClick:this.toggleIsAddLabelShown},r.a.createElement(Q.a,{className:"add-icon"}),"Add Label")),l&&r.a.createElement(ye,{addLabel:this.addLabel,toggleIsAddLabelShown:this.toggleIsAddLabelShown}))}}]),a}(n.Component),Ce={updateBoard:H},Ne=Object(c.b)((function(e){return{board:e.trelloApp.board}}),Ce)(we);function ke(){return(ke=Object(h.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N("user");case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Se(){return(Se=Object(h.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N("user/".concat(t));case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function xe(){return(xe=Object(h.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N("user/".concat(t));case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Oe(){return(Oe=Object(h.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k("auth/login",t);case 2:return a=e.sent,e.abrupt("return",je(a));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function je(e){return sessionStorage.setItem("user",JSON.stringify(e)),e}function Be(){return(Be=Object(h.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k("auth/logout");case 2:sessionStorage.clear();case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Le(){return(Le=Object(h.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k("auth/signup",t);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function De(){return(De=Object(h.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S("user",t);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ae(){return(Ae=Object(h.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x("user/".concat(t));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ie={query:function(){return ke.apply(this,arguments)},getById:function(e){return Se.apply(this,arguments)},remove:function(e){return Ae.apply(this,arguments)},signup:function(e){return Le.apply(this,arguments)},update:function(e){return De.apply(this,arguments)},makeId:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,t="",a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=0;n<e;n++)t+=a.charAt(Math.floor(Math.random()*a.length));return t},getUserCopy:function(e){return JSON.parse(JSON.stringify(e))},getByEmail:function(e){return xe.apply(this,arguments)},login:function(e){return Oe.apply(this,arguments)},logout:function(){return Be.apply(this,arguments)}};function Me(e){return function(){var t=Object(h.a)(m.a.mark((function t(a){var n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ie.login(e);case 2:n=t.sent,a(Te(n));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}function Te(e){return{type:"SET_USER",user:e}}function Pe(e){return{type:"ADD_USER",user:e}}function Ue(e){var t,a=e.member,n=e.toggleMember,o=e.activeObject;t="card"===e.activeObjectName?o.assignedTo.some((function(e){return e._id===a._id})):o.members.some((function(e){return e._id===a._id}));var s=a.fullName.toUpperCase().split(" ").map((function(e){return e.charAt(0)})).join("").slice(0,2);return r.a.createElement("div",{onClick:function(e){return n(a,e)},className:"member-item flex align-center"},!a.img&&r.a.createElement("div",{className:"initials"},r.a.createElement("span",null,s)),a.img&&r.a.createElement("span",{style:{backgroundImage:"url("+a.img+")"},className:"member-img"}),a.fullName,t&&r.a.createElement(ve.a,{className:"icon"}))}var _e=function(e){Object(g.a)(a,e);var t=Object(v.a)(a);function a(){var e;Object(f.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={name:""},e.hideMembersEdit=function(t){"Escape"===t.code&&e.props.toggleProperty("isMembersEditShown",t)},e.handleChange=function(t){var a=t.target;e.setState({name:a.value})},e.toggleMember=function(t,a){a.stopPropagation();var n=J.getBoardCopy(e.props.board);if(e.props.members){var r=J.getCardById(n,e.props.card.id);r.assignedTo.some((function(e){return e._id===t._id}))?r.assignedTo=r.assignedTo.filter((function(e){return e._id!==t._id})):r.assignedTo.push(t);var o=J.replaceCardInBoard(n,r);e.props.updateBoard(o)}else n.members.some((function(e){return e._id===t._id}))?n.members=n.members.filter((function(e){return e._id!==t._id})):n.members.push(t),e.props.updateBoard(n)},e}return Object(b.a)(a,[{key:"componentDidMount",value:function(){var e=Object(h.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(window.addEventListener("keydown",this.hideMembersEdit),this.props.members){e.next=4;break}return e.next=4,this.props.queryUsers();case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.hideMembersEdit)}},{key:"render",value:function(){var e,t,a,n=this,o=this.props,s=o.members,c=o.toggleProperty,l=o.card,i=o.board,d=this.state.name;return s?(t=l,a="card",e=s.filter((function(e){return e.fullName.toLowerCase().includes(d.toLowerCase())}))):(t=i,a="board",e=this.props.users.filter((function(e){return e.fullName.toLowerCase().includes(d.toLowerCase())}))),e?r.a.createElement("section",{className:"edit-members"},r.a.createElement("div",{className:"edit-members-header flex align-center"},r.a.createElement("p",{className:"grow"},"Members"),r.a.createElement("button",{onClick:function(e){c("isMembersEditShown",e)}},r.a.createElement(ge.a,null))),r.a.createElement("input",{className:"search-name",onChange:this.handleChange,autoComplete:"off",type:"search",name:"name",value:d,placeholder:"Search members"}),r.a.createElement("div",{className:"members-gallery"},e&&e.map((function(e){return r.a.createElement(Ue,{toggleMember:n.toggleMember,activeObject:t,activeObjectName:a,key:e._id,member:e})})))):" "}}]),a}(n.Component),Fe={updateBoard:H,queryUsers:function(){return function(){var e=Object(h.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ie.query();case 2:a=e.sent,t({type:"QUERY_USERS",users:a});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}},Re=Object(c.b)((function(e){return{board:e.trelloApp.board,users:e.trelloUser.users}}),Fe)(_e),Je=a(429),Ke=function(e){Object(g.a)(a,e);var t=Object(v.a)(a);function a(){var e;Object(f.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={dueDate:0},e.hideDueDateEdit=function(t){"Escape"===t.code&&e.props.toggleProperty("isDueDateEditShown")},e.handleDateChange=function(t){e.setState({dueDate:t._d.getTime()})},e.handleSave=function(){e.props.changeDueDate(e.state.dueDate),e.props.toggleProperty("isDueDateEditShown")},e.removeDueDate=function(){e.props.changeDueDate(null),e.props.toggleProperty("isDueDateEditShown")},e}return Object(b.a)(a,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.hideDueDateEdit),this.setState({dueDate:Date.now()})}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.hideDueDateEdit)}},{key:"render",value:function(){var e=this.props.toggleProperty,t=this.state.dueDate;return r.a.createElement("div",{className:"date-picker"},r.a.createElement("div",{className:"date-picker-header flex align-center"},r.a.createElement("p",{className:"grow"},"Change Due Date"),r.a.createElement("button",{onClick:function(){e("isDueDateEditShown")}},r.a.createElement(ge.a,{className:"icon"}))),r.a.createElement("div",{className:"date-picker-content flex column justify-center"},r.a.createElement(Je.a,{className:"picker-input",disablePast:"true",views:["date","month","hours","minutes"],minDateMessage:"",value:t,onChange:this.handleDateChange}),r.a.createElement("div",{className:"flex space-between"},r.a.createElement("button",{onClick:this.removeDueDate,className:"remove-btn"},"Remove"),r.a.createElement("button",{onClick:this.handleSave,className:"save-btn"},"Save"))))}}]),a}(n.Component),We=function(e){Object(g.a)(a,e);var t=Object(v.a)(a);function a(){var e;Object(f.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={card:{title:"",dueDate:0,labels:[],assignedTo:[]},isLabelEditShown:!1,isMembersEditShown:!1,isDueDateEditShown:!1},e.handleChange=function(t){var a=t.target;e.setState({card:{title:a.value}})},e.hideMenu=function(t){var a=e.state,n=a.isLabelEditShown,r=a.isMembersEditShown,o=a.isDueDateEditShown;"Escape"!==t.code||n||r||o||e.props.toggleIsMenuShown()},e.getPhaseIdxByCardId=function(t){return e.props.board.phaseLists.findIndex((function(e){return e.cards.some((function(e){return e.id===t}))}))},e.onDelete=function(){var t=J.getBoardCopy(e.props.board),a=e.getPhaseIdxByCardId(e.props.card.id),n=J.getCardIdxById(t,a,e.props.card.id);t.phaseLists[a].cards.splice(n,1),e.props.updateBoard(t),e.props.toggleIsMenuShown()},e.onChangeTitle=function(){if(e.state.card.title.trim()){var t=J.getBoardCopy(e.props.board),a=J.getCardById(t,e.props.card.id);a.title=e.state.card.title;var n=J.replaceCardInBoard(t,a);e.props.updateBoard(n),e.props.toggleIsMenuShown()}},e.changeDueDate=function(t){var a=J.getBoardCopy(e.props.board),n=J.getCardById(a,e.props.card.id);n.dueDate=t;var r=J.replaceCardInBoard(a,n);e.props.updateBoard(r)},e.toggleProperty=function(t){e.setState((function(e){return Object(u.a)({},t,!e[t])}))},e}return Object(b.a)(a,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.hideMenu),this.titleInput.addEventListener("keypress",this.submitOnEnter);var e=this.props.card,t=e.title,a=e.dueDate,n=e.labels,r=e.assignedTo;this.setState({card:{title:t,dueDate:a,labels:n,assignedTo:r}}),this.cardMenu.scrollIntoView({behavior:"smooth",block:"end",inline:"end"})}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.hideMenu),this.titleInput.removeEventListener("keypress",this.submitOnEnter)}},{key:"submitOnEnter",value:function(e){13!==e.which||e.shiftKey||(e.target.form.dispatchEvent(new Event("submit",{cancelable:!0})),e.preventDefault())}},{key:"render",value:function(){var e=this,t=this.onDelete,a=this.handleChange,n=this.onChangeTitle,o=this.toggleProperty,s=this.changeDueDate,c=this.state,l=c.isLabelEditShown,i=c.card,d=c.isMembersEditShown,u=c.isDueDateEditShown,p=i.title;return r.a.createElement("section",null,r.a.createElement("div",{onMouseDown:this.props.toggleIsMenuShown,className:"screen"}),r.a.createElement("section",{className:"menu-container flex"},r.a.createElement("form",{onSubmit:n,className:"edit-card-form flex column"},r.a.createElement("textarea",{onChange:a,name:"title",value:p,cols:"30",rows:"5",ref:function(t){return e.titleInput=t},spellCheck:"false",autoComplete:"off",autoFocus:!0}),r.a.createElement("button",{onClick:n,className:"save-btn"},"Save")),r.a.createElement("div",{ref:function(t){return e.cardMenu=t},className:"card-menu flex column"},r.a.createElement("button",{onClick:function(){o("isLabelEditShown")},className:"flex align-center"},r.a.createElement(he.a,{className:"icon"}),"Edit Labels"),l&&r.a.createElement(Ne,{card:this.props.card,toggleProperty:o}),r.a.createElement("button",{onClick:function(){o("isMembersEditShown")},className:"flex align-center"},r.a.createElement(fe.a,{className:"icon"}),"Change Members"),d&&r.a.createElement(Re,{card:this.props.card,members:this.props.board.members,toggleProperty:o}),r.a.createElement("button",{onClick:function(){o("isDueDateEditShown")},className:"flex align-center"},r.a.createElement(ue.a,{className:"icon"}),"Change Due Date"),u&&r.a.createElement(Ke,{changeDueDate:s,toggleProperty:o}),r.a.createElement("button",{onClick:t,className:"flex align-center"},r.a.createElement(be.a,{className:"icon"}),"Delete"))))}}]),a}(n.Component),qe={updateBoard:H},ze=Object(c.b)((function(e){return{board:e.trelloApp.board}}),qe)(We),He=function(e){Object(g.a)(a,e);var t=Object(v.a)(a);function a(){var e;Object(f.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={isMenuShown:!1,pageX:0,pageY:0},e.getUpdatedLabels=function(){if(!e.props.board.labels.length)return[];var t=e.props.card.labels,a=J.getBoardCopy(e.props.board);return t.reduce((function(e,t){var n=a.labels.find((function(e){return e.id===t.id}));return n&&e.push(n),e}),[])},e.toggleIsMenuShown=function(t){t&&(t.preventDefault(),t.stopPropagation()),e.setState((function(e){return{isMenuShown:!e.isMenuShown}}))},e}return Object(b.a)(a,[{key:"render",value:function(){var e=this,t=this.toggleIsMenuShown,a=this.state.isMenuShown,n=this.props.card,o=n.title,s=n.imgUrl,c=n.dueDate,l=n.checkList,i=n.assignedTo,u=n.attachments,p=l.filter((function(e){return e.isDone})).length,m=p===l.length?"#61bd4f":"",h=m?"#fff":"",f=this.getUpdatedLabels();return r.a.createElement(r.a.Fragment,null,a&&r.a.createElement(ze,{card:this.props.card,toggleIsMenuShown:t}),r.a.createElement(G.b,{draggableId:this.props.card.id,index:this.props.index},(function(a,n){return r.a.createElement(le.a,{style:a.draggableProps.style,snapshot:n},(function(n){return r.a.createElement("section",Object.assign({onContextMenu:t,onClick:function(){d.push("/board/".concat(e.props.board._id,"/").concat(e.props.card.id))},className:"card-preview flex column"},a.draggableProps,a.dragHandleProps,{ref:a.innerRef,style:n}),r.a.createElement("button",{onClick:t,className:"show-menu-btn"},r.a.createElement(re.a,{className:"show-menu-icon"})),s&&r.a.createElement("div",{className:"card-img flex justify-center"},r.a.createElement("img",{alt:"Card",src:s})),f&&r.a.createElement(ne,{labels:f}),r.a.createElement("p",null,o),r.a.createElement("div",{className:"card-badges flex wrap"},c&&r.a.createElement(pe,{dueDate:c}),u.length>0&&r.a.createElement("div",{className:"attach-badge flex align-center"},r.a.createElement(oe.a,{className:"attach-icon"}),r.a.createElement("span",null,u.length)),l.length>0&&r.a.createElement("div",{style:{backgroundColor:m,color:h},className:"checklist-badge flex align-center"},r.a.createElement("span",null,r.a.createElement(se.a,{className:"checklist-icon"})),r.a.createElement("span",null,p,"/",l.length))),r.a.createElement("div",{className:"members-badge flex align-center"},i.length>0&&i.map((function(e){return r.a.createElement(me,{key:e._id,member:e})}))))}))})))}}]),a}(r.a.Component),Ve={loadBoard:z,setCard:V},Ge=Object(c.b)((function(e){return{board:e.trelloApp.board}}),Ve)(He),Ye=function(e){Object(g.a)(a,e);var t=Object(v.a)(a);function a(){var e;Object(f.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={isInputShown:!1,isMenuShown:!1,isSortShown:!1,newPhaseName:"",isAddCardShown:!1},e.toggleInputShown=function(){e.state.isInputShown?window.removeEventListener("keydown",e.hideInput):window.addEventListener("keydown",e.hideInput),e.setState((function(e){return{isInputShown:!e.isInputShown}}))},e.hideInput=function(t){"Escape"!==t.code&&"onblur"!==t.type||(e.setState({isInputShown:!1}),window.removeEventListener("keydown",e.hideInput))},e.handleChange=function(t){var a=t.target;e.setState({newPhaseName:a.value})},e.handleSubmit=function(t){if(t.preventDefault(),e.state.newPhaseName.trim()){var a=J.getBoardCopy(e.props.board),n=a.phaseLists.findIndex((function(t){return t.id===e.props.phase.id}));a.phaseLists[n].name=e.state.newPhaseName,e.props.updateBoard(a),e.toggleInputShown()}},e.toggleMenuShown=function(){e.state.isSortShown?e.setState({isMenuShown:!1,isSortShown:!1}):e.setState((function(e){return{isMenuShown:!e.isMenuShown}}))},e.showAddCard=function(){e.setState({isAddCardShown:!0}),e.toggleMenuShown()},e.toggleAddCardShown=function(){e.setState((function(e){return{isAddCardShown:!e.isAddCardShown}}))},e.toggleIsSortShown=function(){e.setState((function(e){return{isSortShown:!e.isSortShown}}))},e.sortListBy=function(t){var a=J.getBoardCopy(e.props.board),n=e.props.phase.id,r=a.phaseLists.find((function(e){return e.id===n})),o=J.getSortedPhase(t,r);a.phaseLists=a.phaseLists.filter((function(e){return e.id===o.id?o:e})),e.props.updateBoard(a),e.toggleIsSortShown(),e.toggleMenuShown()},e.onDeletePhase=function(){e.toggleMenuShown();var t=J.getBoardCopy(e.props.board);t.phaseLists=t.phaseLists.filter((function(t){return t.id!==e.props.phase.id})),e.props.updateBoard(t)},e}return Object(b.a)(a,[{key:"componentDidMount",value:function(){this.setState({newPhaseName:this.props.phase.name})}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.hideInput)}},{key:"render",value:function(){var e=this,t=this.props.phase,a=t.name,n=t.id,o=t.cards,s=this.state,c=s.newPhaseName,l=s.isInputShown,i=s.isMenuShown,d=s.isSortShown,u=s.isAddCardShown;return r.a.createElement(G.b,{draggableId:n,index:this.props.index},(function(t,s){return r.a.createElement(le.a,{style:t.draggableProps.style,snapshot:s},(function(p){return r.a.createElement("article",Object.assign({className:"phase flex column"},t.draggableProps,{ref:t.innerRef},s.isDropAnimating=!0,{style:p}),r.a.createElement("div",Object.assign({},t.dragHandleProps,{className:"phase-header flex space-between"}),!l&&r.a.createElement("h5",{className:"phase-title grow",onClick:e.toggleInputShown},a),l&&r.a.createElement("form",{className:"flex grow",onSubmit:e.handleSubmit},r.a.createElement("input",{className:"phase-name-input grow",type:"text",name:"newPhaseName",value:c,autoFocus:!0,autoComplete:"off",spellCheck:"false",onBlur:e.toggleInputShown,onChange:e.handleChange})),r.a.createElement(Y.a,{className:"pointer",onClick:e.toggleMenuShown}),i&&r.a.createElement("div",{className:"phase-menu flex column"},r.a.createElement("div",{className:"menu-header flex align-center"},r.a.createElement("h5",{className:"grow"},"List Actions"),r.a.createElement(Z.a,{className:"pointer",onClick:e.toggleMenuShown})),r.a.createElement("div",{className:"menu-btns flex column"},r.a.createElement("button",{onClick:e.showAddCard},"Add A Card"),r.a.createElement("button",{onClick:e.toggleIsSortShown},"Sort By.."),d&&r.a.createElement("div",{className:"sort-options flex column"},r.a.createElement("button",{onClick:function(){e.sortListBy("title")}},"Title"),r.a.createElement("button",{onClick:function(){e.sortListBy("firstCreated")}},"First Created"),r.a.createElement("button",{onClick:function(){e.sortListBy("lastCreated")}},"Last Created")),r.a.createElement("button",{onClick:e.onDeletePhase},"Delete List")))),r.a.createElement(G.c,{droppableId:n},(function(t){return r.a.createElement("div",Object.assign({className:"cards-list",ref:t.innerRef},t.droppableProps),o.map((function(e,t){return r.a.createElement(Ge,{key:e.id,card:e,index:t})})),t.placeholder,r.a.createElement(ee,{isAddCardShown:u,bottomCard:e.bottomCard,toggleAddCardShown:e.toggleAddCardShown,phaseId:e.props.phase.id}),r.a.createElement("div",{style:{opacity:0},ref:function(t){return e.bottomCard=t}}))})),!u&&r.a.createElement("button",{onClick:e.toggleAddCardShown,className:"add-card-btn flex align-center"},r.a.createElement(Q.a,{className:"add-icon",fontSize:"large"}),"Add a card"))}))}))}}]),a}(n.Component),Ze={updateBoard:H},Qe=Object(c.b)((function(e){return{board:e.trelloApp.board}}),Ze)(Ye),Xe=function(e){Object(g.a)(a,e);var t=Object(v.a)(a);function a(){var e;Object(f.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={board:null,isInputShown:!1,newListName:"",phaseListToShow:null},e.toggleInputShown=function(){e.state.isInputShown?e.removeEventListeners():e.addEventListeners(),e.setState((function(e){return{isInputShown:!e.isInputShown}}))},e.hideInput=function(t){"Escape"!==t.code&&t.target===e.listNameInput||t.target===e.submitBtn||(e.setState({isInputShown:!1}),e.removeEventListeners())},e.handleChange=function(t){var a=t.target;e.setState((function(e){return Object(E.a)(Object(E.a)({},e),{},{newListName:a.value})}))},e.addEventListeners=function(){window.addEventListener("keydown",e.hideInput),window.addEventListener("mousedown",e.hideInput)},e.removeEventListeners=function(){window.removeEventListener("keydown",e.hideInput),window.removeEventListener("mousedown",e.hideInput)},e.onAddPhase=function(){var t=Object(h.a)(m.a.mark((function t(a){var n,r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),e.state.newListName.trim()){t.next=3;break}return t.abrupt("return");case 3:return n=J.getBoardCopy(e.props.board),r=J.getNewPhase(e.state.newListName),n.phaseLists.push(r),e.setState({newListName:""}),t.next=9,e.props.updateBoard(n);case 9:e.listForm.scrollIntoView({inline:"end",behavior:"smooth"});case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onDragEnd=function(t){var a=t.destination,n=t.source,r=t.type;if(a&&(a.droppableId!==n.droppableId||a.index!==n.index)){var o=J.getBoardCopy(e.props.board);if("PhasePreview"===r){var s=o.phaseLists,c=s.splice(n.index,1)[0];s.splice(a.index,0,c)}else{var l=o.phaseLists,i=l.find((function(e){return e.id===n.droppableId})),d=l.find((function(e){return e.id===a.droppableId}));if(i.id===d.id){var u=i.cards.splice(n.index,1)[0];i.cards.splice(a.index,0,u)}else{var p=i.cards.splice(n.index,1)[0];d.cards.splice(a.index,0,p),J.addActivity(o,e.props.user,L,D.CARD,{id:p.id,title:p.title},"moved card from ".concat(i.name," to ").concat(d.name," -Card:"))}}e.props.updateBoard(o)}},e}return Object(b.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.setState({board:this.props.board},(function(){var t=e.getFilteredPhaseLists(e.props.filteredByUser);e.setState({phaseListToShow:t})}))}},{key:"componentDidUpdate",value:function(e){if(JSON.stringify(e.board)!==JSON.stringify(this.props.board)){var t=this.getFilteredPhaseLists(this.props.filteredByUser);this.setState({board:this.props.board,phaseListToShow:t})}if(JSON.stringify(e.filteredByUser)!==JSON.stringify(this.props.filteredByUser)){var a=this.getFilteredPhaseLists(this.props.filteredByUser);this.setState({phaseListToShow:a})}}},{key:"componentWillUnmount",value:function(){this.removeEventListeners()}},{key:"getFilteredPhaseLists",value:function(e){if(!e)return this.props.board.phaseLists;var t=J.getBoardCopy(this.props.board);return t.phaseLists.map((function(t){return t.cards=t.cards.filter((function(t){return t.assignedTo.find((function(t){return t.fullName.toLowerCase().includes(e.trim().toLowerCase())}))}))})),t.phaseLists}},{key:"render",value:function(){var e=this;if(!this.state.board||!this.state.phaseListToShow)return"loading..";var t=this.toggleInputShown,a=this.onAddPhase,n=this.handleChange,o=this.hideInput,s=this.state,c=s.isInputShown,l=s.newListName,i=s.phaseListToShow;return r.a.createElement(G.a,{onDragEnd:this.onDragEnd},r.a.createElement(G.c,{droppableId:"all-columns",direction:"horizontal",type:"PhasePreview"},(function(s,d){return r.a.createElement("section",Object.assign({className:"phase-list flex"},s.droppableProps,{ref:s.innerRef}),i&&i.map((function(e,t){return r.a.createElement(Qe,{key:e.id,index:t,phase:e})})),!c&&r.a.createElement("button",{className:"add-list-btn flex align-center",onClick:t}," ",r.a.createElement(Q.a,{fontSize:"small"}),"Add new list"),c&&r.a.createElement("form",{ref:function(t){return e.listForm=t},className:"add-list-form",onSubmit:a},r.a.createElement("input",{ref:function(t){return e.listNameInput=t},type:"text",autoFocus:!0,spellCheck:"false",name:"newListName",onChange:n,required:!0,autoComplete:"off",placeholder:"Enter list title..",value:l}),r.a.createElement("div",{className:"flex align-center"},r.a.createElement("button",{ref:function(t){return e.submitBtn=t},className:"submit-btn",type:"submit"},"Add List"),r.a.createElement(Z.a,{className:"cancel-btn pointer",onClick:o}))),s.placeholder)})))}}]),a}(n.Component),$e={updateBoard:H},et=Object(c.b)((function(e){return{board:e.trelloApp.board,user:e.trelloUser.user}}),$e)(Xe),tt=a(417),at=function(e){Object(g.a)(a,e);var t=Object(v.a)(a);function a(){var e;Object(f.a)(this,a);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(e=t.call.apply(t,[this].concat(o))).dynamicActivity=function(t){var a=t.at,n=t.user,o=t.type,s=t.object,c=t.operation,l=t.desc,i=null,d=null;return l?(i=r.a.createElement("span",{className:"activity-object"},n.fullName),r.a.createElement("div",{className:"activity flex"},r.a.createElement(me,{fullName:n.fullName}),r.a.createElement("div",{className:"activity-content flex column"},r.a.createElement("span",null,i," "," ".concat(l)),r.a.createElement("span",{onClick:e.OpenByObjectType,className:"activity-object"},s.title),r.a.createElement("div",{className:"activity-time"},de()(a).fromNow())))):n?(i=r.a.createElement("span",{className:"activity-object"},n.fullName),d=r.a.createElement("span",{onClick:e.OpenByObjectType,className:"activity-object"},s.title),r.a.createElement("div",{className:"activity flex"},r.a.createElement(me,{fullName:n.fullName}),r.a.createElement("div",{className:"activity-content flex column"},r.a.createElement("span",null,i," "," ".concat(c," ").concat(o)," ",d),r.a.createElement("div",{className:"activity-time"},de()(a).fromNow())))):r.a.createElement("div",{style:{display:"none"}},"stam")},e.OpenByObjectType=function(){var t=e.props.activity,a=t.type,n=t.object;if(a&&n&&"card"===a.toLowerCase()&&e.props.allowOpenCard){var r=JSON.parse(JSON.stringify(e.props.board)),o=n.id,s=r.phaseLists.find((function(e){return e.cards.some((function(e){return e.id===o}))}));if(!s)return;var c=s.cards.find((function(e){return e.id===o}));if(!c)return;e.props.onCloseMenu(null),e.props.setCard(c),d.push("/board/".concat(e.props.board._id,"/").concat(c.id))}},e}return Object(b.a)(a,[{key:"render",value:function(){var e=this.props.activity;return this.dynamicActivity(e)}}]),a}(r.a.Component),nt={updateBoard:H,setCard:V},rt=Object(c.b)((function(e){return{board:e.trelloApp.board}}),nt)(at),ot=a(416),st=function(e){Object(g.a)(a,e);var t=Object(v.a)(a);function a(){var e;Object(f.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={txt:""},e.handleChange=function(t){var a=t.target.value;e.setState({txt:a})},e.onEnterDown=function(t){13!==t.which||t.shiftKey||(e.handleSaveBoard(),t.preventDefault())},e.handleSaveBoard=function(){var t=JSON.parse(JSON.stringify(e.props.board)),a=e.props.card;e.state.txt.trim()&&(J.addActivity(t,e.props.user,B,D.CARD,{id:a.id,title:a.title},'commented "'.concat(e.state.txt,'"')),e.setState({txt:""}),e.props.updateBoard(t))},e}return Object(b.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.activities,n=t.showCommentBox,o=this.state.txt;return r.a.createElement("div",{className:"activity-container"},r.a.createElement("div",{className:"activity-header flex align-center"},r.a.createElement(ot.a,{className:"activity-icon"}),r.a.createElement("span",{className:"activity-header-text"},"Activity")),n&&r.a.createElement("div",{className:"flex column"},r.a.createElement("div",{className:"flex"},r.a.createElement(me,{fullName:this.props.user.fullName}),r.a.createElement("input",{type:"text",className:"comment-input",ref:function(t){return e.cardNameInput=t},placeholder:"Write a comment...",onChange:this.handleChange,spellCheck:"false",onBlur:this.handleSaveBoard,onKeyDown:this.onEnterDown,value:this.state.txt})),o.length>0&&r.a.createElement("button",{onClick:this.handleSaveBoard,className:"add-comment-btn",type:"submit"},"Save")),a.map((function(t,a){return r.a.createElement(rt,{allowOpenCard:!n,onCloseMenu:e.props.onCloseMenu,key:a,activity:t})})))}}]),a}(r.a.Component),ct={updateBoard:H},lt=Object(c.b)((function(e){return{board:e.trelloApp.board,user:e.trelloUser.user}}),ct)(st),it=function(e){Object(g.a)(a,e);var t=Object(v.a)(a);function a(){return Object(f.a)(this,a),t.apply(this,arguments)}return Object(b.a)(a,[{key:"render",value:function(){var e=this,t=this.props.isMenuShown?"shown":"",a=this.props.board,n=a.bgColor?{backgroundColor:a.bgColor}:{backgroundImage:'url("'.concat(a.imgUrl,'")'),backgroundSize:"cover"};return r.a.createElement("div",{className:"board-menu ".concat(t)},r.a.createElement("div",{className:"board-menu-header flex"},r.a.createElement("div",{className:"board-menu-header-content flex align-center grow"},r.a.createElement("h3",{className:"menu-header-title"},"Menu"),r.a.createElement(tt.a,{onClick:function(){return e.props.onToggleMenu(null)},className:"btn-header-menu"}))),r.a.createElement("div",{className:"flex column"},r.a.createElement("div",{className:"board-menu-content flex column"},r.a.createElement("div",{className:"board-menu-item flex align-center",onClick:function(){return e.props.onToggleMenu("backgroundMenu")}},r.a.createElement("div",{className:"board-menu-icon",style:n}),r.a.createElement("span",{className:"board-menu-text"},"Change Background")),r.a.createElement("span",{className:"board-menu-header-divider"}),r.a.createElement(lt,{onCloseMenu:this.props.onToggleMenu,activities:a.activities}))))}}]),a}(n.Component),dt=a(418),ut=function(e){Object(g.a)(a,e);var t=Object(v.a)(a);function a(){var e;Object(f.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).changeBoardColor=function(t){if(t){var a=J.getBoardCopy(e.props.board);a.bgColor=t,a.imgUrl=null,J.addActivity(a,e.props.user,L,D.Board,{id:a._id,title:a.name},"changed board background color"),e.props.updateBoard(a)}},e}return Object(b.a)(a,[{key:"render",value:function(){var e=this,t=this.props.isMenuShown?"shown":"display-none";return r.a.createElement("div",{className:"board-menu ".concat(t)},r.a.createElement("div",{className:"flex column"},r.a.createElement("div",{className:"board-menu-header"},r.a.createElement("div",{className:"board-menu-header-content  flex justify-center"},r.a.createElement(dt.a,{onClick:function(){return e.props.onToggleMenu("backgroundMenu")},className:"btn-header-menu"}),r.a.createElement("h3",{className:"menu-header-title"},"Change Background"),r.a.createElement(tt.a,{onClick:function(){return e.props.onToggleMenu(null)},className:"btn-header-menu"}))),r.a.createElement("div",{className:"board-menu-content"},r.a.createElement("div",{className:"flex space-between wrap"},r.a.createElement("div",{className:"btn-color",style:{backgroundColor:"rgb(0, 121, 191)"},onClick:function(){return e.changeBoardColor("rgb(0, 121, 191)")}}),r.a.createElement("div",{className:"btn-color",style:{backgroundColor:"rgb(210, 144, 52)"},onClick:function(){return e.changeBoardColor("rgb(210, 144, 52)")}}),r.a.createElement("div",{className:"btn-color",style:{backgroundColor:"rgb(81, 152, 57)"},onClick:function(){return e.changeBoardColor("rgb(81, 152, 57)")}}),r.a.createElement("div",{className:"btn-color",style:{backgroundColor:"rgb(176, 70, 50)"},onClick:function(){return e.changeBoardColor("rgb(176, 70, 50)")}}),r.a.createElement("div",{className:"btn-color",style:{backgroundColor:"rgb(137, 96, 158)"},onClick:function(){return e.changeBoardColor("rgb(137, 96, 158)")}}),r.a.createElement("div",{className:"btn-color",style:{backgroundColor:"rgb(205, 90, 145)"},onClick:function(){return e.changeBoardColor("rgb(205, 90, 145)")}}),r.a.createElement("div",{className:"btn-color",style:{backgroundColor:"rgb(75, 191, 107)"},onClick:function(){return e.changeBoardColor("rgb(75, 191, 107)")}}),r.a.createElement("div",{className:"btn-color",style:{backgroundColor:"rgb(0, 174, 204)"},onClick:function(){return e.changeBoardColor("rgb(0, 174, 204)")}}),r.a.createElement("div",{className:"btn-color",style:{backgroundColor:"rgb(131, 140, 145)"},onClick:function(){return e.changeBoardColor("rgb(131, 140, 145)")}})))))}}]),a}(n.Component),pt={loadBoard:z,updateBoard:H},mt=Object(c.b)((function(e){return{board:e.trelloApp.board,user:e.trelloUser.user}}),pt)(ut),ht=a(160),ft=function(e){Object(g.a)(a,e);var t=Object(v.a)(a);function a(){var e;Object(f.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={imgs:null},e.changeBoardImg=function(t){if(t){var a=J.getBoardCopy(e.props.board);a.imgUrl=t,a.bgColor=null,J.addActivity(a,e.props.user,L,D.Board,{id:a._id,title:a.name},"change board background image"),e.props.updateBoard(a)}},e}return Object(b.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.state.imgs||ht.a.getListPhotos().then((function(t){var a=t.map((function(e){return{thumbUrl:e.urls.thumb,regularUrl:e.urls.regular,fullUrl:e.urls.full,credit:"".concat(e.user.links.html,"?utm_source=Flowz&utm_medium=referral"),userName:"".concat(e.user.name)}}));e.setState({imgs:a},(function(){}))}))}},{key:"render",value:function(){var e=this,t=this.props.isMenuShown?"shown":"display-none",a=this.state.imgs;return r.a.createElement("div",{className:"board-menu ".concat(t)},r.a.createElement("div",{className:"flex column"},r.a.createElement("div",{className:"board-menu-header"},r.a.createElement("div",{className:"board-menu-header-content  flex justify-center"},r.a.createElement(dt.a,{onClick:function(){return e.props.onToggleMenu("backgroundMenu")},className:"btn-header-menu"}),r.a.createElement("h3",{className:"menu-header-title"},"Photos by",r.a.createElement("a",{className:"unsplash",href:"https://unsplash.com/?utm_source=Flowz&utm_medium=referral&utm_campaign=api-credit"},"Unsplash")),r.a.createElement(tt.a,{onClick:function(){return e.props.onToggleMenu(null)},className:"btn-header-menu"}))),r.a.createElement("div",{className:"board-menu-content"},r.a.createElement("div",{className:"flex space-between wrap"},a&&a.map((function(t,a){return r.a.createElement("div",{className:"btn-photo flex column align-center flex-end ",style:{backgroundImage:'url("'.concat(t.thumbUrl,'")')},key:a,onClick:function(){return e.changeBoardImg(t.regularUrl)}})}))))))}}]),a}(n.Component),bt={loadBoard:z,updateBoard:H},gt=Object(c.b)((function(e){return{board:e.trelloApp.board,user:e.trelloUser.user}}),bt)(ft),vt=a(423),Et=a(424),yt=a(425),wt=a(46),Ct=function(e){Object(g.a)(n,e);var t=Object(v.a)(n);function n(){return Object(f.a)(this,n),t.apply(this,arguments)}return Object(b.a)(n,[{key:"render",value:function(){var e=this,t=this.props.isMenuShown?"shown":"display-none";return r.a.createElement("div",{className:"board-menu ".concat(t)},r.a.createElement("div",{className:"flex column"},r.a.createElement("div",{className:"board-menu-header"},r.a.createElement("div",{className:"board-menu-header-content flex justify-center"},r.a.createElement(dt.a,{onClick:function(){return e.props.onToggleMenu("mainMenu")},className:"btn-header-menu"}),r.a.createElement("h3",{className:"menu-header-title"},"Colors"),r.a.createElement(tt.a,{onClick:function(){return e.props.onToggleMenu(null)},className:"btn-header-menu"}))),r.a.createElement("div",{className:"board-menu-content"},r.a.createElement("div",{className:"flex space-between"},r.a.createElement("div",{className:"bg-btn flex column align-center",onClick:function(){return e.props.onToggleMenu("photoMenu")}},r.a.createElement("img",{className:"bg-btn-img",src:a(257),alt:""}),r.a.createElement("span",null,"Photos")),r.a.createElement("div",{className:"bg-btn flex column align-center",onClick:function(){return e.props.onToggleMenu("colorMenu")}},r.a.createElement("img",{className:"bg-btn-img",src:a(258),alt:""}),r.a.createElement("span",null,"Colors"))))))}}]),n}(n.Component),Nt=a(163),kt=a.n(Nt),St=function(e){Object(g.a)(a,e);var t=Object(v.a)(a);function a(){var e;Object(f.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={txt:"",onPhase:"",isTitleOnEdit:!1},e.toggleInput=function(){e.setState((function(e){return{isTitleOnEdit:!e.isTitleOnEdit}}))},e.handleSaveBoard=function(){if(!e.state.txt.trim())return e.toggleInput();if(e.state.isTitleOnEdit){var t=JSON.parse(JSON.stringify(e.props.board)),a=e.props.card.id;t.phaseLists.filter((function(e){return e.cards.find((function(e){return e.id===a}))}))[0].cards.forEach((function(t){t.id===e.props.card.id&&(t.title=e.state.txt)})),e.props.updateBoard(t),e.toggleInput()}},e.handleChange=function(t){var a=t.target.value;e.setState({txt:a}),e.autoGrow(e.elTextarea)},e.autoGrow=function(e){e.style.height=e.scrollHeight+"px"},e.backToboard=function(){e.props.setCard(null),d.push("/board/".concat(e.props.board._id))},e}return Object(b.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.card.id,t=this.props.board.phaseLists.filter((function(t){return t.cards.find((function(t){return t.id===e}))}));this.setState({txt:this.props.card.title,onPhase:t[0].name})}},{key:"handleKeyPress",value:function(e){13===e.keyCode&&e.target.blur()}},{key:"render",value:function(){var e=this;if(!this.state)return"loading";var t=this.state,a=t.txt,n=t.isTitleOnEdit,o=t.onPhase;return r.a.createElement("div",{className:"card-header"},r.a.createElement("div",{className:"card-header-container flex align-center"},r.a.createElement(kt.a,{className:"icon"}),!n&&r.a.createElement("h3",{onClick:this.toggleInput,className:"card-title grow"},a),n&&r.a.createElement("textarea",{ref:function(t){return e.elTextarea=t},spellCheck:"false",onFocus:function(t){e.autoGrow(t.target)},onKeyDown:function(t){return e.handleKeyPress(t)},className:"card-title-input",autoFocus:!0,onBlur:this.handleSaveBoard,placeholder:"Title...",autoCorrect:"false",onChange:this.handleChange,value:a})),r.a.createElement("button",{className:"close-btn",onClick:this.backToboard},r.a.createElement(ge.a,{className:"close-icon"})),r.a.createElement("p",{className:"card-link"},"in list ",r.a.createElement("span",{onClick:this.backToboard},o)))}}]),a}(n.Component),xt={loadBoard:z,updateBoard:H,setCard:V},Ot=Object(c.b)((function(e){return{board:e.trelloApp.board}}),xt)(St),jt=a(164),Bt=a.n(jt),Lt=function(e){Object(g.a)(a,e);var t=Object(v.a)(a);function a(){var e;Object(f.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={txt:""},e.handleChange=function(t){var a=t.target.value;e.setState({txt:a})},e.handleSaveBoard=function(){var t=JSON.parse(JSON.stringify(e.props.board)),a=e.props.card.id;t.phaseLists.filter((function(e){return e.cards.find((function(e){return e.id===a}))}))[0].cards.forEach((function(t){t.id===e.props.card.id&&(t.desc=e.state.txt)})),e.props.updateBoard(t)},e}return Object(b.a)(a,[{key:"componentDidMount",value:function(){this.setState({txt:this.props.card.desc})}},{key:"render",value:function(){return r.a.createElement("section",null,r.a.createElement("div",{className:"desc-header-container flex"},r.a.createElement(Bt.a,{className:"icon"}),r.a.createElement("span",{className:"desc-header"},"Description")),r.a.createElement("textarea",{className:"card-desc-input",placeholder:"Add a more detailed description...",onChange:this.handleChange,spellCheck:"false",onBlur:this.handleSaveBoard,value:this.state.txt}))}}]),a}(n.Component),Dt={loadBoard:z,updateBoard:H},At=Object(c.b)((function(e){return{board:e.trelloApp.board}}),Dt)(Lt),It=a(419);function Mt(e){var t=e.idx,a=e.todo,n=e.onDelete,o=e.handleChange,s=e.handleSaveBoard,c=e.handleKeyPress;return r.a.createElement("div",{className:"checklist-item flex align-center",key:t},r.a.createElement("input",{className:"checkbox",type:"checkbox",name:"isDone",onChange:function(e){o(e,t)},onBlur:s,checked:a.isDone}),r.a.createElement("input",{className:"checklist-item-txt grow",type:"text",name:"txt",onChange:function(e){return o(e,t)},spellCheck:"false",placeholder:"Add a todo...",onBlur:s,value:a.txt,onKeyDown:c}),r.a.createElement("button",{onClick:function(){n(t)}},r.a.createElement(ge.a,{className:"icon"})))}var Tt=function(e){Object(g.a)(a,e);var t=Object(v.a)(a);function a(){var e;Object(f.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={checkList:null,todoText:"",onAdd:!1,progress:0,checklistTitle:""},e.progressBarUpdate=function(){var t=e.state.checkList.reduce((function(e,t){return t.isDone&&e++,e}),0);e.setState({progress:Math.floor(t/e.state.checkList.length*100)})},e.addTodo=function(){if(e.state.todoText){var t={txt:e.state.todoText,isDone:!1},a=e.state.checkList.slice();a.push(t),e.setState({checkList:a,todoText:""},(function(){e.handleSaveBoard()}))}},e.handleSaveBoard=function(){var t=JSON.parse(JSON.stringify(e.props.board)),a=e.props.card.id,n=t.phaseLists.find((function(e){return e.cards.some((function(e){return e.id===a}))})),r=n.cards.map((function(t){return t.id===e.props.card.id&&(t.checkList=e.state.checkList,t.checklistTitle=e.state.checklistTitle),t})),o=t.phaseLists.findIndex((function(e){return e.id===n.id}));n.cards=r,t.phaseLists[o]=n,J.addActivity(t,e.props.user,L,D.CARD,{id:e.props.card.id,title:e.props.card.title},"update checklist on card"),e.props.updateBoard(t).then((function(){e.progressBarUpdate()}))},e.toggleAdd=function(){e.state.todoText&&e.addTodo(),e.setState((function(e){return{onAdd:!e.onAdd}}))},e.onDelete=function(t){var a=e.state.checkList.slice();a.splice(t,1);var n=1===e.state.checkList.length?"":e.state.checklistTitle;e.setState({checkList:a,checklistTitle:n},(function(){e.handleSaveBoard()}))},e.handleChange=function(t){var a=t.target,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,r=a.name,o="isDone"===r?a.checked:a.value,s=e.state.checkList.slice();"isDone"===r?(s[n].isDone=o,e.setState({checkList:s},(function(){e.handleSaveBoard()}))):-1===n?e.state.onAdd?e.setState({todoText:o}):e.setState({checklistTitle:o}):s[n].txt=o,e.setState({checkList:s})},e.handleFocus=function(e){return e.target.select()},e}return Object(b.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props.card.checklistTitle?this.props.card.checklistTitle:"My Checklist";this.setState({checkList:this.props.card.checkList,onAdd:!1,checklistTitle:t},(function(){return e.progressBarUpdate()}))}},{key:"handleKeyPress",value:function(e){13===e.keyCode&&e.target.blur()}},{key:"render",value:function(){var e=this,t=this.state,a=t.todoText,n=t.onAdd,o=t.checklistTitle,s=t.progress,c=t.checkList;if(!c||!c.length)return null;var l=100===this.state.progress?"#61bd4f":"#2196f3";return r.a.createElement("div",{className:"card-check-list"},r.a.createElement("div",{className:"checklist-title-container flex align-center"},r.a.createElement(It.a,{className:"checklist-icon"}),r.a.createElement("input",{className:"checklist-title",type:"text",name:"txt",placeholder:"Checklist name...",onChange:this.handleChange,onKeyDown:this.handleKeyPress,spellCheck:"false",onFocus:this.handleFocus,onBlur:this.handleSaveBoard,value:o})),c&&c.length>0&&r.a.createElement("div",{className:"progress-bar-container"},r.a.createElement("div",{className:"progress-bar",style:{width:"".concat(s,"%"),backgroundColor:l}})),c&&c.length>0&&this.state.checkList.map((function(t,a){return r.a.createElement(Mt,{todo:t,key:a,onDelete:e.onDelete,handleChange:e.handleChange,handleSaveBoard:e.handleSaveBoard,idx:a,handleKeyPress:e.handleKeyPress})})),!n&&r.a.createElement("button",{className:"add-btn",onClick:this.toggleAdd},"Add Todo"),n&&r.a.createElement("div",{className:"add-item flex align-center"},r.a.createElement("input",{type:"text",onChange:this.handleChange,onKeyDown:this.handleKeyPress,autoFocus:!0,onBlur:this.toggleAdd,value:a}),r.a.createElement("button",{className:"save-checklist-item-btn"},"Save")))}}]),a}(n.Component),Pt={loadBoard:z,updateBoard:H},Ut=Object(c.b)((function(e){return{board:e.trelloApp.board,user:e.trelloUser.user}}),Pt)(Tt),_t=a(420),Ft=a(421),Rt=a(422);function Jt(){return(Jt=Object(h.a)(m.a.mark((function e(t){var a,n,r,o;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.target,"marmelada",n="https://api.cloudinary.com/v1_1/".concat("marmelada","/image/upload"),(r=new FormData).append("file",a.files[0]),r.append("upload_preset","balulu"),e.prev=6,e.next=9,w.a.post(n,r);case 9:return o=e.sent,e.abrupt("return",o.data.url);case 13:throw e.prev=13,e.t0=e.catch(6),console.error(e.t0),e.t0;case 17:case"end":return e.stop()}}),e,null,[[6,13]])})))).apply(this,arguments)}function Kt(){return(Kt=Object(h.a)(m.a.mark((function e(t){var a,n,r,o;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.target,"marmelada",n="https://api.cloudinary.com/v1_1/".concat("marmelada","/raw/upload"),(r=new FormData).append("file",a.files[0]),r.append("upload_preset","balulu"),e.prev=6,e.next=9,w.a.post(n,r);case 9:return o=e.sent,e.abrupt("return",o.data.url);case 13:throw e.prev=13,e.t0=e.catch(6),console.error(e.t0),e.t0;case 17:case"end":return e.stop()}}),e,null,[[6,13]])})))).apply(this,arguments)}var Wt={uploadImg:function(e){return Jt.apply(this,arguments)},uploadRawAttachment:function(e){return Kt.apply(this,arguments)}},qt=a(165),zt=a.n(qt),Ht=function(e){var t=e.isImgLoading,a=e.imgUrl,n=e.title,o=e.removeImgUrl,s=e.loadingMsg,c=s||"Loading your image..";return r.a.createElement(r.a.Fragment,null,t&&r.a.createElement("div",{className:"loading-field flex column align-center"},r.a.createElement(zt.a,{secondaryColor:"#2196f3d9",type:"Circles",color:"#2196F3",className:"loader",height:60,width:60}),r.a.createElement("p",null,c)),a&&r.a.createElement(r.a.Fragment,null,r.a.createElement("img",{className:"card-img",src:a,alt:n}),r.a.createElement("button",{className:"remove-btn flex align-center",title:"Remove cover image",onClick:o},r.a.createElement(be.a,{className:"icon"}))))},Vt=function(e){Object(g.a)(a,e);var t=Object(v.a)(a);function a(){var e;Object(f.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={card:null,isLabelEditShown:!1,isMembersEditShown:!1,cardActivities:[],isDueDateEditShown:!1,isImgLoading:!1,loadingMsg:null},e.getUpdatedLabels=function(){if(!e.props.board.labels.length)return[];var t=e.state.card.labels,a=J.getBoardCopy(e.props.board);return t.reduce((function(e,t){var n=a.labels.find((function(e){return e.id===t.id}));return n&&e.push(n),e}),[])},e.hideCard=function(t){var a=e.state,n=a.isLabelEditShown,r=a.isMembersEditShown,o=a.isDueDateEditShown;"Escape"!==t.code||n||r||o||(e.props.setCard(null),d.push("/board/".concat(e.props.board._id)))},e.toggleProperty=function(t){e.setState((function(e){return Object(u.a)({},t,!e[t])}))},e.getActivities=function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=e.props.board.activities.filter((function(e){return e.object.id===t}));return n.length>10?n.slice(0,a):n},e.addCheckList=function(){var t=JSON.parse(JSON.stringify(e.state.card));t.checkList.length||(t.checkList.push({txt:"",isDone:!1}),e.setState({card:t}))},e.getPhaseIdxByCardId=function(t){return e.props.board.phaseLists.findIndex((function(e){return e.cards.some((function(e){return e.id===t}))}))},e.removeMemberFromCard=function(t){var a=J.getBoardCopy(e.props.board),n=J.getCardById(a,e.props.card.id);n.assignedTo=n.assignedTo.filter((function(e){return e._id!==t._id}));var r=J.replaceCardInBoard(a,n);e.props.updateBoard(r)},e.changeDueDate=function(t){var a=J.getBoardCopy(e.props.board),n=J.getCardById(a,e.props.card.id);n.dueDate=t;var r=J.replaceCardInBoard(a,n);e.props.updateBoard(r)},e.removeImgUrl=function(){var t=J.getBoardCopy(e.props.board),a=J.getCardById(t,e.props.card.id);a.imgUrl=null;var n=J.replaceCardInBoard(t,a);e.props.updateBoard(n)},e.onUploadImg=function(){var t=Object(h.a)(m.a.mark((function t(a){var n,r,o,s;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({isImgLoading:!0}),t.next=3,Wt.uploadImg(a);case 3:n=t.sent,r=J.getBoardCopy(e.props.board),(o=J.getCardById(r,e.props.card.id)).imgUrl=n,s=J.replaceCardInBoard(r,o),e.props.updateBoard(s),e.setState({isImgLoading:!1});case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.removeCard=function(){var t=J.getBoardCopy(e.props.board),a=e.getPhaseIdxByCardId(e.props.card.id),n=J.getCardIdxById(t,a,e.props.card.id);t.phaseLists[a].cards.splice(n,1),e.props.setCard(null),d.push("/board/".concat(e.props.board._id)),e.props.updateBoard(t)},e}return Object(b.a)(a,[{key:"componentDidMount",value:function(){var e,t=this;window.addEventListener("keydown",this.hideCard),this.props.board.phaseLists.forEach((function(a){var n=a.cards.find((function(e){return e.id===t.props.cardId}));n&&(e=n)}));var a=this.getActivities(e.id);this.setState({card:e,cardActivities:a})}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.hideCard)}},{key:"componentDidUpdate",value:function(e){var t=this;if(JSON.stringify(e.board)!==JSON.stringify(this.props.board)){var a;this.props.board.phaseLists.forEach((function(e){var n=e.cards.find((function(e){return e.id===t.props.cardId}));n&&(a=n)}));var n=this.getActivities(a.id);this.setState({card:a,cardActivities:n})}}},{key:"render",value:function(){var e=this;if(!this.props.board||!this.state.card)return"Loading";var t=this.state,a=t.card,n=t.isLabelEditShown,o=t.isMembersEditShown,s=t.cardActivities,c=t.isDueDateEditShown,l=t.isImgLoading,i=a.assignedTo,u=a.dueDate,p=a.imgUrl,m=a.title,h=this.toggleProperty,f=this.changeDueDate,b=this.removeImgUrl,g=this.getUpdatedLabels();return r.a.createElement("section",null,r.a.createElement("div",{onClick:function(){d.push("/board/".concat(e.props.board._id)),e.props.setCard(null)},className:"card-modal"},r.a.createElement("div",{onClick:function(e){return e.stopPropagation()},className:"card-container"},r.a.createElement("div",{className:"card-img-container flex justify-center"},r.a.createElement(Ht,{isImgLoading:l,loadingMsg:this.state.loadingMsg,imgUrl:p,title:m,removeImgUrl:b})),r.a.createElement(Ot,{card:a}),r.a.createElement("div",{className:"card-content flex"},r.a.createElement("div",{className:"card-details flex column grow"},i.length>0&&r.a.createElement("div",{className:"card-details-members"},r.a.createElement("h3",null,"Members"),r.a.createElement("div",{className:"flex align-center"},i.map((function(t){return r.a.createElement("span",{key:t._id,onClick:function(){e.removeMemberFromCard(t)}},r.a.createElement(me,{member:t}))})))),g.length>0&&r.a.createElement("div",{className:"card-details-labels"},r.a.createElement("h3",null,"Labels"),r.a.createElement("div",{className:"labels-gallery flex wrap align-center"},g.map((function(e){return r.a.createElement("span",{title:e.txt,className:"label",onClick:function(){h("isLabelEditShown")},style:{backgroundColor:e.color},key:e.id}," ",r.a.createElement("span",{className:"label-txt"},e.txt))})))),u&&r.a.createElement("div",{className:"card-details-date"},r.a.createElement("h3",null,"Due Date"),r.a.createElement("div",{onClick:function(){h("isDueDateEditShown")},className:"date flex align-center"},r.a.createElement("span",{className:"date-str"},"".concat(de()(u).format("MMM Do"),"\n                                     at ").concat(de()(u).format("HH:mm"))))),r.a.createElement(At,{card:a}),a.checkList.length>0&&r.a.createElement(Ut,{card:a}),r.a.createElement(lt,{card:a,showCommentBox:!0,activities:s})),r.a.createElement("div",{className:"card-sidebar"},r.a.createElement("button",{onClick:function(){h("isMembersEditShown")},className:"card-sidebar-btn"},r.a.createElement("span",null,r.a.createElement(_t.a,{className:"icon"})),"Members"),o&&r.a.createElement(Re,{members:this.props.board.members,card:a,toggleProperty:h}),r.a.createElement("button",{onClick:function(){h("isLabelEditShown")},className:"card-sidebar-btn"},r.a.createElement("span",null,r.a.createElement(he.a,{className:"icon"})),"Labels"),n&&r.a.createElement(Ne,{card:a,toggleProperty:h}),a.checkList.length<1&&r.a.createElement("button",{className:"card-sidebar-btn",onClick:this.addCheckList},r.a.createElement("span",null,r.a.createElement(It.a,{className:"icon"})),"Checklist"),r.a.createElement("button",{onClick:function(){h("isDueDateEditShown")},className:"card-sidebar-btn"},r.a.createElement("span",null,r.a.createElement(Ft.a,{className:"icon"})),"Due Date"),c&&r.a.createElement(Ke,{changeDueDate:f,toggleProperty:h}),!p&&r.a.createElement(r.a.Fragment,null,r.a.createElement("label",{htmlFor:"imgUrl",className:"card-sidebar-btn pointer"},r.a.createElement("span",null,r.a.createElement(Rt.a,{className:"icon"})),"Cover"),r.a.createElement("input",{className:"display-none",type:"file",id:"imgUrl",onChange:this.onUploadImg})),r.a.createElement("button",{onClick:this.removeCard,className:"card-sidebar-btn"},r.a.createElement("span",null,r.a.createElement(be.a,{className:"icon"})),"Delete"))))))}}]),a}(n.Component),Gt={loadBoard:z,updateBoard:H,setCard:V},Yt=Object(c.b)((function(e){return{board:e.trelloApp.board,card:e.trelloApp.card,user:e.trelloUser.user}}),Gt)(Vt),Zt=a(166),Qt=a.n(Zt);function Xt(e){return r.a.createElement("form",{className:"search-input-container flex"},r.a.createElement("input",{className:"board-filter-input",placeholder:"Filter by user...",type:"text",list:"users",name:"user",onChange:function(t){return e.onInputChanged(t.target.value)}}),r.a.createElement(Qt.a,{className:"search-icon"}))}var $t=function(e){Object(g.a)(a,e);var t=Object(v.a)(a);function a(){var e;Object(f.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={boardMenus:{currentOpend:null,menusState:{mainMenu:!1,backgroundMenu:!1,colorMenu:!1,photoMenu:!1}},filteredByUser:null,boardName:"",isTitleOnEdit:!1,isMembersEditShown:!1},e.loadCardById=function(){var t=e.props.match.params.cardId,a=J.getCardById(e.props.board,t);e.props.setCard(a)},e.openSocket=function(){q.setup();var t=e.props.match.params.id;q.emit("open board socket",t),q.on("board updated",e.getBoardById)},e.getBoardById=Object(h.a)(m.a.mark((function t(){var a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.props.match.params.id,t.next=3,e.props.loadBoard(a);case 3:e.setState({boardName:e.props.board.name});case 4:case"end":return t.stop()}}),t)}))),e.toggleMenu=function(t){var a=e.state.boardMenus,n=JSON.parse(JSON.stringify(a));t?(null!=n.currentOpend&&(n.menusState[n.currentOpend]=!n.menusState[n.currentOpend]),n.menusState[t]=!n.menusState[t],n.currentOpend=t):(n.menusState[n.currentOpend]=!1,n.currentOpend=null),e.setState({boardMenus:n},(function(){e.state.boardMenus.currentOpend?window.addEventListener("keydown",e.handleKeyDown):window.removeEventListener("keydown",e.handleKeyDown)}))},e.handleNameChange=function(t){var a=t.target.value;e.setState({boardName:a})},e.handleChangeBoardName=function(){var t=JSON.parse(JSON.stringify(e.props.board)),a=e.state.boardName;if(!e.state.boardName.trim())return e.toggleProperty("isTitleOnEdit");J.addActivity(t,e.props.user,L,D.BOARD,{id:e.props.board._id,title:e.props.board.name},"the name of the board from ".concat(a," to ").concat(e.state.boardName)),t.name=e.state.boardName,e.props.updateBoard(t),e.toggleProperty("isTitleOnEdit")},e.handleKeyDown=function(t){"Escape"===t.code&&e.toggleMenu(null)},e.onInputChanged=function(){var t=Object(h.a)(m.a.mark((function t(a){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.setState({filteredByUser:a});case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.toggleProperty=function(t,a){a&&a.stopPropagation(),"search-name"!==a.target.className&&e.setState((function(e){return Object(u.a)({},t,!e[t])}))},e}return Object(b.a)(a,[{key:"componentDidMount",value:function(){var e=Object(h.a)(m.a.mark((function e(){var t,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getBoardById();case 2:this.openSocket(),this.props.match.params.cardId&&this.props.board?(t=this.props.match.params.cardId,a=J.getCardById(this.props.board,t),this.props.setCard(a)):this.props.setCard(null);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(e){JSON.stringify(e.match.params)!==JSON.stringify(this.props.match.params)&&this.props.board&&this.props.match.params.cardId&&this.loadCardById(this.props.match.params.cardId)}},{key:"componentWillUnmount",value:function(){q.off("board updated",this.getBoardById),q.terminate()}},{key:"handleKeyPress",value:function(e){13===e.keyCode&&e.target.blur()}},{key:"render",value:function(){var e=this,t=this.state,a=t.filteredByUser,n=t.isTitleOnEdit,o=this.state.isMembersEditShown,s=this.props.board;if(!s||!this.state)return"";var c=this.state.boardMenus.menusState,l=c.mainMenu,i=c.backgroundMenu,d=c.colorMenu,u=c.photoMenu,p=s.bgColor?{backgroundColor:s.bgColor}:{backgroundImage:'url("'.concat(s.imgUrl,'")'),backgroundSize:"cover"};return s?r.a.createElement("main",{style:p,className:"board flex column grow"},r.a.createElement("section",{className:"board-nav flex space-between align-center"},r.a.createElement("div",{className:"board-nav-controls flex align-center wrap"},!n&&r.a.createElement("h4",{onClick:function(){e.toggleProperty("isTitleOnEdit")},className:"board-title"},s.name),n&&r.a.createElement("input",{className:"board-title grow",type:"text",name:"txt",onChange:function(t){return e.handleNameChange(t)},spellCheck:"false",autoFocus:!0,onBlur:this.handleChangeBoardName,value:this.state.boardName,onKeyDown:this.handleKeyPress}),r.a.createElement("span",{className:"board-nav-divider"}),r.a.createElement("div",{className:"board-members flex align-center"},s.members&&s.members.map((function(e){return r.a.createElement(me,{key:e._id,member:e})}))),r.a.createElement("div",{className:"add-member",onClick:function(t){return e.toggleProperty("isMembersEditShown",t)}},r.a.createElement(vt.a,{className:"icon"}),o&&r.a.createElement(Re,{board:this.props.board,toggleProperty:this.toggleProperty})),r.a.createElement(Xt,{users:s.members,onInputChanged:this.onInputChanged}),r.a.createElement(wt.a,{to:"/board/".concat(s._id,"/dashboard")},r.a.createElement("div",{className:"nav-btn  flex align-center"},r.a.createElement(Et.a,{className:"nav-icon"}),r.a.createElement("span",{className:"btn-text"},"Statistics")))),r.a.createElement("div",{className:"nav-btn flex align-center",onClick:function(){return e.toggleMenu("mainMenu")}},r.a.createElement(yt.a,null)),r.a.createElement(it,{isMenuShown:l,board:s,onToggleMenu:this.toggleMenu}),r.a.createElement(Ct,{isMenuShown:i,board:s,onToggleMenu:this.toggleMenu}),r.a.createElement(mt,{isMenuShown:d,board:s,onToggleMenu:this.toggleMenu}),r.a.createElement(gt,{isMenuShown:u,board:s,onToggleMenu:this.toggleMenu})),r.a.createElement("section",{className:"board-content flex grow"},r.a.createElement(et,{filteredByUser:a})),this.props.card&&r.a.createElement(Yt,{cardId:this.props.card.id})):"loading"}}]),a}(n.Component),ea={loadBoard:z,updateBoard:H,setCard:V},ta=Object(c.b)((function(e){return{board:e.trelloApp.board,card:e.trelloApp.card,user:e.trelloUser.user,users:e.trelloUser.users}}),ea)($t),aa=function(e){Object(g.a)(a,e);var t=Object(v.a)(a);function a(){return Object(f.a)(this,a),t.apply(this,arguments)}return Object(b.a)(a,[{key:"render",value:function(){return r.a.createElement("main",{className:"home-container flex"},r.a.createElement("div",{className:"text-area flex column align-start"},r.a.createElement("h1",null,"Don't Waste Papers"),r.a.createElement("h3",null,r.a.createElement("span",{className:"logo"},"Flowz"),"the project managment software that keep teams going and Collaborate"),r.a.createElement(wt.a,{to:"/board/5ecbc8edcb39d7f5494f8d40"}," ",r.a.createElement("span",{className:"btn-home"},"Get Started"))))}}]),a}(n.Component),na=Object(c.b)((function(e){return{}}),{})(aa),ra=a(409),oa=a(430),sa=function(e){Object(g.a)(a,e);var t=Object(v.a)(a);function a(){var e;Object(f.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={loginCred:{email:"",password:""},msg:"",error:""},e.loginHandleChange=function(t){var a=t.target,n=a.name,r=a.value;e.setState((function(e){return{loginCred:Object(E.a)(Object(E.a)({},e.loginCred),{},Object(u.a)({},n,r))}}))},e.doLogin=function(){var t=Object(h.a)(m.a.mark((function t(a){var n,r,o,s;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),n=e.state.loginCred,r=n.email,o=n.password,r&&o){s={email:r,password:o};try{e.setState({error:""}),e.props.login(s)}catch(c){e.setState({error:c})}e.setState({loginCred:{email:"",password:""},msg:""},(function(){e.props.history.push("/boards")}))}else e.setState({msg:"Please enter correct user/password"});case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(b.a)(a,[{key:"render",value:function(){return r.a.createElement("main",{className:"sign-in"},r.a.createElement("p",null,this.state.msg),r.a.createElement("form",{className:"sign-in-form",onSubmit:this.doLogin,noValidate:!0},r.a.createElement(oa.a,{onChange:this.loginHandleChange,className:"signin-email",variant:"outlined",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email"}),r.a.createElement(oa.a,{onChange:this.loginHandleChange,className:"signin-password",variant:"outlined",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password"}),r.a.createElement(ra.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:"sign-in-submit-btn"},"Sign In")),this.state.error&&r.a.createElement("span",{className:"error-login"},this.state.error),r.a.createElement("a",{href:"/signUp",className:"sign-in-link"},"Dont have an account? Sign Up"))}}]),a}(n.Component),ca={login:Me},la=Object(c.b)((function(e){return{user:e.trelloUser.userReducer}}),ca)(sa),ia=function(e){Object(g.a)(a,e);var t=Object(v.a)(a);function a(){var e;Object(f.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={msg:"",error:"",signupCred:{email:"",password:"",fullName:""}},e.signupHandleChange=function(t){var a=t.target,n=a.name,r=a.value;e.setState((function(e){return{signupCred:Object(E.a)(Object(E.a)({},e.signupCred),{},Object(u.a)({},n,r))}}))},e.doSignup=function(){var t=Object(h.a)(m.a.mark((function t(a){var n,r,o,s,c;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),n=e.state.signupCred,r=n.email,o=n.password,s=n.fullName,r&&o&&s){t.next=4;break}return t.abrupt("return",e.setState({msg:"All inputs are required!"}));case 4:return c={email:r,password:o,fullName:s},t.prev=5,e.setState({error:""}),t.next=9,e.props.signup(c);case 9:e.setState({signupCred:{email:"",password:"",fullName:""}}),e.props.history.push("/login"),t.next=17;break;case 13:t.prev=13,t.t0=t.catch(5),console.log("error: ",t.t0),e.setState({error:t.t0});case 17:case"end":return t.stop()}}),t,null,[[5,13]])})));return function(e){return t.apply(this,arguments)}}(),e}return Object(b.a)(a,[{key:"render",value:function(){return r.a.createElement("main",{className:"sign-up"},r.a.createElement("p",null,this.state.msg),r.a.createElement("form",{className:"sign-up-form",onSubmit:this.doSignup,noValidate:!0},r.a.createElement(oa.a,{onChange:this.signupHandleChange,className:"signup-full-name",autoComplete:"fname",name:"fullName",variant:"outlined",required:!0,fullWidth:!0,id:"fullName",label:"Full Name",autoFocus:!0}),r.a.createElement(oa.a,{onChange:this.signupHandleChange,className:"signup-email",variant:"outlined",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email"}),r.a.createElement(oa.a,{onChange:this.signupHandleChange,className:"signup-password",variant:"outlined",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password"}),r.a.createElement(ra.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:"sign-up-submit-btn"},"Sign Up")),this.state.error&&r.a.createElement("span",{className:"error-login"},this.state.error))}}]),a}(n.Component),da={signup:function(e){return function(){var t=Object(h.a)(m.a.mark((function t(a){var n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ie.signup(e);case 2:n=t.sent,a(Te(null)),a(Pe(n));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}},ua=Object(c.b)((function(e){return{user:e.trelloUser.userReducer}}),da)(ia),pa=a(426),ma=a(427),ha=a(428),fa=function(e){Object(g.a)(a,e);var t=Object(v.a)(a);function a(){var e;Object(f.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={isCreateBoardMenuShown:!1,newBoardName:"",newBoardColor:"#61acca"},e.handleChangeColor=function(){var t=Object(h.a)(m.a.mark((function t(a){var n,r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=a.target,r=n.value,t.next=4,e.setState({newBoardColor:r});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handleChange=function(t){var a=t.target.value;e.setState({newBoardName:a})},e.toggleAddBoard=function(){e.setState((function(e){return{isCreateBoardMenuShown:!e.isCreateBoardMenuShown}}))},e.createNewBoard=Object(h.a)(m.a.mark((function t(){var a,n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.state.newBoardName.trim()?e.state.newBoardName:"New Board",n=J.createNewBoard(a,e.state.newBoardColor,e.props.user),t.next=4,e.props.addBoard(n);case 4:d.push("/board/".concat(e.props.board._id)),e.setState({isCreateBoardMenuShown:!1,newBoardName:""});case 6:case"end":return t.stop()}}),t)}))),e}return Object(b.a)(a,[{key:"render",value:function(){var e=this.state,t=e.isCreateBoardMenuShown,a=e.newBoardName,n=e.newBoardColor,o=this.props.user;return this.state?r.a.createElement("header",{className:"main-header flex space-between"},r.a.createElement("nav",{className:"flex align-center"},r.a.createElement(wt.a,{to:"/"},r.a.createElement("div",{className:"btn-main-nav flex align-center"},r.a.createElement(pa.a,{className:"btn-icon"}))),r.a.createElement(wt.a,{to:"/boards"},r.a.createElement("div",{className:"btn-main-nav flex align-center"},r.a.createElement(ma.a,{className:"btn-icon"}),r.a.createElement("span",{className:"btn-text"},"Boards")))),r.a.createElement("div",{className:"nav-center flex align-center justify-center"},r.a.createElement(wt.a,{to:"/"},r.a.createElement("div",{className:"logo flex align-center"},r.a.createElement(ha.a,{className:"btn-icon"}),r.a.createElement("span",{className:"logo-text"},"Flowz")))),r.a.createElement("nav",{className:"right-nav flex flex-end align-center"},r.a.createElement("div",{className:"btn-main-nav flex align-center",onClick:this.toggleAddBoard},r.a.createElement(Q.a,{className:"btn-icon"})),t&&r.a.createElement("div",{className:"create-board-menu  flex column"},r.a.createElement("div",{className:"create-board-header flex align-center"},r.a.createElement("h5",{className:"grow"},"New Board"),r.a.createElement(Z.a,{className:"close-create-board-menu",onClick:this.toggleAddBoard})),r.a.createElement("div",{className:"create-board-btns flex column"},r.a.createElement("div",{className:"color-container"},r.a.createElement("label",{className:"rgb(81, 152, 57)"===n?"color-preview green selected":"color-preview green"},r.a.createElement("input",{onClick:this.handleChangeColor,className:"color-preview-input",type:"radio",name:"green",value:"rgb(81, 152, 57)"})),r.a.createElement("label",{className:"#d29034"===n?"color-preview orange selected":"color-preview orange"},r.a.createElement("input",{onClick:this.handleChangeColor,className:"color-preview-input",type:"radio",name:"orange",value:"#d29034"})),r.a.createElement("label",{className:"rgb(0, 121, 191)"===n?"color-preview blue selected":"color-preview blue"},r.a.createElement("input",{onClick:this.handleChangeColor,className:"color-preview-input",type:"radio",name:"blue",value:"rgb(0, 121, 191)"})),r.a.createElement("label",{className:"rgb(176, 70, 50)"===n?"color-preview red selected":"color-preview red"},r.a.createElement("input",{onClick:this.handleChangeColor,className:"color-preview-input",type:"radio",name:"red",value:"rgb(176, 70, 50)"})),r.a.createElement("label",{className:"rgb(137, 96, 158)"===n?"color-preview purple selected":"color-preview purple"},r.a.createElement("input",{onClick:this.handleChangeColor,className:"color-preview-input",type:"radio",name:"purple",value:"rgb(137, 96, 158)"})),r.a.createElement("label",{className:"rgb(205, 90, 145)"===n?"color-preview pink selected":"color-preview pink"},r.a.createElement("input",{onClick:this.handleChangeColor,className:"color-preview-input",type:"radio",name:"pink",value:"rgb(205, 90, 145)"})),r.a.createElement("label",{className:"rgb(75, 191, 107)"===n?"color-preview light-green selected":"color-preview light-green"},r.a.createElement("input",{onClick:this.handleChangeColor,className:"color-preview-input",type:"radio",name:"light-green",value:"rgb(75, 191, 107)"})),r.a.createElement("label",{className:"rgb(73, 169, 215)"===n?"color-preview turquise selected":"color-preview turquise"},r.a.createElement("input",{onClick:this.handleChangeColor,className:"color-preview-input",type:"radio",name:"turquise",value:"rgb(73, 169, 215)"}))),r.a.createElement("input",{className:"board-name-input",type:"text",onChange:this.handleChange,placeholder:"Your Board's name...",value:a}),r.a.createElement("button",{className:"create-board-btn",onClick:this.createNewBoard},"Create a new Board"))),o&&"5ed4fd7181471d4e7041dcbe"!==o._id&&r.a.createElement("div",{className:"logout-btn btn-main-nav flex align-center"},r.a.createElement("span",{className:"btn-text",onClick:this.props.logout},"Logout")),o&&r.a.createElement("span",{className:"logged-in flex align-center"},r.a.createElement(me,{member:o})),o&&"5ed4fd7181471d4e7041dcbe"===o._id&&r.a.createElement("div",{className:"login-btn btn-main-nav flex align-center"},r.a.createElement(wt.a,{to:"/login"}," ",r.a.createElement("span",{className:"btn-text"},"Login"))))):""}}]),a}(n.Component),ba={loadBoard:z,updateBoard:H,addBoard:function(e){return function(){var t=Object(h.a)(m.a.mark((function t(a){var n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,J.add(e);case 2:n=t.sent,a({type:"ADD_BOARD",board:n});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},logout:function(e){return function(){var t=Object(h.a)(m.a.mark((function t(a){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ie.logout(e);case 2:a(Te(null));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},login:Me},ga=Object(c.b)((function(e){return{board:e.trelloApp.board,user:e.trelloUser.user}}),ba)(fa),va=function(e){Object(g.a)(a,e);var t=Object(v.a)(a);function a(){var e;Object(f.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).handleLoadBoard=function(t){e.props.loadBoard(t),d.push("/board/".concat(t))},e}return Object(b.a)(a,[{key:"componentDidMount",value:function(){this.props.queryBoards()}},{key:"render",value:function(){var e=this,t=this.props.boards;return r.a.createElement("section",{className:"boards-page"},r.a.createElement("div",{className:"boards"},r.a.createElement("h1",{className:"boards-title flex"},"Boards"),r.a.createElement("div",{className:"boards-container"},!t&&r.a.createElement("p",null,"Your boards will appear here"),t&&t.map((function(t,a){return r.a.createElement("div",{className:"board-item board-item".concat(a),key:a,onClick:function(){return e.handleLoadBoard(t._id)},style:t.imgUrl?{backgroundImage:"url(".concat(t.imgUrl,")"),backgroundSize:"cover"}:{backgroundColor:t.bgColor}},r.a.createElement("h3",null,t.name))})))))}}]),a}(n.Component),Ea={loadBoard:z,queryBoards:function(e){return function(t){J.query(e).then((function(e){return t({type:"QUERY_BOARDS",boards:e})}))}}},ya=Object(c.b)((function(e){return{board:e.trelloApp.board,boards:e.trelloApp.boards,user:e.trelloApp.user}}),Ea)(va),wa=a(36),Ca=a(75),Na=a(168),ka=a.n(Na),Sa=["#273d5d","#C492B1","#00ca78","#a8eb12","#ee6352","#DA4167","#ffb5d7","#72709e","#F6AE2D","#C9E3AC","#9580b0","#b991bf","#dda2cc"],xa=["#273d5dc2","#C492B1c2","#00ca78c2","#a8eb12c2","#ee6352c2","#DA4167c2","#ffb5d7c2","#72709ec2","#F6AE2Dc2","#C9E3ACc2","#9580b0c2","#b991bfc2","#dda2ccc2"],Oa=function(e){Object(g.a)(a,e);var t=Object(v.a)(a);function a(){var e;Object(f.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).getBoardById=Object(h.a)(m.a.mark((function t(){var a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.props.match.params.id,t.next=3,e.props.loadBoard(a);case 3:case"end":return t.stop()}}),t)}))),e.getSprintProgress=function(){var t=e.props.board,a={};return t.phaseLists.forEach((function(e){e.cards.forEach((function(e){e.checkList.forEach((function(e){e.isDone?a.Completed?a.Completed+=1:a.Completed=1:a["In Progress"]?a["In Progress"]+=1:a["In Progress"]=1}))}))})),{labels:Object(wa.a)(Object.keys(a)),datasets:[{label:"Sprint Progress",data:Object(wa.a)(Object.values(a)),backgroundColor:Sa,hoverBackgroundColor:xa}]}},e.getTaskPerPhaseDistribution=function(){var t=e.props.board,a={};return t.phaseLists.forEach((function(e){e.cards.forEach((function(t){a[e.name]?a[e.name]+=1:a[e.name]=1}))})),{labels:Object(wa.a)(Object.keys(a)),datasets:[{label:"Tasks Per Phase Distribution",data:Object(wa.a)(Object.values(a)),backgroundColor:Sa,hoverBackgroundColor:xa}]}},e.getTaskByLables=function(){var t=e.props.board,a={};return t.phaseLists.forEach((function(e){e.cards.forEach((function(e){e.labels.forEach((function(e){a[e.txt]?a[e.txt]+=1:a[e.txt]=1}))}))})),{labels:Object(wa.a)(Object.keys(a)),datasets:[{label:"Tasks by Label",data:Object(wa.a)(Object.values(a)),backgroundColor:Sa,hoverBackgroundColor:xa}]}},e.goBack=function(){d.push("/board/".concat(e.props.match.params.id))},e}return Object(b.a)(a,[{key:"componentDidMount",value:function(){this.getBoardById()}},{key:"getTasksPerDevloperData",value:function(){var e=this.props.board,t={};return e.phaseLists.forEach((function(e){e.cards.forEach((function(e){e.assignedTo.forEach((function(e){t[e.fullName]?t[e.fullName]+=1:t[e.fullName]=1}))}))})),{labels:Object(wa.a)(Object.keys(t)),datasets:[{label:"Tasks Per Developer",data:Object(wa.a)(Object.values(t)),backgroundColor:Sa,hoverBackgroundColor:xa}]}}},{key:"render",value:function(){if(!this.props.board)return"loading";var e=this.getTasksPerDevloperData(),t=this.getTaskPerPhaseDistribution(),a=this.getTaskByLables(),n=this.getSprintProgress(),o=J.getBoardStats(this.props.board);return r.a.createElement("div",{className:"dashboard grow"},r.a.createElement("div",{className:"btn-back flex space-between align-center",onClick:this.goBack},r.a.createElement(ka.a,{className:"icon"}),r.a.createElement("span",null,"Back")),r.a.createElement("div",{className:"dashboard-stats flex justify-center"},r.a.createElement("div",{className:"data-preview flex column justify-center"},r.a.createElement("span",{className:"number"},o.cardsCount?o.cardsCount:0),r.a.createElement("span",{className:"data-desc"},"Total Cards")),r.a.createElement("div",{className:"data-preview flex column justify-center"},r.a.createElement("span",{className:"number"},o.unassigned?o.unassigned:0),r.a.createElement("span",{className:"data-desc"},"Unassigned Cards")),r.a.createElement("div",{className:"data-preview flex column justify-center"},r.a.createElement("span",{className:"number"},o.addedToday?o.addedToday:0),r.a.createElement("span",{className:"data-desc"},"Added Today"))),r.a.createElement("section",{className:"chart-cont flex column justify-center align-center"},r.a.createElement("article",{className:"chart sprint-progress flex justify-center column align-center"},r.a.createElement("h2",null,"Sprint Progress"),r.a.createElement(Ca.c,{className:"chart-stats",data:n,options:{scales:{yAxes:[{ticks:{beginAtZero:!0}}]}}})),r.a.createElement("article",{className:"chart tasks-per-devloper flex column justify-center align-center"},r.a.createElement("h2",null,"Tasks Per Developer"),r.a.createElement(Ca.a,{className:"chart-stats",data:e,options:{scales:{yAxes:[{ticks:{beginAtZero:!0}}]},legend:{display:!1}}})),r.a.createElement("article",{className:"chart tasks-per-phase flex column justify-center align-center"},r.a.createElement("h2",null,"Tasks Per Phase"),r.a.createElement(Ca.b,{className:"chart-stats",data:t,options:{scales:{yAxes:[{ticks:{beginAtZero:!0}}]}}})),r.a.createElement("article",{className:"chart tasks-by-lables flex column justify-center align-center"},r.a.createElement("h2",null,"Tasks By Label"),r.a.createElement(Ca.a,{className:"chart-stats",data:a,options:{scales:{yAxes:[{ticks:{beginAtZero:!0}}]},legend:{display:!1}}}))))}}]),a}(n.Component),ja={loadBoard:z},Ba=Object(c.b)((function(e){return{board:e.trelloApp.board}}),ja)(Oa);function La(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(l.b,{history:d},r.a.createElement(ga,null),r.a.createElement(l.c,null,r.a.createElement(l.a,{path:"/",component:na,exact:!0}),r.a.createElement(l.a,{path:"/board/:id/dashboard",component:Ba,exact:!0}),r.a.createElement(l.a,{path:"/board/:id/:cardId?",component:ta,exact:!0}),r.a.createElement(l.a,{path:"/login",component:la,exact:!0}),r.a.createElement(l.a,{path:"/signup",component:ua,exact:!0}),r.a.createElement(l.a,{path:"/boards",component:ya,exact:!0}))))}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Da=a(29),Aa=a(169),Ia={boards:[],board:null,card:null};var Ma=null,Ta={users:[],user:Ma=sessionStorage.user?JSON.parse(sessionStorage.user):{_id:"5ed4fd7181471d4e7041dcbe",email:"guest@guest.co.il",fullName:"Guest Guest",img:"https://img.icons8.com/plasticine/2x/user.png"}};var Pa=Object(Da.c)({trelloApp:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ia,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"QUERY_BOARDS":return Object(E.a)(Object(E.a)({},e),{},{boards:t.boards});case"LOAD_BOARD":case"ADD_BOARD":return Object(E.a)(Object(E.a)({},e),{},{board:t.board});case"UPDATE_BOARD":return q.emit("board updated",t.board._id),Object(E.a)(Object(E.a)({},e),{},{board:t.board});case"REMOVE_BOARD":return Object(E.a)(Object(E.a)({},e),{},{boards:e.boards.filter((function(e){return e._id!==t.boardId}))});case"SET_CARD":return Object(E.a)(Object(E.a)({},e),{},{card:t.card});default:return e}},trelloUser:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ta,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USER":var a=t.user?t.user:Ma;return Object(E.a)(Object(E.a)({},e),{},{user:a});case"USER_REMOVE":return Object(E.a)(Object(E.a)({},e),{},{users:e.users.filter((function(e){return e._id!==t.userId}))});case"SET_USERS":return Object(E.a)(Object(E.a)({},e),{},{users:t.users});case"ADD_USER":return Object(E.a)(Object(E.a)({},e),{},{users:[].concat(Object(wa.a)(e.users),[t.user])});case"QUERY_USERS":return Object(E.a)(Object(E.a)({},e),{},{users:t.users});default:return e}}}),Ua=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||Da.d,_a=Object(Da.e)(Pa,Ua(Object(Da.a)(Aa.a))),Fa=a(170),Ra=a(24);s.a.render(r.a.createElement(c.a,{store:_a},r.a.createElement(Ra.a,{utils:Fa.a},r.a.createElement(La,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[185,1,2]]]);
//# sourceMappingURL=main.cfdabbe3.chunk.js.map