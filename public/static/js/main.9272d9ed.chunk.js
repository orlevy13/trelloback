(this.webpackJsonpflowz=this.webpackJsonpflowz||[]).push([[0],{160:function(e,t,a){"use strict";(function(e){a.d(t,"a",(function(){return l}));var n=a(161),r=a.n(n),o=a(162),s=a.n(o);e.fetch=r.a;var c=new s.a({accessKey:"8ZH8zzN8CDDrZJWGYhpPmzEreLvOZ6WRPVTgnEH_6Ac"});var l={getListPhotos:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:14,t=i(1,5);return c.photos.listPhotos(t,e,"popular").then((function(e){return e.json()}))}};function i(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e))+e}}).call(this,a(54))},185:function(e,t,a){e.exports=a(370)},194:function(e,t,a){},240:function(e,t){},257:function(e,t,a){e.exports=a.p+"static/media/collage.48948499.jpg"},258:function(e,t,a){e.exports=a.p+"static/media/colors.864f4df1.jpg"},370:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(18),s=a.n(o),c=a(11),l=(a(194),a(17)),i=a(31),u=Object(i.a)(),d=a(34),p=a(5),m=a.n(p),h=a(12),f=a(7),b=a(8),g=a(10),v=a(9),E=a(14),w=a(72),y=a.n(w),C=function(e,t){return x(e,"GET",t)},N=function(e,t){return x(e,"POST",t)},k=function(e,t){return x(e,"PUT",t)},S=function(e,t){return x(e,"DELETE",t)};function x(e){return O.apply(this,arguments)}function O(){return(O=Object(h.a)(m.a.mark((function e(t){var a,n,r,o=arguments;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>1&&void 0!==o[1]?o[1]:"get",n=o.length>2&&void 0!==o[2]?o[2]:null,e.prev=2,e.next=5,y()({url:"".concat("/api/").concat(t),method:a,data:n});case 5:return r=e.sent,e.abrupt("return",r.data);case 9:throw e.prev=9,e.t0=e.catch(2),console.dir(e.t0),e.t0.response&&u.push("/login"),e.t0;case 14:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}var j="added",B="updated",L={CARD:"a card",PHASE:"a phase",Board:"a board"};function D(){return(D=Object(h.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"",e.next=3,C("board/".concat(""));case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A(){return(A=Object(h.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C("board/".concat(t));case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(){return(I=Object(h.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N("board",t);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function M(){return(M=Object(h.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k("board",t);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(){return(P=Object(h.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S("board/".concat(t));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,t="",a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=0;n<e;n++)t+=a.charAt(Math.floor(Math.random()*a.length));return t}var U,_={query:function(e){return D.apply(this,arguments)},getById:function(e){return A.apply(this,arguments)},remove:function(e){return P.apply(this,arguments)},add:function(e){return I.apply(this,arguments)},update:function(e){return M.apply(this,arguments)},makeId:T,getBoardCopy:function(e){return JSON.parse(JSON.stringify(e))},getNewCard:function(e){return Object(E.a)(Object(E.a)({},e),{},{id:T(),bgColor:"",desc:"",dueDate:null,createdAt:Date.now(),labels:[],checkList:[],assignedTo:[],attachments:[]})},getNewPhase:function(e){return{id:T(),name:e,desc:"",cards:[]}},getSortedPhase:function(e,t){return"title"===e?t.cards.sort((function(e,t){return e.title.localeCompare(t.title)})):"firstCreated"===e?t.cards.sort((function(e,t){return e.createdAt-t.createdAt})):t.cards.sort((function(e,t){return t.createdAt-e.createdAt}))},addActivity:function(e,t,a,n,r){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s={at:Date.now(),operation:a,user:t,type:n,object:r,desc:o};e.activities.unshift(s)},createNewBoard:function(e,t,a){return{name:e,bgColor:t,createdAt:Date.now(),creator:a,members:[a],desc:null,activities:[],phaseLists:[],labels:[],isLabelTxtShown:!1,imgUrl:null}},getNewLabel:function(e){return{txt:e.txt,color:e.color,id:T()}}},F=a(159),R=a.n(F),J={setup:function(){U=R()("/")},terminate:function(){U=null},on:function(e,t){U.on(e,t)},off:function(e,t){U.off(e,t)},emit:function(e,t){U.emit(e,t)}};function K(e){return function(){var t=Object(h.a)(m.a.mark((function t(a){var n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_.getById(e);case 2:n=t.sent,a({type:"LOAD_BOARD",board:n});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}function W(e){return function(){var t=Object(h.a)(m.a.mark((function t(a,n){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:"UPDATE_BOARD",board:e}),t.prev=1,t.next=4,_.update(e);case 4:t.next=8;break;case 6:t.prev=6,t.t0=t.catch(1);case 8:J.emit("board updated",e._id);case 9:case"end":return t.stop()}}),t,null,[[1,6]])})));return function(e,a){return t.apply(this,arguments)}}()}function q(e){return function(t){t({type:"SET_CARD",card:e})}}var z=a(52),H=a(415),V=a(399),G=a(407),Y=function(e){Object(g.a)(a,e);var t=Object(v.a)(a);function a(){var e;Object(f.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={card:{title:""}},e.handleChange=function(t){var a=t.target;e.setState({card:{title:a.value}})},e.onAddCard=function(){var t=Object(h.a)(m.a.mark((function t(a){var n,r,o;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),e.state.card.title.trim()){t.next=3;break}return t.abrupt("return");case 3:return n=_.getBoardCopy(e.props.board),r=n.phaseLists.findIndex((function(t){return t.id===e.props.phaseId})),o=_.getNewCard(e.state.card),n.phaseLists[r].cards.push(o),_.addActivity(n,e.props.user,j,L.CARD,{id:o.id,title:o.title}),t.next=10,e.props.updateBoard(n);case 10:e.setState({card:{title:""}}),e.props.bottomCard.scrollIntoView({behavior:"smooth"});case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handleClick=function(t){t.target!==e.addCardBtn&&t.target!==e.cardNameInput&&(e.state.card.title&&e.addCardBtn.form.dispatchEvent(new Event("submit",{cancelable:!0})),e.props.toggleAddCardShown())},e}return Object(b.a)(a,[{key:"componentDidUpdate",value:function(){this.props.isAddCardShown?(this.cardNameInput.addEventListener("keypress",this.submitOnEnter),window.addEventListener("mouseup",this.handleClick),this.props.bottomCard.scrollIntoView({behavior:"smooth"})):window.removeEventListener("mouseup",this.handleClick)}},{key:"submitOnEnter",value:function(e){13!==e.which||e.shiftKey||(e.target.form.dispatchEvent(new Event("submit",{cancelable:!0})),e.preventDefault())}},{key:"render",value:function(){var e=this,t=this.handleChange,a=this.onAddCard,n=this.state,o=this.props,s=o.toggleAddCardShown,c=o.isAddCardShown;return r.a.createElement(r.a.Fragment,null,c&&r.a.createElement("form",{className:"add-card",onSubmit:a},r.a.createElement("textarea",{className:"card-name-input",required:!0,autoFocus:!0,type:"text",name:"title",autoComplete:"off",onChange:t,spellCheck:"false",ref:function(t){return e.cardNameInput=t},value:n.card.title,placeholder:"Enter a title for this card.."}),r.a.createElement("div",{className:"form-btns flex align-end"},r.a.createElement("button",{ref:function(t){return e.addCardBtn=t},className:"submit-btn",type:"submit"},"Add Card"),r.a.createElement("button",{className:"close-btn",onClick:s},r.a.createElement(V.a,null)))))}}]),a}(n.Component),Z={updateBoard:W},Q=Object(c.b)((function(e){return{board:e.trelloApp.board,user:e.trelloUser.user}}),Z)(Y),X=function(e){Object(g.a)(a,e);var t=Object(v.a)(a);function a(){var e;Object(f.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).toggleIsLabelTxtShown=function(t){t.stopPropagation();var a=_.getBoardCopy(e.props.board);a.isLabelTxtShown=!a.isLabelTxtShown,e.props.updateBoard(a)},e.getUpdatedLabels=function(){if(!e.props.board.labels.length)return[];var t=e.props.labels,a=_.getBoardCopy(e.props.board);return t.reduce((function(e,t){var n=a.labels.find((function(e){return e.id===t.id}));return n&&e.push(n),e}),[])},e}return Object(b.a)(a,[{key:"render",value:function(){var e=this.toggleIsLabelTxtShown,t=this.props.board.isLabelTxtShown,a=this.getUpdatedLabels(),n=t?"shown":"";return r.a.createElement("div",{className:"labels-container flex wrap"},a.map((function(a){return r.a.createElement("span",{title:a.txt,className:"label ".concat(n),style:{backgroundColor:a.color},onClick:e,key:a.id},r.a.createElement("span",{className:"label-txt"},t&&a.txt))})))}}]),a}(n.Component),$={updateBoard:W},ee=Object(c.b)((function(e){return{board:e.trelloApp.board}}),$)(X),te=a(405),ae=a(413),ne=a(414),re=a(90),oe=a.n(re),se=a(35),ce=a.n(se),le=a(403),ie=function(e){var t=e.dueDate,a=t?ce()(t).format("MMM Do"):null,n=t-Date.now()<864e5,o=Date.now()>t?"#eb5a46":n?"#f2d600":"",s=o?"#fff":"#5e6c84";return r.a.createElement("div",{style:{backgroundColor:o,color:s},className:"card-due flex align-center"}," ",r.a.createElement("span",{className:"due-icon"},r.a.createElement(le.a,{fontSize:"small"})),a)};function ue(e){var t,a=(t=e.member?e.member.fullName.split(" "):e.fullName.split(" ")).map((function(e){return e.charAt(0)})).join("").slice(0,2),n=e.member;return r.a.createElement("div",{title:t.join(" "),className:"member-avatar"},(!n||!n.img)&&r.a.createElement("span",{className:"member-initial"},a.toUpperCase()),n&&n.img&&r.a.createElement("span",{style:{backgroundImage:"url("+n.img+")"},className:"member-initial-img"}))}var de=a(410),pe=a(411),me=a(412),he=a(406),fe=a(404);function be(e){var t=e.label,a=e.toggleEditMode,n=e.card.labels.some((function(e){return e.id===t.id}));return r.a.createElement("div",{className:"label-edit flex align-center"},r.a.createElement("span",{onClick:function(){e.toggleLabelOnCard(t)},className:"grow flex align-center",style:{backgroundColor:t.color}},t.txt,n&&r.a.createElement(fe.a,{className:"icon"})),r.a.createElement("button",{onClick:function(){a(t)}},r.a.createElement(te.a,{className:"icon"})))}var ge=function(e){Object(g.a)(a,e);var t=Object(v.a)(a);function a(){var e;Object(f.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={txt:"",color:"#b3bac5"},e.handleChangeColor=function(t){var a=t.target;e.setState({color:a.value})},e.handleChange=function(t){var a=t.target;e.setState({txt:a.value})},e.handleSubmit=function(t){t.preventDefault(),e.props.addLabel(e.state)},e}return Object(b.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.txt,n=t.color;return r.a.createElement("section",{className:"add-label"},r.a.createElement("div",{className:"add-label-header flex align-center"},r.a.createElement("p",{className:"grow"},"Add a label"),r.a.createElement("button",{onClick:this.props.toggleIsAddLabelShown},r.a.createElement(he.a,null))),r.a.createElement("div",{className:"add-label-gallery"},r.a.createElement("p",null,"Select a color"),r.a.createElement("label",{className:"#61bd4f"===n?"color-preview c-61bd4f selected":"color-preview c-61bd4f"},r.a.createElement("input",{onClick:this.handleChangeColor,className:"display-none",type:"radio",value:"#61bd4f"})),r.a.createElement("label",{className:"#f2d600"===n?"color-preview f2d600 selected":"color-preview f2d600"},r.a.createElement("input",{onClick:this.handleChangeColor,className:"display-none",type:"radio",value:"#f2d600"})),r.a.createElement("label",{className:"#ff9f1a"===n?"color-preview ff9f1a selected":"color-preview ff9f1a"},r.a.createElement("input",{onClick:this.handleChangeColor,className:"display-none",type:"radio",value:"#ff9f1a"})),r.a.createElement("label",{className:"#eb5a46"===n?"color-preview eb5a46 selected":"color-preview eb5a46"},r.a.createElement("input",{onClick:this.handleChangeColor,className:"display-none",type:"radio",value:"#eb5a46"})),r.a.createElement("label",{className:"#0079bf"===n?"color-preview c-0079bf selected":"color-preview c-0079bf"},r.a.createElement("input",{onClick:this.handleChangeColor,className:"display-none",type:"radio",value:"#0079bf"})),r.a.createElement("label",{className:"#00c2e0"===n?"color-preview c-00c2e0 selected":"color-preview c-00c2e0"},r.a.createElement("input",{onClick:this.handleChangeColor,className:"display-none",type:"radio",value:"#00c2e0"})),r.a.createElement("label",{className:"#ff78cb"===n?"color-preview ff78cb selected":"color-preview ff78cb"},r.a.createElement("input",{onClick:this.handleChangeColor,className:"display-none",type:"radio",value:"#ff78cb"})),r.a.createElement("label",{className:"#344563"===n?"color-preview c-344563 selected":"color-preview c-344563"},r.a.createElement("input",{onClick:this.handleChangeColor,className:"display-none",type:"radio",value:"#344563"})),r.a.createElement("label",{className:"#b3bac5"===n?"color-preview b3bac5 selected":"color-preview b3bac5"},r.a.createElement("input",{onClick:this.handleChangeColor,className:"display-none",type:"radio",value:"#b3bac5"})),r.a.createElement("label",{className:"#c377e0"===n?"color-preview c377e0 selected":"color-preview c377e0"},r.a.createElement("input",{onClick:this.handleChangeColor,className:"display-none",type:"radio",value:"#c377e0"})),r.a.createElement("form",{onSubmit:function(t){t.preventDefault(),e.props.addLabel(e.state)}},r.a.createElement("input",{type:"text",name:"txt",value:a,autoFocus:!0,placeholder:"Enter label name..",required:!0,autoComplete:"off",spellCheck:"false",onChange:this.handleChange}),r.a.createElement("button",{className:"save-btn"},"Save")),r.a.createElement("button",{className:"cancel-btn",onClick:this.props.toggleIsAddLabelShown},"Cancel")))}}]),a}(n.Component),ve=function(e){Object(g.a)(a,e);var t=Object(v.a)(a);function a(){var e;Object(f.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={editLabel:null,isAddLabelShown:!1},e.hideLabelsEdit=function(t){"Escape"===t.code&&e.props.toggleProperty("isLabelEditShown")},e.toggleEditMode=function(t){e.setState({editLabel:t})},e.handleChange=function(t){var a=t.target;e.setState((function(e){return{editLabel:Object(E.a)(Object(E.a)({},e.editLabel),{},{txt:a.value})}}))},e.saveLabel=function(){var t=Object(h.a)(m.a.mark((function t(a){var n,r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),n=e.state.editLabel,(r=_.getBoardCopy(e.props.board)).labels=r.labels.map((function(e){return e.id===n.id?n:e})),t.next=6,e.props.updateBoard(r);case 6:e.toggleEditMode();case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.toggleLabelOnCard=function(t){var a=_.getBoardCopy(e.props.board),n=e.props.card.id,r=a.phaseLists.findIndex((function(e){return e.cards.some((function(e){return e.id===n}))})),o=a.phaseLists[r].cards.findIndex((function(e){return e.id===n})),s=a.phaseLists[r].cards[o];s.labels.some((function(e){return e.id===t.id}))?s.labels=s.labels.filter((function(e){return e.id!==t.id})):s.labels.push(t),a.phaseLists[r].cards[o]=s,e.props.updateBoard(a)},e.toggleIsAddLabelShown=function(){e.setState((function(e){return{isAddLabelShown:!e.isAddLabelShown}}))},e.addLabel=function(t){var a=_.getNewLabel(t),n=_.getBoardCopy(e.props.board);n.labels.push(a),e.props.updateBoard(n),e.toggleIsAddLabelShown()},e.removeLabel=function(t){var a=_.getBoardCopy(e.props.board),n=a.labels.filter((function(e){return e.id!==t}));a.labels=n,e.props.updateBoard(a),e.toggleEditMode(null)},e}return Object(b.a)(a,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.hideLabelsEdit)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.hideLabelsEdit)}},{key:"render",value:function(){var e=this,t=this.toggleEditMode,a=this.saveLabel,n=this.toggleLabelOnCard,o=this.removeLabel,s=this.state,c=s.editLabel,l=s.isAddLabelShown,i=this.props.board.labels;return r.a.createElement(r.a.Fragment,null,!l&&r.a.createElement("section",{className:"edit-labels flex column"},r.a.createElement("div",{className:"edit-labels-header flex align-center"},r.a.createElement("p",{className:"grow"},"Labels"),r.a.createElement("button",{onClick:function(){e.props.toggleProperty("isLabelEditShown")}},r.a.createElement(he.a,null))),r.a.createElement("div",{className:"labels-gallery grow"},!c&&i.map((function(o){return r.a.createElement(be,{toggleLabelOnCard:n,card:e.props.card,saveLabel:a,key:o.id,label:o,toggleEditMode:t})})),c&&r.a.createElement("div",null,r.a.createElement("form",{onSubmit:a},r.a.createElement("input",{type:"text",name:"txt",value:c.txt,autoFocus:!0,autoComplete:"off",spellCheck:"false",onChange:this.handleChange}),r.a.createElement("button",{className:"save-btn"},"Save")),r.a.createElement("button",{className:"cancel-btn",onClick:function(){o(c.id)}},"Delete"))),r.a.createElement("button",{className:"add-label-btn flex align-center justify-center",onClick:this.toggleIsAddLabelShown},r.a.createElement(G.a,{className:"add-icon"}),"Add Label")),l&&r.a.createElement(ge,{addLabel:this.addLabel,toggleIsAddLabelShown:this.toggleIsAddLabelShown}))}}]),a}(n.Component),Ee={updateBoard:W},we=Object(c.b)((function(e){return{board:e.trelloApp.board}}),Ee)(ve);function ye(e){var t=e.member,a=e.toggleMemberOnCard,n=e.card.assignedTo.some((function(e){return e._id===t._id})),o=t.fullName.toUpperCase().split(" ").map((function(e){return e.charAt(0)})).join("").slice(0,2);return r.a.createElement("div",{onClick:function(){a(t)},className:"member-item flex align-center"},!t.img&&r.a.createElement("div",{className:"initials"},r.a.createElement("span",null,o)),t.img&&r.a.createElement("span",{style:{backgroundImage:"url("+t.img+")"},className:"member-img"}),t.fullName,n&&r.a.createElement(fe.a,{className:"icon"}))}var Ce=function(e){Object(g.a)(a,e);var t=Object(v.a)(a);function a(){var e;Object(f.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={name:""},e.hideMembersEdit=function(t){"Escape"===t.code&&e.props.toggleProperty("isMembersEditShown")},e.handleChange=function(t){var a=t.target;e.setState({name:a.value})},e.toggleMemberOnCard=function(t){var a=_.getBoardCopy(e.props.board),n=e.props.card.id,r=a.phaseLists.findIndex((function(e){return e.cards.some((function(e){return e.id===n}))})),o=a.phaseLists[r].cards.findIndex((function(e){return e.id===n})),s=a.phaseLists[r].cards[o];s.assignedTo.some((function(e){return e._id===t._id}))?s.assignedTo=s.assignedTo.filter((function(e){return e._id!==t._id})):s.assignedTo.push(t),a.phaseLists[r].cards[o]=s,e.props.updateBoard(a)},e}return Object(b.a)(a,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.hideMembersEdit)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.hideMembersEdit)}},{key:"render",value:function(){var e=this,t=this.props,a=t.members,n=t.toggleProperty,o=t.card,s=this.state.name,c=a.filter((function(e){return e.fullName.toLowerCase().includes(s.toLowerCase())}));return r.a.createElement("section",{className:"edit-members"},r.a.createElement("div",{className:"edit-members-header flex align-center"},r.a.createElement("p",{className:"grow"},"Members"),r.a.createElement("button",{onClick:function(){n("isMembersEditShown")}},r.a.createElement(he.a,null))),r.a.createElement("input",{className:"search-name",onChange:this.handleChange,autoComplete:"off",type:"search",name:"name",value:s,placeholder:"Search members"}),r.a.createElement("div",{className:"members-gallery"},a&&c.map((function(t){return r.a.createElement(ye,{toggleMemberOnCard:e.toggleMemberOnCard,card:o,key:t._id,member:t})}))))}}]),a}(n.Component),Ne={updateBoard:W},ke=Object(c.b)((function(e){return{board:e.trelloApp.board}}),Ne)(Ce),Se=a(428),xe=function(e){Object(g.a)(a,e);var t=Object(v.a)(a);function a(){var e;Object(f.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={dueDate:0},e.hideDueDateEdit=function(t){"Escape"===t.code&&e.props.toggleProperty("isDueDateEditShown")},e.handleDateChange=function(t){e.setState({dueDate:t._d.getTime()})},e.handleSave=function(){e.props.changeDueDate(e.state.dueDate),e.props.toggleProperty("isDueDateEditShown")},e.removeDueDate=function(){e.props.changeDueDate(null),e.props.toggleProperty("isDueDateEditShown")},e}return Object(b.a)(a,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.hideDueDateEdit),this.setState({dueDate:Date.now()})}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.hideDueDateEdit)}},{key:"render",value:function(){var e=this.props.toggleProperty,t=this.state.dueDate;return r.a.createElement("div",{className:"date-picker"},r.a.createElement("div",{className:"date-picker-header flex align-center"},r.a.createElement("p",{className:"grow"},"Change Due Date"),r.a.createElement("button",{onClick:function(){e("isDueDateEditShown")}},r.a.createElement(he.a,{className:"icon"}))),r.a.createElement("div",{className:"date-picker-content flex column justify-center"},r.a.createElement(Se.a,{className:"picker-input",disablePast:"true",views:["date","month","hours","minutes"],minDateMessage:"",value:t,onChange:this.handleDateChange}),r.a.createElement("div",{className:"flex space-between"},r.a.createElement("button",{onClick:this.removeDueDate,className:"remove-btn"},"Remove"),r.a.createElement("button",{onClick:this.handleSave,className:"save-btn"},"Save"))))}}]),a}(n.Component),Oe=function(e){Object(g.a)(a,e);var t=Object(v.a)(a);function a(){var e;Object(f.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={card:{title:"",dueDate:0,labels:[],assignedTo:[]},isLabelEditShown:!1,isMembersEditShown:!1,isDueDateEditShown:!1},e.handleChange=function(t){var a=t.target;e.setState({card:{title:a.value}})},e.hideMenu=function(t){var a=e.state,n=a.isLabelEditShown,r=a.isMembersEditShown,o=a.isDueDateEditShown;"Escape"!==t.code||n||r||o||e.props.toggleIsMenuShown()},e.getPhaseIdxByCardId=function(t){return e.props.board.phaseLists.findIndex((function(e){return e.cards.some((function(e){return e.id===t}))}))},e.onDelete=function(){var t=e.props.card.id,a=_.getBoardCopy(e.props.board),n=e.getPhaseIdxByCardId(t);a.phaseLists[n].cards=a.phaseLists[n].cards.filter((function(e){return e.id!==t})),e.props.updateBoard(a),e.props.toggleIsMenuShown()},e.onChangeTitle=function(){if(e.state.card.title.trim()){var t=e.props.card.id,a=_.getBoardCopy(e.props.board),n=e.getPhaseIdxByCardId(t);a.phaseLists[n].cards.filter((function(a){return a.id!==t||(a.title=e.state.card.title),a})),e.props.updateBoard(a),e.props.toggleIsMenuShown()}},e.changeDueDate=function(t){var a=_.getBoardCopy(e.props.board),n=e.props.card.id,r=e.getPhaseIdxByCardId(n),o=a.phaseLists[r].cards.findIndex((function(e){return e.id===n}));a.phaseLists[r].cards[o].dueDate=t,e.props.updateBoard(a)},e.toggleProperty=function(t){e.setState((function(e){return Object(d.a)({},t,!e[t])}))},e}return Object(b.a)(a,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.hideMenu),this.titleInput.addEventListener("keypress",this.submitOnEnter);var e=this.props.card,t=e.title,a=e.dueDate,n=e.labels,r=e.assignedTo;this.setState({card:{title:t,dueDate:a,labels:n,assignedTo:r}}),this.cardMenu.scrollIntoView({behavior:"smooth",block:"end",inline:"end"})}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.hideMenu),this.titleInput.removeEventListener("keypress",this.submitOnEnter)}},{key:"submitOnEnter",value:function(e){13!==e.which||e.shiftKey||(e.target.form.dispatchEvent(new Event("submit",{cancelable:!0})),e.preventDefault())}},{key:"render",value:function(){var e=this,t=this.onDelete,a=this.handleChange,n=this.onChangeTitle,o=this.toggleProperty,s=this.changeDueDate,c=this.state,l=c.isLabelEditShown,i=c.card,u=c.isMembersEditShown,d=c.isDueDateEditShown,p=i.title;return r.a.createElement("section",null,r.a.createElement("div",{onMouseDown:this.props.toggleIsMenuShown,className:"screen"}),r.a.createElement("section",{className:"menu-container flex"},r.a.createElement("form",{onSubmit:n,className:"edit-card-form flex column"},r.a.createElement("textarea",{onChange:a,name:"title",value:p,cols:"30",rows:"5",ref:function(t){return e.titleInput=t},spellCheck:"false",autoComplete:"off",autoFocus:!0}),r.a.createElement("button",{onClick:n,className:"save-btn"},"Save")),r.a.createElement("div",{ref:function(t){return e.cardMenu=t},className:"card-menu flex column"},r.a.createElement("button",{onClick:function(){o("isLabelEditShown")},className:"flex align-center"},r.a.createElement(de.a,{className:"icon"}),"Edit Labels"),l&&r.a.createElement(we,{card:this.props.card,toggleProperty:o}),r.a.createElement("button",{onClick:function(){o("isMembersEditShown")},className:"flex align-center"},r.a.createElement(pe.a,{className:"icon"}),"Change Members"),u&&r.a.createElement(ke,{card:this.props.card,members:this.props.board.members,toggleProperty:o}),r.a.createElement("button",{onClick:function(){o("isDueDateEditShown")},className:"flex align-center"},r.a.createElement(le.a,{className:"icon"}),"Change Due Date"),d&&r.a.createElement(xe,{changeDueDate:s,toggleProperty:o}),r.a.createElement("button",{onClick:t,className:"flex align-center"},r.a.createElement(me.a,{className:"icon"}),"Delete"))))}}]),a}(n.Component),je={updateBoard:W},Be=Object(c.b)((function(e){return{board:e.trelloApp.board}}),je)(Oe),Le=function(e){Object(g.a)(a,e);var t=Object(v.a)(a);function a(){var e;Object(f.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={isMenuShown:!1,pageX:0,pageY:0},e.getUpdatedLabels=function(){if(!e.props.board.labels.length)return[];var t=e.props.card.labels,a=_.getBoardCopy(e.props.board);return t.reduce((function(e,t){var n=a.labels.find((function(e){return e.id===t.id}));return n&&e.push(n),e}),[])},e.toggleIsMenuShown=function(t){t&&(t.preventDefault(),t.stopPropagation()),e.setState((function(e){return{isMenuShown:!e.isMenuShown}}))},e}return Object(b.a)(a,[{key:"render",value:function(){var e=this,t=this.toggleIsMenuShown,a=this.state.isMenuShown,n=this.props.card,o=n.title,s=n.imgUrl,c=n.dueDate,l=n.checkList,i=n.assignedTo,u=n.attachments,d=l.filter((function(e){return e.isDone})).length,p=d===l.length?"#61bd4f":"",m=p?"#fff":"",h=this.getUpdatedLabels();return r.a.createElement(r.a.Fragment,null,a&&r.a.createElement(Be,{card:this.props.card,toggleIsMenuShown:t}),r.a.createElement(z.b,{draggableId:this.props.card.id,index:this.props.index},(function(a,n){return r.a.createElement(oe.a,{style:a.draggableProps.style,snapshot:n},(function(n){return r.a.createElement("section",Object.assign({onContextMenu:t,onClick:function(){e.props.setCard(e.props.card)},className:"card-preview flex column"},a.draggableProps,a.dragHandleProps,{ref:a.innerRef,style:n}),r.a.createElement("button",{onClick:t,className:"show-menu-btn"},r.a.createElement(te.a,{className:"show-menu-icon"})),s&&r.a.createElement("div",{className:"card-img flex justify-center"},r.a.createElement("img",{alt:"Card",src:s})),h&&r.a.createElement(ee,{labels:h}),r.a.createElement("p",null,o),r.a.createElement("div",{className:"card-badges flex wrap"},c&&r.a.createElement(ie,{dueDate:c}),u.length>0&&r.a.createElement("div",{className:"attach-badge flex align-center"},r.a.createElement(ae.a,{className:"attach-icon"}),r.a.createElement("span",null,u.length)),l.length>0&&r.a.createElement("div",{style:{backgroundColor:p,color:m},className:"checklist-badge flex align-center"},r.a.createElement("span",null,r.a.createElement(ne.a,{className:"checklist-icon"})),r.a.createElement("span",null,d,"/",l.length))),r.a.createElement("div",{className:"members-badge flex align-center"},i.length>0&&i.map((function(e){return r.a.createElement(ue,{key:e._id,member:e})}))))}))})))}}]),a}(r.a.Component),De={loadBoard:K,setCard:q},Ae=Object(c.b)((function(e){return{board:e.trelloApp.board}}),De)(Le),Ie=function(e){Object(g.a)(a,e);var t=Object(v.a)(a);function a(){var e;Object(f.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={isInputShown:!1,isMenuShown:!1,isSortShown:!1,newPhaseName:"",isAddCardShown:!1},e.toggleInputShown=function(){e.state.isInputShown?window.removeEventListener("keydown",e.hideInput):window.addEventListener("keydown",e.hideInput),e.setState((function(e){return{isInputShown:!e.isInputShown}}))},e.hideInput=function(t){"Escape"!==t.code&&"onblur"!==t.type||(e.setState({isInputShown:!1}),window.removeEventListener("keydown",e.hideInput))},e.handleChange=function(t){var a=t.target;e.setState({newPhaseName:a.value})},e.handleSubmit=function(t){if(t.preventDefault(),e.state.newPhaseName.trim()){var a=_.getBoardCopy(e.props.board),n=e.props.phase.id,r=a.phaseLists.findIndex((function(e){return e.id===n}));a.phaseLists[r].name=e.state.newPhaseName,e.props.updateBoard(a),e.toggleInputShown()}},e.toggleMenuShown=function(){e.state.isSortShown?e.setState({isMenuShown:!1,isSortShown:!1}):e.setState((function(e){return{isMenuShown:!e.isMenuShown}}))},e.showAddCard=function(){e.setState({isAddCardShown:!0}),e.toggleMenuShown()},e.toggleAddCardShown=function(){e.setState((function(e){return{isAddCardShown:!e.isAddCardShown}}))},e.toggleIsSortShown=function(){e.setState((function(e){return{isSortShown:!e.isSortShown}}))},e.sortListBy=function(t){var a=_.getBoardCopy(e.props.board),n=e.props.phase.id,r=a.phaseLists.find((function(e){return e.id===n})),o=_.getSortedPhase(t,r);a.phaseLists=a.phaseLists.filter((function(e){return e.id===o.id?o:e})),e.props.updateBoard(a),e.toggleIsSortShown(),e.toggleMenuShown()},e.onDeletePhase=function(){e.toggleMenuShown();var t=_.getBoardCopy(e.props.board);t.phaseLists=t.phaseLists.filter((function(t){return t.id!==e.props.phase.id})),e.props.updateBoard(t)},e}return Object(b.a)(a,[{key:"componentDidMount",value:function(){this.setState({newPhaseName:this.props.phase.name})}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.hideInput)}},{key:"render",value:function(){var e=this,t=this.props.phase,a=t.name,n=t.id,o=t.cards,s=this.state,c=s.newPhaseName,l=s.isInputShown,i=s.isMenuShown,u=s.isSortShown,d=s.isAddCardShown;return r.a.createElement(z.b,{draggableId:n,index:this.props.index},(function(t,s){return r.a.createElement(oe.a,{style:t.draggableProps.style,snapshot:s},(function(p){return r.a.createElement("article",Object.assign({className:"phase flex column"},t.draggableProps,{ref:t.innerRef},s.isDropAnimating=!0,{style:p}),r.a.createElement("div",Object.assign({},t.dragHandleProps,{className:"phase-header flex space-between"}),!l&&r.a.createElement("h5",{className:"phase-title grow",onClick:e.toggleInputShown},a),l&&r.a.createElement("form",{className:"flex grow",onSubmit:e.handleSubmit},r.a.createElement("input",{className:"phase-name-input grow",type:"text",name:"newPhaseName",value:c,autoFocus:!0,autoComplete:"off",spellCheck:"false",onBlur:e.toggleInputShown,onChange:e.handleChange})),r.a.createElement(H.a,{className:"pointer",onClick:e.toggleMenuShown}),i&&r.a.createElement("div",{className:"phase-menu flex column"},r.a.createElement("div",{className:"menu-header flex align-center"},r.a.createElement("h5",{className:"grow"},"List Actions"),r.a.createElement(V.a,{className:"pointer",onClick:e.toggleMenuShown})),r.a.createElement("div",{className:"menu-btns flex column"},r.a.createElement("button",{onClick:e.showAddCard},"Add A Card"),r.a.createElement("button",{onClick:e.toggleIsSortShown},"Sort By.."),u&&r.a.createElement("div",{className:"sort-options flex column"},r.a.createElement("button",{onClick:function(){e.sortListBy("title")}},"Title"),r.a.createElement("button",{onClick:function(){e.sortListBy("firstCreated")}},"First Created"),r.a.createElement("button",{onClick:function(){e.sortListBy("lastCreated")}},"Last Created")),r.a.createElement("button",{onClick:e.onDeletePhase},"Delete List")))),r.a.createElement(z.c,{droppableId:n},(function(t){return r.a.createElement("div",Object.assign({className:"cards-list",ref:t.innerRef},t.droppableProps),o.map((function(e,t){return r.a.createElement(Ae,{key:e.id,card:e,index:t})})),t.placeholder,r.a.createElement(Q,{isAddCardShown:d,bottomCard:e.bottomCard,toggleAddCardShown:e.toggleAddCardShown,phaseId:e.props.phase.id}),r.a.createElement("div",{style:{opacity:0},ref:function(t){return e.bottomCard=t}}))})),!d&&r.a.createElement("button",{onClick:e.toggleAddCardShown,className:"add-card-btn flex align-center"},r.a.createElement(G.a,{className:"add-icon",fontSize:"large"}),"Add a card"))}))}))}}]),a}(n.Component),Me={updateBoard:W},Pe=Object(c.b)((function(e){return{board:e.trelloApp.board}}),Me)(Ie),Te=function(e){Object(g.a)(a,e);var t=Object(v.a)(a);function a(){var e;Object(f.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={board:null,isInputShown:!1,newListName:"",phaseListToShow:null},e.toggleInputShown=function(){e.state.isInputShown?e.removeEventListeners():e.addEventListeners(),e.setState((function(e){return{isInputShown:!e.isInputShown}}))},e.hideInput=function(t){"Escape"!==t.code&&t.target===e.listNameInput||t.target===e.submitBtn||(e.setState({isInputShown:!1}),e.removeEventListeners())},e.handleChange=function(t){var a=t.target;e.setState((function(e){return Object(E.a)(Object(E.a)({},e),{},{newListName:a.value})}))},e.addEventListeners=function(){window.addEventListener("keydown",e.hideInput),window.addEventListener("mousedown",e.hideInput)},e.removeEventListeners=function(){window.removeEventListener("keydown",e.hideInput),window.removeEventListener("mousedown",e.hideInput)},e.onAddPhase=function(){var t=Object(h.a)(m.a.mark((function t(a){var n,r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),e.state.newListName.trim()){t.next=3;break}return t.abrupt("return");case 3:return n=_.getBoardCopy(e.props.board),r=_.getNewPhase(e.state.newListName),n.phaseLists.push(r),t.next=8,e.props.updateBoard(n);case 8:e.setState({newListName:""},(function(){e.listForm.scrollIntoView({inline:"end",behavior:"smooth"})}));case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onDragEnd=function(t){var a=t.destination,n=t.source,r=t.type;if(a&&(a.droppableId!==n.droppableId||a.index!==n.index)){var o=_.getBoardCopy(e.props.board);if("PhasePreview"===r){var s=o.phaseLists,c=s.splice(n.index,1)[0];s.splice(a.index,0,c)}else{var l=o.phaseLists,i=l.find((function(e){return e.id===n.droppableId})),u=l.find((function(e){return e.id===a.droppableId}));if(i.id===u.id){var d=i.cards.splice(n.index,1)[0];i.cards.splice(a.index,0,d)}else{var p=i.cards.splice(n.index,1)[0];u.cards.splice(a.index,0,p),_.addActivity(o,e.props.user,B,L.CARD,{id:p.id,title:p.title},"moved card from ".concat(i.name," to ").concat(u.name," -Card:"))}}e.props.updateBoard(o)}},e}return Object(b.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.setState({board:this.props.board},(function(){var t=e.getFilteredPhaseLists(e.props.filteredByUser);e.setState({phaseListToShow:t})}))}},{key:"componentDidUpdate",value:function(e){if(JSON.stringify(e.board)!==JSON.stringify(this.props.board)){var t=this.getFilteredPhaseLists(this.props.filteredByUser);this.setState({board:this.props.board,phaseListToShow:t})}if(JSON.stringify(e.filteredByUser)!==JSON.stringify(this.props.filteredByUser)){var a=this.getFilteredPhaseLists(this.props.filteredByUser);this.setState({phaseListToShow:a})}}},{key:"componentWillUnmount",value:function(){this.removeEventListeners()}},{key:"getFilteredPhaseLists",value:function(e){if(!e)return this.props.board.phaseLists;var t=_.getBoardCopy(this.props.board);return t.phaseLists.map((function(t){return t.cards=t.cards.filter((function(t){return t.assignedTo.find((function(t){return t.fullName.toLowerCase().includes(e.trim().toLowerCase())}))}))})),t.phaseLists}},{key:"render",value:function(){var e=this;if(!this.state.board||!this.state.phaseListToShow)return"loading..";var t=this.toggleInputShown,a=this.onAddPhase,n=this.handleChange,o=this.hideInput,s=this.state,c=s.isInputShown,l=s.newListName,i=s.phaseListToShow;return r.a.createElement(z.a,{onDragEnd:this.onDragEnd},r.a.createElement(z.c,{droppableId:"all-columns",direction:"horizontal",type:"PhasePreview"},(function(s,u){return r.a.createElement("section",Object.assign({className:"phase-list flex"},s.droppableProps,{ref:s.innerRef}),i&&i.map((function(e,t){return r.a.createElement(Pe,{key:e.id,index:t,phase:e})})),!c&&r.a.createElement("button",{className:"add-list-btn flex align-center",onClick:t}," ",r.a.createElement(G.a,{fontSize:"small"}),"Add new list"),c&&r.a.createElement("form",{ref:function(t){return e.listForm=t},className:"add-list-form",onSubmit:a},r.a.createElement("input",{ref:function(t){return e.listNameInput=t},type:"text",autoFocus:!0,spellCheck:"false",name:"newListName",onChange:n,required:!0,autoComplete:"off",placeholder:"Enter list title..",value:l}),r.a.createElement("div",{className:"flex align-center"},r.a.createElement("button",{ref:function(t){return e.submitBtn=t},className:"submit-btn",type:"submit"},"Add List"),r.a.createElement(V.a,{className:"cancel-btn pointer",onClick:o}))),s.placeholder)})))}}]),a}(n.Component),Ue={updateBoard:W},_e=Object(c.b)((function(e){return{board:e.trelloApp.board,user:e.trelloUser.user}}),Ue)(Te),Fe=a(417),Re=function(e){Object(g.a)(a,e);var t=Object(v.a)(a);function a(){var e;Object(f.a)(this,a);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(e=t.call.apply(t,[this].concat(o))).dynamicActivity=function(t){var a=t.at,n=t.user,o=t.type,s=t.object,c=t.operation,l=t.desc,i=null,u=null;return l?(i=r.a.createElement("a",{className:"activity-user",href:"/user/".concat(n._id),target:"_blank",rel:"noopener noreferrer"},n.fullName),r.a.createElement("div",{className:"activity flex"},r.a.createElement(ue,{fullName:n.fullName}),r.a.createElement("div",{className:"activity-content flex column"},r.a.createElement("span",null,i," "," ".concat(l)),r.a.createElement("span",{onClick:e.OpenByObjectType,className:"activity-object"},s.title),r.a.createElement("div",{className:"activity-time"},ce()(a).fromNow())))):n?(i=r.a.createElement("a",{className:"activity-user",href:"/user/".concat(n._id),target:"_blank",rel:"noopener noreferrer"},n.fullName),u=r.a.createElement("span",{onClick:e.OpenByObjectType,className:"activity-object"},s.title),r.a.createElement("div",{className:"activity flex"},r.a.createElement(ue,{fullName:n.fullName}),r.a.createElement("div",{className:"activity-content flex column"},r.a.createElement("span",null,i," "," ".concat(c," ").concat(o)," ",u),r.a.createElement("div",{className:"activity-time"},ce()(a).fromNow())))):r.a.createElement("div",{style:{display:"none"}},"stam")},e.OpenByObjectType=function(){var t=e.props.activity,a=t.type,n=t.object;if(a&&n&&"card"===a.toLowerCase()&&e.props.allowOpenCard){var r=JSON.parse(JSON.stringify(e.props.board)),o=n.id,s=r.phaseLists.find((function(e){return e.cards.some((function(e){return e.id===o}))}));if(!s)return;var c=s.cards.find((function(e){return e.id===o}));if(!c)return;e.props.onCloseMenu(null),e.props.setCard(c)}},e}return Object(b.a)(a,[{key:"render",value:function(){var e=this.props.activity;return this.dynamicActivity(e)}}]),a}(r.a.Component),Je={updateBoard:W,setCard:q},Ke=Object(c.b)((function(e){return{board:e.trelloApp.board}}),Je)(Re),We=a(416),qe=function(e){Object(g.a)(a,e);var t=Object(v.a)(a);function a(){var e;Object(f.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={txt:""},e.handleChange=function(t){var a=t.target.value;e.setState({txt:a})},e.onEnterDown=function(t){13!==t.which||t.shiftKey||(e.handleSaveBoard(),t.preventDefault())},e.handleSaveBoard=function(){var t=JSON.parse(JSON.stringify(e.props.board)),a=e.props.card;e.state.txt.trim()&&(_.addActivity(t,e.props.user,j,L.CARD,{id:a.id,title:a.title},'commented "'.concat(e.state.txt,'"')),e.setState({txt:""}),e.props.updateBoard(t))},e}return Object(b.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.activities,n=t.showCommentBox,o=this.state.txt;return r.a.createElement("div",{className:"activity-container"},r.a.createElement("div",{className:"activity-header flex align-center"},r.a.createElement(We.a,{className:"activity-icon"}),r.a.createElement("span",{className:"activity-header-text"},"Activity")),n&&r.a.createElement("div",{className:"flex column"},r.a.createElement("div",{className:"flex"},r.a.createElement(ue,{fullName:this.props.user.fullName}),r.a.createElement("input",{type:"text",className:"comment-input",ref:function(t){return e.cardNameInput=t},placeholder:"Write a comment...",onChange:this.handleChange,spellCheck:"false",onBlur:this.handleSaveBoard,onKeyDown:this.onEnterDown,value:this.state.txt})),o.length>0&&r.a.createElement("button",{onClick:this.handleSaveBoard,className:"add-comment-btn",type:"submit"},"Save")),a.map((function(t,a){return r.a.createElement(Ke,{allowOpenCard:!n,onCloseMenu:e.props.onCloseMenu,key:a,activity:t})})))}}]),a}(r.a.Component),ze={updateBoard:W},He=Object(c.b)((function(e){return{board:e.trelloApp.board,user:e.trelloUser.user}}),ze)(qe),Ve=function(e){Object(g.a)(a,e);var t=Object(v.a)(a);function a(){return Object(f.a)(this,a),t.apply(this,arguments)}return Object(b.a)(a,[{key:"render",value:function(){var e=this,t=this.props.isMenuShown?"shown":"",a=this.props.board,n=a.bgColor?{backgroundColor:a.bgColor}:{backgroundImage:'url("'.concat(a.imgUrl,'")'),backgroundSize:"cover"};return r.a.createElement("div",{className:"board-menu ".concat(t)},r.a.createElement("div",{className:"board-menu-header flex"},r.a.createElement("div",{className:"board-menu-header-content flex align-center grow"},r.a.createElement("h3",{className:"menu-header-title"},"Menu"),r.a.createElement(Fe.a,{onClick:function(){return e.props.onToggleMenu(null)},className:"btn-header-menu"}))),r.a.createElement("div",{className:"flex column"},r.a.createElement("div",{className:"board-menu-content flex column"},r.a.createElement("div",{className:"board-menu-item flex align-center",onClick:function(){return e.props.onToggleMenu("backgroundMenu")}},r.a.createElement("div",{className:"board-menu-icon",style:n}),r.a.createElement("span",{className:"board-menu-text"},"Change Background")),r.a.createElement("span",{className:"board-menu-header-divider"}),r.a.createElement(He,{onCloseMenu:this.props.onToggleMenu,activities:a.activities}))))}}]),a}(n.Component),Ge=a(418),Ye=function(e){Object(g.a)(a,e);var t=Object(v.a)(a);function a(){var e;Object(f.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).changeBoardColor=function(t){if(t){var a=_.getBoardCopy(e.props.board);a.bgColor=t,a.imgUrl=null,_.addActivity(a,e.props.user,B,L.Board,{id:a._id,title:a.name},"changed board background color"),e.props.updateBoard(a)}},e}return Object(b.a)(a,[{key:"render",value:function(){var e=this,t=this.props.isMenuShown?"shown":"display-none";return r.a.createElement("div",{className:"board-menu ".concat(t)},r.a.createElement("div",{className:"flex column"},r.a.createElement("div",{className:"board-menu-header"},r.a.createElement("div",{className:"board-menu-header-content  flex justify-center"},r.a.createElement(Ge.a,{onClick:function(){return e.props.onToggleMenu("backgroundMenu")},className:"btn-header-menu"}),r.a.createElement("h3",{className:"menu-header-title"},"Change Background"),r.a.createElement(Fe.a,{onClick:function(){return e.props.onToggleMenu(null)},className:"btn-header-menu"}))),r.a.createElement("div",{className:"board-menu-content"},r.a.createElement("div",{className:"flex space-between wrap"},r.a.createElement("div",{className:"btn-color",style:{backgroundColor:"rgb(0, 121, 191)"},onClick:function(){return e.changeBoardColor("rgb(0, 121, 191)")}}),r.a.createElement("div",{className:"btn-color",style:{backgroundColor:"rgb(210, 144, 52)"},onClick:function(){return e.changeBoardColor("rgb(210, 144, 52)")}}),r.a.createElement("div",{className:"btn-color",style:{backgroundColor:"rgb(81, 152, 57)"},onClick:function(){return e.changeBoardColor("rgb(81, 152, 57)")}}),r.a.createElement("div",{className:"btn-color",style:{backgroundColor:"rgb(176, 70, 50)"},onClick:function(){return e.changeBoardColor("rgb(176, 70, 50)")}}),r.a.createElement("div",{className:"btn-color",style:{backgroundColor:"rgb(137, 96, 158)"},onClick:function(){return e.changeBoardColor("rgb(137, 96, 158)")}}),r.a.createElement("div",{className:"btn-color",style:{backgroundColor:"rgb(205, 90, 145)"},onClick:function(){return e.changeBoardColor("rgb(205, 90, 145)")}}),r.a.createElement("div",{className:"btn-color",style:{backgroundColor:"rgb(75, 191, 107)"},onClick:function(){return e.changeBoardColor("rgb(75, 191, 107)")}}),r.a.createElement("div",{className:"btn-color",style:{backgroundColor:"rgb(0, 174, 204)"},onClick:function(){return e.changeBoardColor("rgb(0, 174, 204)")}}),r.a.createElement("div",{className:"btn-color",style:{backgroundColor:"rgb(131, 140, 145)"},onClick:function(){return e.changeBoardColor("rgb(131, 140, 145)")}})))))}}]),a}(n.Component),Ze={loadBoard:K,updateBoard:W},Qe=Object(c.b)((function(e){return{board:e.trelloApp.board,user:e.trelloUser.user}}),Ze)(Ye),Xe=a(160),$e=function(e){Object(g.a)(a,e);var t=Object(v.a)(a);function a(){var e;Object(f.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={imgs:null},e.changeBoardImg=function(t){if(t){var a=_.getBoardCopy(e.props.board);a.imgUrl=t,a.bgColor=null,_.addActivity(a,e.props.user,B,L.Board,{id:a._id,title:a.name},"change board background image"),e.props.updateBoard(a)}},e}return Object(b.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.state.imgs||Xe.a.getListPhotos().then((function(t){var a=t.map((function(e){return{thumbUrl:e.urls.thumb,regularUrl:e.urls.regular,fullUrl:e.urls.full,credit:"".concat(e.user.links.html,"?utm_source=Flowz&utm_medium=referral"),userName:"".concat(e.user.name)}}));e.setState({imgs:a},(function(){}))}))}},{key:"render",value:function(){var e=this,t=this.props.isMenuShown?"shown":"display-none",a=this.state.imgs;return r.a.createElement("div",{className:"board-menu ".concat(t)},r.a.createElement("div",{className:"flex column"},r.a.createElement("div",{className:"board-menu-header"},r.a.createElement("div",{className:"board-menu-header-content  flex justify-center"},r.a.createElement(Ge.a,{onClick:function(){return e.props.onToggleMenu("backgroundMenu")},className:"btn-header-menu"}),r.a.createElement("h3",{className:"menu-header-title"},"Photos by",r.a.createElement("a",{className:"unsplash",href:"https://unsplash.com/?utm_source=Flowz&utm_medium=referral&utm_campaign=api-credit"},"Unsplash")),r.a.createElement(Fe.a,{onClick:function(){return e.props.onToggleMenu(null)},className:"btn-header-menu"}))),r.a.createElement("div",{className:"board-menu-content"},r.a.createElement("div",{className:"flex space-between wrap"},a&&a.map((function(t,a){return r.a.createElement("div",{className:"btn-photo flex column align-center flex-end ",style:{backgroundImage:'url("'.concat(t.thumbUrl,'")')},key:a,onClick:function(){return e.changeBoardImg(t.regularUrl)}})}))))))}}]),a}(n.Component),et={loadBoard:K,updateBoard:W},tt=Object(c.b)((function(e){return{board:e.trelloApp.board,user:e.trelloUser.user}}),et)($e),at=a(423),nt=a(424),rt=a(46),ot=function(e){Object(g.a)(n,e);var t=Object(v.a)(n);function n(){return Object(f.a)(this,n),t.apply(this,arguments)}return Object(b.a)(n,[{key:"render",value:function(){var e=this,t=this.props.isMenuShown?"shown":"display-none";return r.a.createElement("div",{className:"board-menu ".concat(t)},r.a.createElement("div",{className:"flex column"},r.a.createElement("div",{className:"board-menu-header"},r.a.createElement("div",{className:"board-menu-header-content flex justify-center"},r.a.createElement(Ge.a,{onClick:function(){return e.props.onToggleMenu("mainMenu")},className:"btn-header-menu"}),r.a.createElement("h3",{className:"menu-header-title"},"Colors"),r.a.createElement(Fe.a,{onClick:function(){return e.props.onToggleMenu(null)},className:"btn-header-menu"}))),r.a.createElement("div",{className:"board-menu-content"},r.a.createElement("div",{className:"flex space-between"},r.a.createElement("div",{className:"bg-btn flex column align-center",onClick:function(){return e.props.onToggleMenu("photoMenu")}},r.a.createElement("img",{className:"bg-btn-img",src:a(257),alt:""}),r.a.createElement("span",null,"Photos")),r.a.createElement("div",{className:"bg-btn flex column align-center",onClick:function(){return e.props.onToggleMenu("colorMenu")}},r.a.createElement("img",{className:"bg-btn-img",src:a(258),alt:""}),r.a.createElement("span",null,"Colors"))))))}}]),n}(n.Component),st=a(163),ct=a.n(st),lt=function(e){Object(g.a)(a,e);var t=Object(v.a)(a);function a(){var e;Object(f.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={txt:"",onPhase:"",isTitleOnEdit:!1},e.toggleInput=function(){e.setState((function(e){return{isTitleOnEdit:!e.isTitleOnEdit}}))},e.handleSaveBoard=function(){if(!e.state.txt.trim())return e.toggleInput();if(e.state.isTitleOnEdit){var t=JSON.parse(JSON.stringify(e.props.board)),a=e.props.card.id;t.phaseLists.filter((function(e){return e.cards.find((function(e){return e.id===a}))}))[0].cards.forEach((function(t){t.id===e.props.card.id&&(t.title=e.state.txt)})),e.props.updateBoard(t),e.toggleInput()}},e.handleChange=function(t){var a=t.target.value;e.setState({txt:a}),e.autoGrow(e.elTextarea)},e.autoGrow=function(e){e.style.height=e.scrollHeight+"px"},e.backToboard=function(){u.push("/board/".concat(e.props.board._id))},e}return Object(b.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.card.id,t=this.props.board.phaseLists.filter((function(t){return t.cards.find((function(t){return t.id===e}))}));this.setState({txt:this.props.card.title,onPhase:t[0].name})}},{key:"handleKeyPress",value:function(e){13===e.keyCode&&e.target.blur()}},{key:"render",value:function(){var e=this;if(!this.state)return"loading";var t=this.state,a=t.txt,n=t.isTitleOnEdit,o=t.onPhase;return r.a.createElement("div",{className:"card-header"},r.a.createElement("div",{className:"card-header-container flex align-center"},r.a.createElement(ct.a,{className:"icon"}),!n&&r.a.createElement("h3",{onClick:this.toggleInput,className:"card-title grow"},a),n&&r.a.createElement("textarea",{ref:function(t){return e.elTextarea=t},spellCheck:"false",onFocus:function(t){e.autoGrow(t.target)},onKeyDown:function(t){return e.handleKeyPress(t)},className:"card-title-input",autoFocus:!0,onBlur:this.handleSaveBoard,placeholder:"Title...",autoCorrect:"false",onChange:this.handleChange,value:a})),r.a.createElement("button",{className:"close-btn",onClick:function(){e.props.setCard(null)}},r.a.createElement(he.a,{className:"close-icon"})),r.a.createElement("p",{className:"card-link"},"in list ",r.a.createElement("span",{onClick:function(){e.props.setCard(null)}},o)))}}]),a}(n.Component),it={loadBoard:K,updateBoard:W,setCard:q},ut=Object(c.b)((function(e){return{board:e.trelloApp.board}}),it)(lt),dt=a(164),pt=a.n(dt),mt=function(e){Object(g.a)(a,e);var t=Object(v.a)(a);function a(){var e;Object(f.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={txt:""},e.handleChange=function(t){var a=t.target.value;e.setState({txt:a})},e.handleSaveBoard=function(){var t=JSON.parse(JSON.stringify(e.props.board)),a=e.props.card.id;t.phaseLists.filter((function(e){return e.cards.find((function(e){return e.id===a}))}))[0].cards.forEach((function(t){t.id===e.props.card.id&&(t.desc=e.state.txt)})),e.props.updateBoard(t)},e}return Object(b.a)(a,[{key:"componentDidMount",value:function(){this.setState({txt:this.props.card.desc})}},{key:"render",value:function(){return r.a.createElement("section",null,r.a.createElement("div",{className:"desc-header-container flex"},r.a.createElement(pt.a,{className:"icon"}),r.a.createElement("span",{className:"desc-header"},"Description")),r.a.createElement("textarea",{className:"card-desc-input",placeholder:"Add a more detailed description...",onChange:this.handleChange,spellCheck:"false",onBlur:this.handleSaveBoard,value:this.state.txt}))}}]),a}(n.Component),ht={loadBoard:K,updateBoard:W},ft=Object(c.b)((function(e){return{board:e.trelloApp.board}}),ht)(mt),bt=a(419);function gt(e){var t=e.idx,a=e.todo,n=e.onDelete,o=e.handleChange,s=e.handleSaveBoard,c=e.handleKeyPress;return r.a.createElement("div",{className:"checklist-item flex align-center",key:t},r.a.createElement("input",{className:"checkbox",type:"checkbox",name:"isDone",onChange:function(e){o(e,t)},onBlur:s,checked:a.isDone}),r.a.createElement("input",{className:"checklist-item-txt grow",type:"text",name:"txt",onChange:function(e){return o(e,t)},spellCheck:"false",placeholder:"Add a todo...",onBlur:s,value:a.txt,onKeyDown:c}),r.a.createElement("button",{onClick:function(){n(t)}},r.a.createElement(he.a,{className:"icon"})))}var vt=function(e){Object(g.a)(a,e);var t=Object(v.a)(a);function a(){var e;Object(f.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={checkList:null,todoText:"",onAdd:!1,progress:0,checklistTitle:""},e.progressBarUpdate=function(){var t=e.state.checkList.reduce((function(e,t){return t.isDone&&e++,e}),0);e.setState({progress:Math.floor(t/e.state.checkList.length*100)})},e.addTodo=function(){if(e.state.todoText){var t={txt:e.state.todoText,isDone:!1},a=e.state.checkList.slice();a.push(t),e.setState({checkList:a,todoText:""},(function(){e.handleSaveBoard()}))}},e.handleSaveBoard=function(){var t=JSON.parse(JSON.stringify(e.props.board)),a=e.props.card.id,n=t.phaseLists.find((function(e){return e.cards.some((function(e){return e.id===a}))})),r=n.cards.map((function(t){return t.id===e.props.card.id&&(t.checkList=e.state.checkList,t.checklistTitle=e.state.checklistTitle),t})),o=t.phaseLists.findIndex((function(e){return e.id===n.id}));n.cards=r,t.phaseLists[o]=n,_.addActivity(t,e.props.user,B,L.CARD,{id:e.props.card.id,title:e.props.card.title},"update checklist on card"),e.props.updateBoard(t).then((function(){e.progressBarUpdate()}))},e.toggleAdd=function(){e.state.todoText&&e.addTodo(),e.setState((function(e){return{onAdd:!e.onAdd}}))},e.onDelete=function(t){var a=e.state.checkList.slice();a.splice(t,1);var n=1===e.state.checkList.length?"":e.state.checklistTitle;e.setState({checkList:a,checklistTitle:n},(function(){e.handleSaveBoard()}))},e.handleChange=function(t){var a=t.target,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,r=a.name,o="isDone"===r?a.checked:a.value,s=e.state.checkList.slice();"isDone"===r?(s[n].isDone=o,e.setState({checkList:s},(function(){e.handleSaveBoard()}))):-1===n?e.state.onAdd?e.setState({todoText:o}):e.setState({checklistTitle:o}):s[n].txt=o,e.setState({checkList:s})},e.handleFocus=function(e){return e.target.select()},e}return Object(b.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props.card.checklistTitle?this.props.card.checklistTitle:"My Checklist";this.setState({checkList:this.props.card.checkList,onAdd:!1,checklistTitle:t},(function(){return e.progressBarUpdate()}))}},{key:"handleKeyPress",value:function(e){13===e.keyCode&&e.target.blur()}},{key:"render",value:function(){var e=this,t=this.state,a=t.todoText,n=t.onAdd,o=t.checklistTitle,s=t.progress,c=t.checkList;if(!c||!c.length)return null;var l=100===this.state.progress?"#61bd4f":"#2196f3";return r.a.createElement("div",{className:"card-check-list"},r.a.createElement("div",{className:"checklist-title-container flex align-center"},r.a.createElement(bt.a,{className:"checklist-icon"}),r.a.createElement("input",{className:"checklist-title",type:"text",name:"txt",placeholder:"Checklist name...",onChange:this.handleChange,onKeyDown:this.handleKeyPress,spellCheck:"false",onFocus:this.handleFocus,onBlur:this.handleSaveBoard,value:o})),c&&c.length>0&&r.a.createElement("div",{className:"progress-bar-container"},r.a.createElement("div",{className:"progress-bar",style:{width:"".concat(s,"%"),backgroundColor:l}})),c&&c.length>0&&this.state.checkList.map((function(t,a){return r.a.createElement(gt,{todo:t,key:a,onDelete:e.onDelete,handleChange:e.handleChange,handleSaveBoard:e.handleSaveBoard,idx:a,handleKeyPress:e.handleKeyPress})})),!n&&r.a.createElement("button",{className:"add-btn",onClick:this.toggleAdd},"Add Todo"),n&&r.a.createElement("div",{className:"add-item flex align-center"},r.a.createElement("input",{type:"text",onChange:this.handleChange,onKeyDown:this.handleKeyPress,autoFocus:!0,onBlur:this.toggleAdd,value:a}),r.a.createElement("button",{className:"save-checklist-item-btn"},"Save")))}}]),a}(n.Component),Et={loadBoard:K,updateBoard:W},wt=Object(c.b)((function(e){return{board:e.trelloApp.board,user:e.trelloUser.user}}),Et)(vt),yt=a(420),Ct=a(421),Nt=a(422);function kt(){return(kt=Object(h.a)(m.a.mark((function e(t){var a,n,r,o;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.target,"marmelada",n="https://api.cloudinary.com/v1_1/".concat("marmelada","/image/upload"),(r=new FormData).append("file",a.files[0]),r.append("upload_preset","balulu"),e.prev=6,e.next=9,y.a.post(n,r);case 9:return o=e.sent,e.abrupt("return",o.data.url);case 13:throw e.prev=13,e.t0=e.catch(6),console.error(e.t0),e.t0;case 17:case"end":return e.stop()}}),e,null,[[6,13]])})))).apply(this,arguments)}function St(){return(St=Object(h.a)(m.a.mark((function e(t){var a,n,r,o;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.target,"marmelada",n="https://api.cloudinary.com/v1_1/".concat("marmelada","/raw/upload"),(r=new FormData).append("file",a.files[0]),r.append("upload_preset","balulu"),e.prev=6,e.next=9,y.a.post(n,r);case 9:return o=e.sent,e.abrupt("return",o.data.url);case 13:throw e.prev=13,e.t0=e.catch(6),console.error(e.t0),e.t0;case 17:case"end":return e.stop()}}),e,null,[[6,13]])})))).apply(this,arguments)}var xt={uploadImg:function(e){return kt.apply(this,arguments)},uploadRawAttachment:function(e){return St.apply(this,arguments)}},Ot=a(165),jt=a.n(Ot),Bt=function(e){var t=e.isImgLoading,a=e.imgUrl,n=e.title,o=e.removeImgUrl,s=e.loadingMsg,c=s||"Loading your image..";return r.a.createElement(r.a.Fragment,null,t&&r.a.createElement("div",{className:"loading-field flex column align-center"},r.a.createElement(jt.a,{secondaryColor:"#2196f3d9",type:"Circles",color:"#2196F3",className:"loader",height:60,width:60}),r.a.createElement("p",null,c)),a&&r.a.createElement(r.a.Fragment,null,r.a.createElement("img",{className:"card-img",src:a,alt:n}),r.a.createElement("button",{className:"remove-btn flex align-center",title:"Remove cover image",onClick:o},r.a.createElement(me.a,{className:"icon"}))))},Lt=function(e){Object(g.a)(a,e);var t=Object(v.a)(a);function a(){var e;Object(f.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={card:null,isLabelEditShown:!1,isMembersEditShown:!1,cardActivities:[],isDueDateEditShown:!1,isImgLoading:!1,loadingMsg:null},e.getUpdatedLabels=function(){if(!e.props.board.labels.length)return[];var t=e.state.card.labels,a=_.getBoardCopy(e.props.board);return t.reduce((function(e,t){var n=a.labels.find((function(e){return e.id===t.id}));return n&&e.push(n),e}),[])},e.hideCard=function(t){var a=e.state,n=a.isLabelEditShown,r=a.isMembersEditShown,o=a.isDueDateEditShown;"Escape"!==t.code||n||r||o||e.props.setCard(null)},e.toggleProperty=function(t){e.setState((function(e){return Object(d.a)({},t,!e[t])}))},e.getActivities=function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=e.props.board.activities.filter((function(e){return e.object.id===t}));return n.length>10?n.slice(0,a):n},e.addCheckList=function(){var t=JSON.parse(JSON.stringify(e.state.card));t.checkList.length||(t.checkList.push({txt:"",isDone:!1}),e.setState({card:t}))},e.getPhaseIdxByCardId=function(t){return e.props.board.phaseLists.findIndex((function(e){return e.cards.some((function(e){return e.id===t}))}))},e.removeMemberFromCard=function(t){var a=_.getBoardCopy(e.props.board),n=e.props.card.id,r=e.getPhaseIdxByCardId(n),o=a.phaseLists[r].cards.findIndex((function(e){return e.id===n})),s=a.phaseLists[r].cards[o];s.assignedTo=s.assignedTo.filter((function(e){return e._id!==t._id})),a.phaseLists[r].cards[o]=s,e.props.updateBoard(a)},e.changeDueDate=function(t){var a=_.getBoardCopy(e.props.board),n=e.props.card.id,r=e.getPhaseIdxByCardId(n),o=a.phaseLists[r].cards.findIndex((function(e){return e.id===n}));a.phaseLists[r].cards[o].dueDate=t,e.props.updateBoard(a)},e.removeImgUrl=function(){var t=_.getBoardCopy(e.props.board),a=e.props.card.id,n=e.getPhaseIdxByCardId(a),r=t.phaseLists[n].cards.findIndex((function(e){return e.id===a}));t.phaseLists[n].cards[r].imgUrl=null,e.props.updateBoard(t)},e.onUploadImg=function(){var t=Object(h.a)(m.a.mark((function t(a){var n,r,o,s,c;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({isImgLoading:!0}),t.next=3,xt.uploadImg(a);case 3:n=t.sent,r=_.getBoardCopy(e.props.board),o=e.props.card.id,s=e.getPhaseIdxByCardId(o),c=r.phaseLists[s].cards.findIndex((function(e){return e.id===o})),r.phaseLists[s].cards[c].imgUrl=n,e.props.updateBoard(r),e.setState({isImgLoading:!1});case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.removeCard=function(){var t=_.getBoardCopy(e.props.board),a=e.props.card.id,n=e.getPhaseIdxByCardId(a),r=t.phaseLists[n].cards.findIndex((function(e){return e.id===a}));t.phaseLists[n].cards.splice(r,1),e.props.setCard(null),e.props.updateBoard(t)},e}return Object(b.a)(a,[{key:"componentDidMount",value:function(){var e,t=this;window.addEventListener("keydown",this.hideCard),this.props.board.phaseLists.forEach((function(a){var n=a.cards.find((function(e){return e.id===t.props.cardId}));n&&(e=n)}));var a=this.getActivities(e.id);this.setState({card:e,cardActivities:a})}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.hideCard)}},{key:"componentDidUpdate",value:function(e){var t=this;if(JSON.stringify(e.board)!==JSON.stringify(this.props.board)){var a;this.props.board.phaseLists.forEach((function(e){var n=e.cards.find((function(e){return e.id===t.props.cardId}));n&&(a=n)}));var n=this.getActivities(a.id);this.setState({card:a,cardActivities:n})}}},{key:"render",value:function(){var e=this;if(!this.props.board||!this.state.card)return"Loading";var t=this.state,a=t.card,n=t.isLabelEditShown,o=t.isMembersEditShown,s=t.cardActivities,c=t.isDueDateEditShown,l=t.isImgLoading,i=a.assignedTo,u=a.dueDate,d=a.imgUrl,p=a.title,m=this.toggleProperty,h=this.changeDueDate,f=this.removeImgUrl,b=this.getUpdatedLabels();return r.a.createElement("section",null,r.a.createElement("div",{onClick:function(){e.props.setCard(null)},className:"card-modal"},r.a.createElement("div",{onClick:function(e){return e.stopPropagation()},className:"card-container"},r.a.createElement("div",{className:"card-img-container flex justify-center"},r.a.createElement(Bt,{isImgLoading:l,loadingMsg:this.state.loadingMsg,imgUrl:d,title:p,removeImgUrl:f})),r.a.createElement(ut,{card:a}),r.a.createElement("div",{className:"card-content flex"},r.a.createElement("div",{className:"card-details flex column grow"},i.length>0&&r.a.createElement("div",{className:"card-details-members"},r.a.createElement("h3",null,"Members"),r.a.createElement("div",{className:"flex align-center"},i.map((function(t){return r.a.createElement("span",{key:t._id,onClick:function(){e.removeMemberFromCard(t)}},r.a.createElement(ue,{member:t}))})))),b.length>0&&r.a.createElement("div",{className:"card-details-labels"},r.a.createElement("h3",null,"Labels"),r.a.createElement("div",{className:"labels-gallery flex wrap align-center"},b.map((function(e){return r.a.createElement("span",{title:e.txt,className:"label",onClick:function(){m("isLabelEditShown")},style:{backgroundColor:e.color},key:e.id}," ",r.a.createElement("span",{className:"label-txt"},e.txt))})))),u&&r.a.createElement("div",{className:"card-details-date"},r.a.createElement("h3",null,"Due Date"),r.a.createElement("div",{onClick:function(){m("isDueDateEditShown")},className:"date flex align-center"},r.a.createElement("span",{className:"date-str"},"".concat(ce()(u).format("MMM Do"),"\n                                     at ").concat(ce()(u).format("HH:mm"))))),r.a.createElement(ft,{card:a}),a.checkList.length>0&&r.a.createElement(wt,{card:a}),r.a.createElement(He,{card:a,showCommentBox:!0,activities:s})),r.a.createElement("div",{className:"card-sidebar"},r.a.createElement("button",{onClick:function(){m("isMembersEditShown")},className:"card-sidebar-btn"},r.a.createElement("span",null,r.a.createElement(yt.a,{className:"icon"})),"Members"),o&&r.a.createElement(ke,{members:this.props.board.members,card:a,toggleProperty:m}),r.a.createElement("button",{onClick:function(){m("isLabelEditShown")},className:"card-sidebar-btn"},r.a.createElement("span",null,r.a.createElement(de.a,{className:"icon"})),"Labels"),n&&r.a.createElement(we,{card:a,toggleProperty:m}),a.checkList.length<1&&r.a.createElement("button",{className:"card-sidebar-btn",onClick:this.addCheckList},r.a.createElement("span",null,r.a.createElement(bt.a,{className:"icon"})),"Checklist"),r.a.createElement("button",{onClick:function(){m("isDueDateEditShown")},className:"card-sidebar-btn"},r.a.createElement("span",null,r.a.createElement(Ct.a,{className:"icon"})),"Due Date"),c&&r.a.createElement(xe,{changeDueDate:h,toggleProperty:m}),!d&&r.a.createElement(r.a.Fragment,null,r.a.createElement("label",{htmlFor:"imgUrl",className:"card-sidebar-btn pointer"},r.a.createElement("span",null,r.a.createElement(Nt.a,{className:"icon"})),"Cover"),r.a.createElement("input",{className:"display-none",type:"file",id:"imgUrl",onChange:this.onUploadImg})),r.a.createElement("button",{onClick:this.removeCard,className:"card-sidebar-btn"},r.a.createElement("span",null,r.a.createElement(me.a,{className:"icon"})),"Delete"))))))}}]),a}(n.Component),Dt={loadBoard:K,updateBoard:W,setCard:q},At=Object(c.b)((function(e){return{board:e.trelloApp.board,card:e.trelloApp.card,user:e.trelloUser.user}}),Dt)(Lt),It=a(166),Mt=a.n(It);function Pt(e){return r.a.createElement("form",{className:"search-input-container flex"},r.a.createElement("input",{className:"board-filter-input",placeholder:"Filter by user...",type:"text",list:"users",name:"user",onChange:function(t){return e.onInputChanged(t.target.value)}}),r.a.createElement(Mt.a,{className:"search-icon"}))}var Tt=function(e){Object(g.a)(a,e);var t=Object(v.a)(a);function a(){var e;Object(f.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={boardMenus:{currentOpend:null,menusState:{mainMenu:!1,backgroundMenu:!1,colorMenu:!1,photoMenu:!1}},filteredByUser:null,boardName:"",isTitleOnEdit:!1},e.openSocket=function(){J.setup();var t=e.props.match.params.id;J.emit("open board socket",t),J.on("board updated",(function(){e.getBoardById()}))},e.getBoardById=Object(h.a)(m.a.mark((function t(){var a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.props.match.params.id,t.next=3,e.props.loadBoard(a);case 3:e.setState({boardName:e.props.board.name});case 4:case"end":return t.stop()}}),t)}))),e.toggleMenu=function(t){var a=e.state.boardMenus,n=JSON.parse(JSON.stringify(a));t?(null!=n.currentOpend&&(n.menusState[n.currentOpend]=!n.menusState[n.currentOpend]),n.menusState[t]=!n.menusState[t],n.currentOpend=t):(n.menusState[n.currentOpend]=!1,n.currentOpend=null),e.setState({boardMenus:n},(function(){e.state.boardMenus.currentOpend?window.addEventListener("keydown",e.handleKeyDown):window.removeEventListener("keydown",e.handleKeyDown)}))},e.handleNameChange=function(t){var a=t.target.value;e.setState({boardName:a})},e.handleChangeBoardName=function(){var t=JSON.parse(JSON.stringify(e.props.board)),a=e.state.boardName;if(!e.state.boardName.trim())return e.toggleTitleEdit();_.addActivity(t,e.props.user,B,L.BOARD,{id:e.props.board._id,title:e.props.board.name},"the name of the board from ".concat(a," to ").concat(e.state.boardName)),t.name=e.state.boardName,e.props.updateBoard(t),e.toggleTitleEdit()},e.handleKeyDown=function(t){"Escape"===t.code&&e.toggleMenu(null)},e.onInputChanged=function(){var t=Object(h.a)(m.a.mark((function t(a){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.setState({filteredByUser:a});case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.toggleTitleEdit=function(){e.setState((function(e){return{isTitleOnEdit:!e.isTitleOnEdit}}))},e.AddUserToBoard=Object(h.a)(m.a.mark((function t(){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.queryUsers();case 2:e.toggleProperty("isMembersEditShown");case 3:case"end":return t.stop()}}),t)}))),e.toggleProperty=function(t){e.setState((function(e){return Object(d.a)({},t,!e[t])}))},e}return Object(b.a)(a,[{key:"componentDidMount",value:function(){this.getBoardById(),this.openSocket()}},{key:"componentWillUnmount",value:function(){J.off("open board socket"),J.terminate()}},{key:"handleKeyPress",value:function(e){13===e.keyCode&&e.target.blur()}},{key:"render",value:function(){var e=this,t=this.state,a=t.filteredByUser,n=t.isTitleOnEdit,o=this.props.board;if(!o||!this.state)return"";var s=this.state.boardMenus.menusState,c=s.mainMenu,l=s.backgroundMenu,i=s.colorMenu,u=s.photoMenu,d=o.bgColor?{backgroundColor:o.bgColor}:{backgroundImage:'url("'.concat(o.imgUrl,'")'),backgroundSize:"cover"};return o?r.a.createElement("main",{style:d,className:"board flex column grow"},r.a.createElement("section",{className:"board-nav flex space-between align-center"},r.a.createElement("div",{className:"board-nav-controls flex align-center wrap"},!n&&r.a.createElement("h4",{onClick:this.toggleTitleEdit,className:"board-title"},o.name),n&&r.a.createElement("input",{className:"board-title grow",type:"text",name:"txt",onChange:function(t){return e.handleNameChange(t)},spellCheck:"false",autoFocus:!0,onBlur:this.handleChangeBoardName,value:this.state.boardName,onKeyDown:this.handleKeyPress}),r.a.createElement("span",{className:"board-nav-divider"}),r.a.createElement("div",{className:"board-members flex align-center"},o.members&&o.members.map((function(e){return r.a.createElement(ue,{key:e._id,member:e})}))),r.a.createElement(Pt,{users:o.members,onInputChanged:this.onInputChanged}),r.a.createElement(rt.a,{to:"/board/".concat(o._id,"/dashboard")},r.a.createElement("div",{className:"nav-btn  flex align-center"},r.a.createElement(at.a,{className:"nav-icon"}),r.a.createElement("span",{className:"btn-text"},"Statistics")))),r.a.createElement("div",{className:"nav-btn flex align-center",onClick:function(){return e.toggleMenu("mainMenu")}},r.a.createElement(nt.a,null)),r.a.createElement(Ve,{isMenuShown:c,board:o,onToggleMenu:this.toggleMenu}),r.a.createElement(ot,{isMenuShown:l,board:o,onToggleMenu:this.toggleMenu}),r.a.createElement(Qe,{isMenuShown:i,board:o,onToggleMenu:this.toggleMenu}),r.a.createElement(tt,{isMenuShown:u,board:o,onToggleMenu:this.toggleMenu})),r.a.createElement("section",{className:"board-content flex grow"},r.a.createElement(_e,{filteredByUser:a})),this.props.card&&r.a.createElement(At,{cardId:this.props.card.id})):"loading"}}]),a}(n.Component),Ut={loadBoard:K,updateBoard:W},_t=Object(c.b)((function(e){return{board:e.trelloApp.board,card:e.trelloApp.card,user:e.trelloUser.user}}),Ut)(Tt),Ft=function(e){Object(g.a)(a,e);var t=Object(v.a)(a);function a(){return Object(f.a)(this,a),t.apply(this,arguments)}return Object(b.a)(a,[{key:"render",value:function(){return r.a.createElement("main",{className:"home-container flex"},r.a.createElement("div",{className:"text-area flex column align-start"},r.a.createElement("h1",null,"Don't Waste Papers"),r.a.createElement("h3",null,r.a.createElement("span",{className:"logo"},"Flowz"),"the project managment software that keep teams going and Collaborate"),r.a.createElement(rt.a,{to:"/board/5ecbc8edcb39d7f5494f8d40"}," ",r.a.createElement("span",{className:"btn-home"},"Get Started"))))}}]),a}(n.Component),Rt=Object(c.b)((function(e){return{}}),{})(Ft);function Jt(){return(Jt=Object(h.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C("user");case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Kt(){return(Kt=Object(h.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C("user/".concat(t));case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Wt(){return(Wt=Object(h.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C("user/".concat(t));case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function qt(){return(qt=Object(h.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N("auth/login",t);case 2:return a=e.sent,e.abrupt("return",zt(a));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function zt(e){return sessionStorage.setItem("user",JSON.stringify(e)),e}function Ht(){return(Ht=Object(h.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N("auth/logout");case 2:sessionStorage.clear();case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Vt(){return(Vt=Object(h.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N("auth/signup",t);case 2:return a=e.sent,e.abrupt("return",zt(a));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Gt(){return(Gt=Object(h.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k("user",t);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Yt(){return(Yt=Object(h.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S("user/".concat(t));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Zt={query:function(){return Jt.apply(this,arguments)},getById:function(e){return Kt.apply(this,arguments)},remove:function(e){return Yt.apply(this,arguments)},signup:function(e){return Vt.apply(this,arguments)},update:function(e){return Gt.apply(this,arguments)},makeId:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,t="",a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=0;n<e;n++)t+=a.charAt(Math.floor(Math.random()*a.length));return t},getUserCopy:function(e){return JSON.parse(JSON.stringify(e))},getByEmail:function(e){return Wt.apply(this,arguments)},login:function(e){return qt.apply(this,arguments)},logout:function(){return Ht.apply(this,arguments)}};function Qt(e){return function(){var t=Object(h.a)(m.a.mark((function t(a){var n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Zt.login(e);case 2:n=t.sent,a(Xt(n));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}function Xt(e){return{type:"SET_USER",user:e}}function $t(e){return{type:"ADD_USER",user:e}}var ea=a(409),ta=a(429),aa=function(e){Object(g.a)(a,e);var t=Object(v.a)(a);function a(){var e;Object(f.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={loginCred:{email:"",password:""},msg:""},e.loginHandleChange=function(t){var a=t.target,n=a.name,r=a.value;e.setState((function(e){return{loginCred:Object(E.a)(Object(E.a)({},e.loginCred),{},Object(d.a)({},n,r))}}))},e.doLogin=function(){var t=Object(h.a)(m.a.mark((function t(a){var n,r,o,s;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),n=e.state.loginCred,r=n.email,o=n.password,r&&o){s={email:r,password:o};try{e.props.login(s)}catch(c){console.log(c)}e.setState({loginCred:{email:"",password:""},msg:""},(function(){e.props.history.push("/boards")}))}else e.setState({msg:"Please enter correct user/password"});case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(b.a)(a,[{key:"render",value:function(){return r.a.createElement("main",{className:"sign-in"},r.a.createElement("p",null,this.state.msg),r.a.createElement("form",{className:"sign-in-form",onSubmit:this.doLogin,noValidate:!0},r.a.createElement(ta.a,{onChange:this.loginHandleChange,className:"signin-email",variant:"outlined",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email"}),r.a.createElement(ta.a,{onChange:this.loginHandleChange,className:"signin-password",variant:"outlined",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password"}),r.a.createElement(ea.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:"sign-in-submit-btn"},"Sign In")),r.a.createElement("a",{href:"/signUp",className:"sign-in-link"},"Dont have an account? Sign Up"))}}]),a}(n.Component),na={login:Qt},ra=Object(c.b)((function(e){return{user:e.trelloUser.userReducer}}),na)(aa),oa=function(e){Object(g.a)(a,e);var t=Object(v.a)(a);function a(){var e;Object(f.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={msg:"",signupCred:{email:"",password:"",fullName:""}},e.signupHandleChange=function(t){var a=t.target,n=a.name,r=a.value;e.setState((function(e){return{signupCred:Object(E.a)(Object(E.a)({},e.signupCred),{},Object(d.a)({},n,r))}}))},e.doSignup=function(){var t=Object(h.a)(m.a.mark((function t(a){var n,r,o,s,c;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),n=e.state.signupCred,r=n.email,o=n.password,s=n.fullName,r&&o&&s){t.next=4;break}return t.abrupt("return",e.setState({msg:"All inputs are required!"}));case 4:c={email:r,password:o,fullName:s},e.props.signup(c),e.setState({signupCred:{email:"",password:"",fullName:""}}),e.props.history.push("/login");case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(b.a)(a,[{key:"render",value:function(){return r.a.createElement("main",{className:"sign-up"},r.a.createElement("p",null,this.state.msg),r.a.createElement("form",{className:"sign-up-form",onSubmit:this.doSignup,noValidate:!0},r.a.createElement(ta.a,{onChange:this.signupHandleChange,className:"signup-full-name",autoComplete:"fname",name:"fullName",variant:"outlined",required:!0,fullWidth:!0,id:"fullName",label:"Full Name",autoFocus:!0}),r.a.createElement(ta.a,{onChange:this.signupHandleChange,className:"signup-email",variant:"outlined",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email"}),r.a.createElement(ta.a,{onChange:this.signupHandleChange,className:"signup-password",variant:"outlined",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password"}),r.a.createElement(ea.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:"sign-up-submit-btn"},"Sign Up")))}}]),a}(n.Component),sa={signup:function(e){return function(){var t=Object(h.a)(m.a.mark((function t(a){var n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Zt.signup(e);case 2:n=t.sent,a(Xt(null)),a($t(n));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}},ca=Object(c.b)((function(e){return{user:e.trelloUser.userReducer}}),sa)(oa),la=a(425),ia=a(426),ua=a(427),da=function(e){Object(g.a)(a,e);var t=Object(v.a)(a);function a(){var e;Object(f.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={isCreateBoardMenuShown:!1,newBoardName:"",newBoardColor:"#61acca"},e.handleChangeColor=function(){var t=Object(h.a)(m.a.mark((function t(a){var n,r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=a.target,r=n.value,t.next=4,e.setState({newBoardColor:r});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handleChange=function(t){var a=t.target.value;e.setState({newBoardName:a})},e.toggleAddBoard=function(){e.setState((function(e){return{isCreateBoardMenuShown:!e.isCreateBoardMenuShown}}))},e.createNewBoard=Object(h.a)(m.a.mark((function t(){var a,n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.state.newBoardName.trim()?e.state.newBoardName:"New Board",n=_.createNewBoard(a,e.state.newBoardColor,e.props.user),t.next=4,e.props.addBoard(n);case 4:u.push("/board/".concat(e.props.board._id)),e.setState({isCreateBoardMenuShown:!1,newBoardName:""});case 6:case"end":return t.stop()}}),t)}))),e}return Object(b.a)(a,[{key:"render",value:function(){var e=this.state,t=e.isCreateBoardMenuShown,a=e.newBoardName,n=e.newBoardColor,o=this.props.user;return this.state?r.a.createElement("header",{className:"main-header flex space-between"},r.a.createElement("nav",{className:"flex align-center"},r.a.createElement(rt.a,{to:"/"},r.a.createElement("div",{className:"btn-main-nav flex align-center"},r.a.createElement(la.a,{className:"btn-icon"}))),r.a.createElement(rt.a,{to:"/boards"},r.a.createElement("div",{className:"btn-main-nav flex align-center"},r.a.createElement(ia.a,{className:"btn-icon"}),r.a.createElement("span",{className:"btn-text"},"Boards")))),r.a.createElement("div",{className:"nav-center flex align-center justify-center"},r.a.createElement(rt.a,{to:"/"},r.a.createElement("div",{className:"logo flex align-center"},r.a.createElement(ua.a,{className:"btn-icon"}),r.a.createElement("span",{className:"logo-text"},"Flowz")))),r.a.createElement("nav",{className:"right-nav flex flex-end align-center"},r.a.createElement("div",{className:"btn-main-nav flex align-center",onClick:this.toggleAddBoard},r.a.createElement(G.a,{className:"btn-icon"})),t&&r.a.createElement("div",{className:"create-board-menu  flex column"},r.a.createElement("div",{className:"create-board-header flex align-center"},r.a.createElement("h5",{className:"grow"},"New Board"),r.a.createElement(V.a,{className:"close-create-board-menu",onClick:this.toggleAddBoard})),r.a.createElement("div",{className:"create-board-btns flex column"},r.a.createElement("div",{className:"color-container"},r.a.createElement("label",{className:"rgb(81, 152, 57)"===n?"color-preview green selected":"color-preview green"},r.a.createElement("input",{onClick:this.handleChangeColor,className:"color-preview-input",type:"radio",name:"green",value:"rgb(81, 152, 57)"})),r.a.createElement("label",{className:"#d29034"===n?"color-preview orange selected":"color-preview orange"},r.a.createElement("input",{onClick:this.handleChangeColor,className:"color-preview-input",type:"radio",name:"orange",value:"#d29034"})),r.a.createElement("label",{className:"rgb(0, 121, 191)"===n?"color-preview blue selected":"color-preview blue"},r.a.createElement("input",{onClick:this.handleChangeColor,className:"color-preview-input",type:"radio",name:"blue",value:"rgb(0, 121, 191)"})),r.a.createElement("label",{className:"rgb(176, 70, 50)"===n?"color-preview red selected":"color-preview red"},r.a.createElement("input",{onClick:this.handleChangeColor,className:"color-preview-input",type:"radio",name:"red",value:"rgb(176, 70, 50)"})),r.a.createElement("label",{className:"rgb(137, 96, 158)"===n?"color-preview purple selected":"color-preview purple"},r.a.createElement("input",{onClick:this.handleChangeColor,className:"color-preview-input",type:"radio",name:"purple",value:"rgb(137, 96, 158)"})),r.a.createElement("label",{className:"rgb(205, 90, 145)"===n?"color-preview pink selected":"color-preview pink"},r.a.createElement("input",{onClick:this.handleChangeColor,className:"color-preview-input",type:"radio",name:"pink",value:"rgb(205, 90, 145)"})),r.a.createElement("label",{className:"rgb(75, 191, 107)"===n?"color-preview light-green selected":"color-preview light-green"},r.a.createElement("input",{onClick:this.handleChangeColor,className:"color-preview-input",type:"radio",name:"light-green",value:"rgb(75, 191, 107)"})),r.a.createElement("label",{className:"rgb(73, 169, 215)"===n?"color-preview turquise selected":"color-preview turquise"},r.a.createElement("input",{onClick:this.handleChangeColor,className:"color-preview-input",type:"radio",name:"turquise",value:"rgb(73, 169, 215)"}))),r.a.createElement("input",{className:"board-name-input",type:"text",onChange:this.handleChange,placeholder:"Your Board's name...",value:a}),r.a.createElement("button",{className:"create-board-btn",onClick:this.createNewBoard},"Create a new Board"))),o&&"Guest"!==o.fullName&&r.a.createElement("div",{className:"logout-btn btn-main-nav flex align-center"},r.a.createElement("span",{className:"btn-text",onClick:this.props.logout},"Logout")),o&&r.a.createElement("span",{className:"logged-in flex align-center"},r.a.createElement(ue,{member:o})),o&&"Guest"===o.fullName&&r.a.createElement("div",{className:"login-btn btn-main-nav flex align-center"},r.a.createElement(rt.a,{to:"/login"}," ",r.a.createElement("span",{className:"btn-text"},"Login"))))):""}}]),a}(n.Component),pa={loadBoard:K,updateBoard:W,addBoard:function(e){return function(){var t=Object(h.a)(m.a.mark((function t(a){var n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_.add(e);case 2:n=t.sent,a({type:"ADD_BOARD",board:n});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},logout:function(e){return function(){var t=Object(h.a)(m.a.mark((function t(a){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Zt.logout(e);case 2:a(Xt(null));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},login:Qt},ma=Object(c.b)((function(e){return{board:e.trelloApp.board,user:e.trelloUser.user}}),pa)(da),ha=function(e){Object(g.a)(a,e);var t=Object(v.a)(a);function a(){var e;Object(f.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).handleLoadBoard=function(t){e.props.loadBoard(t),u.push("/board/".concat(t))},e}return Object(b.a)(a,[{key:"componentDidMount",value:function(){this.props.queryBoards()}},{key:"render",value:function(){var e=this,t=this.props.boards;return r.a.createElement("section",{className:"boards-page"},r.a.createElement("div",{className:"boards"},r.a.createElement("h1",{className:"boards-title flex"},"Boards"),r.a.createElement("div",{className:"boards-container"},!t&&r.a.createElement("p",null,"Your boards will appear here"),t&&t.map((function(t,a){return r.a.createElement("div",{className:"board-item board-item".concat(a),key:a,onClick:function(){return e.handleLoadBoard(t._id)},style:t.imgUrl?{backgroundImage:"url(".concat(t.imgUrl,")"),backgroundSize:"cover"}:{backgroundColor:t.bgColor}},r.a.createElement("h3",null,t.name))})))))}}]),a}(n.Component),fa={loadBoard:K,queryBoards:function(e){return function(t){_.query(e).then((function(e){return t({type:"QUERY_BOARDS",boards:e})}))}}},ba=Object(c.b)((function(e){return{board:e.trelloApp.board,boards:e.trelloApp.boards,user:e.trelloApp.user}}),fa)(ha),ga=a(36),va=a(75),Ea=a(168),wa=a.n(Ea),ya=["#273d5d","#C492B1","#00ca78","#a8eb12","#ee6352","#DA4167","#ffb5d7","#72709e","#F6AE2D","#C9E3AC","#9580b0","#b991bf","#dda2cc"],Ca=["#273d5dc2","#C492B1c2","#00ca78c2","#a8eb12c2","#ee6352c2","#DA4167c2","#ffb5d7c2","#72709ec2","#F6AE2Dc2","#C9E3ACc2","#9580b0c2","#b991bfc2","#dda2ccc2"],Na=function(e){Object(g.a)(a,e);var t=Object(v.a)(a);function a(){var e;Object(f.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).getBoardById=Object(h.a)(m.a.mark((function t(){var a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.props.match.params.id,t.next=3,e.props.loadBoard(a);case 3:case"end":return t.stop()}}),t)}))),e.getSprintProgress=function(){var t=e.props.board,a={};return t.phaseLists.forEach((function(e){e.cards.forEach((function(e){e.checkList.forEach((function(e){e.isDone?a.Completed?a.Completed+=1:a.Completed=1:a["In Progress"]?a["In Progress"]+=1:a["In Progress"]=1}))}))})),{labels:Object(ga.a)(Object.keys(a)),datasets:[{label:"Sprint Progress",data:Object(ga.a)(Object.values(a)),backgroundColor:ya,hoverBackgroundColor:Ca}]}},e.getTaskPerPhaseDistribution=function(){var t=e.props.board,a={};return t.phaseLists.forEach((function(e){e.cards.forEach((function(t){a[e.name]?a[e.name]+=1:a[e.name]=1}))})),{labels:Object(ga.a)(Object.keys(a)),datasets:[{label:"Tasks Per Phase Distribution",data:Object(ga.a)(Object.values(a)),backgroundColor:ya,hoverBackgroundColor:Ca}]}},e.getTaskByLables=function(){var t=e.props.board,a={};return t.phaseLists.forEach((function(e){e.cards.forEach((function(e){e.labels.forEach((function(e){a[e.txt]?a[e.txt]+=1:a[e.txt]=1}))}))})),{labels:Object(ga.a)(Object.keys(a)),datasets:[{label:"Tasks by Label",data:Object(ga.a)(Object.values(a)),backgroundColor:ya,hoverBackgroundColor:Ca}]}},e.goBack=function(){u.push("/board/".concat(e.props.match.params.id))},e}return Object(b.a)(a,[{key:"componentDidMount",value:function(){this.getBoardById()}},{key:"getTasksPerDevloperData",value:function(){var e=this.props.board,t={};return e.phaseLists.forEach((function(e){e.cards.forEach((function(e){e.assignedTo.forEach((function(e){t[e.fullName]?t[e.fullName]+=1:t[e.fullName]=1}))}))})),{labels:Object(ga.a)(Object.keys(t)),datasets:[{label:"Tasks Per Developer",data:Object(ga.a)(Object.values(t)),backgroundColor:ya,hoverBackgroundColor:Ca}]}}},{key:"render",value:function(){if(!this.props.board)return"loading";var e=this.getTasksPerDevloperData(),t=this.getTaskPerPhaseDistribution(),a=this.getTaskByLables(),n=this.getSprintProgress();return r.a.createElement("div",{className:"dashboard grow"},r.a.createElement("div",{className:"btn-back flex space-between align-center",onClick:this.goBack},r.a.createElement(wa.a,null),r.a.createElement("span",null,"Back")),r.a.createElement("section",{className:"chart-cont flex column justify-center align-center"},r.a.createElement("article",{className:"chart sprint-progress flex justify-center column align-center"},r.a.createElement("h2",null,"Sprint Progress"),r.a.createElement(va.c,{className:"chart-stats",data:n,options:{scales:{yAxes:[{ticks:{beginAtZero:!0}}]}}})),r.a.createElement("article",{className:"chart tasks-per-devloper flex column justify-center align-center"},r.a.createElement("h2",null,"Tasks Per Developer"),r.a.createElement(va.a,{className:"chart-stats",data:e,options:{scales:{yAxes:[{ticks:{beginAtZero:!0}}]}}})),r.a.createElement("article",{className:"chart tasks-per-phase flex column justify-center align-center"},r.a.createElement("h2",null,"Tasks Per Phase"),r.a.createElement(va.b,{className:"chart-stats",data:t,options:{scales:{yAxes:[{ticks:{beginAtZero:!0}}]}}})),r.a.createElement("article",{className:"chart tasks-by-lables flex column justify-center align-center"},r.a.createElement("h2",null,"Tasks By Label"),r.a.createElement(va.a,{className:"chart-stats",data:a,options:{scales:{yAxes:[{ticks:{beginAtZero:!0}}]}}}))))}}]),a}(n.Component),ka={loadBoard:K},Sa=Object(c.b)((function(e){return{board:e.trelloApp.board}}),ka)(Na);function xa(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(l.b,{history:u},r.a.createElement(ma,null),r.a.createElement(l.c,null,r.a.createElement(l.a,{path:"/",component:Rt,exact:!0}),r.a.createElement(l.a,{path:"/board/:id",component:_t,exact:!0}),r.a.createElement(l.a,{path:"/login",component:ra,exact:!0}),r.a.createElement(l.a,{path:"/signup",component:ca,exact:!0}),r.a.createElement(l.a,{path:"/board/:boardId/card/:cardId",component:At,exact:!0}),r.a.createElement(l.a,{path:"/board/:id/dashboard",component:Sa}),r.a.createElement(l.a,{path:"/boards",component:ba,exact:!0}))))}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Oa=a(29),ja=a(169),Ba={boards:[],board:null,card:null};var La=null,Da={users:[],user:La=sessionStorage.user?JSON.parse(sessionStorage.user):{_id:"5eccd4e1cb39d7f54947fd7e",fullName:"Guest",email:"noemail@no.com",img:"https://img.icons8.com/plasticine/2x/user.png"}};var Aa=Object(Oa.c)({trelloApp:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ba,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"QUERY_BOARDS":return Object(E.a)(Object(E.a)({},e),{},{boards:t.boards});case"LOAD_BOARD":return Object(E.a)(Object(E.a)({},e),{},{board:Object(E.a)({},t.board)});case"ADD_BOARD":return Object(E.a)(Object(E.a)({},e),{},{board:t.board});case"UPDATE_BOARD":return J.emit("board updated",t.board._id),Object(E.a)(Object(E.a)({},e),{},{board:Object(E.a)({},t.board)});case"REMOVE_BOARD":return Object(E.a)(Object(E.a)({},e),{},{boards:e.boards.filter((function(e){return e._id!==t.boardId}))});case"SET_CARD":return Object(E.a)(Object(E.a)({},e),{},{card:t.card});default:return e}},trelloUser:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Da,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USER":var a=t.user?t.user:La;return Object(E.a)(Object(E.a)({},e),{},{user:a});case"USER_REMOVE":return Object(E.a)(Object(E.a)({},e),{},{users:e.users.filter((function(e){return e._id!==t.userId}))});case"SET_USERS":return Object(E.a)(Object(E.a)({},e),{},{users:t.users});case"ADD_USER":return Object(E.a)(Object(E.a)({},e),{},{users:[].concat(Object(ga.a)(e.users),[t.user])});case"QUERY_USERS":return Object(E.a)(Object(E.a)({},e),{},{users:t.users});default:return e}}}),Ia=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||Oa.d,Ma=Object(Oa.e)(Aa,Ia(Object(Oa.a)(ja.a))),Pa=a(170),Ta=a(24);s.a.render(r.a.createElement(c.a,{store:Ma},r.a.createElement(Ta.a,{utils:Pa.a},r.a.createElement(xa,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[185,1,2]]]);
//# sourceMappingURL=main.9272d9ed.chunk.js.map