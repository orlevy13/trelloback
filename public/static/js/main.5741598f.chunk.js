(this.webpackJsonpflowz=this.webpackJsonpflowz||[]).push([[0],{165:function(e,t,a){"use strict";(function(e){a.d(t,"a",(function(){return l}));var n=a(166),r=a.n(n),o=a(167),c=a.n(o);e.fetch=r.a;var s=new c.a({accessKey:"8ZH8zzN8CDDrZJWGYhpPmzEreLvOZ6WRPVTgnEH_6Ac"});var l={getListPhotos:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:14,t=i(1,5);return s.photos.listPhotos(t,e,"popular").then((function(e){return e.json()}))}};function i(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e))+e}}).call(this,a(60))},198:function(e,t,a){e.exports=a(383)},207:function(e,t,a){},253:function(e,t){},270:function(e,t,a){e.exports=a.p+"static/media/collage.48948499.jpg"},271:function(e,t,a){e.exports=a.p+"static/media/colors.864f4df1.jpg"},383:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(20),c=a.n(o),s=a(12),l=(a(207),a(17)),i=a(32),d=Object(i.a)(),u=a(6),m=a.n(u),p=a(16),h=a(7),f=a(8),b=a(10),g=a(9),v=a(15),E=a(90),w=a.n(E),y=function(e,t){return S(e,"GET",t)},C=function(e,t){return S(e,"POST",t)},N=function(e,t){return S(e,"PUT",t)},k=function(e,t){return S(e,"DELETE",t)};function S(e){return x.apply(this,arguments)}function x(){return(x=Object(p.a)(m.a.mark((function e(t){var a,n,r,o=arguments;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>1&&void 0!==o[1]?o[1]:"get",n=o.length>2&&void 0!==o[2]?o[2]:null,e.prev=2,e.next=5,w()({url:"".concat("/api/").concat(t),method:a,data:n});case 5:return r=e.sent,e.abrupt("return",r.data);case 9:throw e.prev=9,e.t0=e.catch(2),console.dir(e.t0),e.t0.response&&401===e.t0.response.status&&d.push("/"),e.t0;case 14:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}var O="Add",j="Updated",L="Card",B="Board";function D(){return(D=Object(p.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"",e.next=3,y("board/".concat(""));case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A(){return(A=Object(p.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y("board/".concat(t));case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(){return(I=Object(p.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C("board",t);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function M(){return(M=Object(p.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N("board",t);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(){return(P=Object(p.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k("board/".concat(t));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,t="",a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=0;n<e;n++)t+=a.charAt(Math.floor(Math.random()*a.length));return t}var U,_={query:function(e){return D.apply(this,arguments)},getById:function(e){return A.apply(this,arguments)},remove:function(e){return P.apply(this,arguments)},add:function(e){return I.apply(this,arguments)},update:function(e){return M.apply(this,arguments)},makeId:T,getBoardCopy:function(e){return JSON.parse(JSON.stringify(e))},getNewCard:function(e){return Object(v.a)(Object(v.a)({},e),{},{id:T(),bgColor:"",desc:"",dueDate:null,createdAt:Date.now(),labels:[],checkList:[],assignedTo:[],attachments:[]})},getNewPhase:function(e){return{id:T(),name:e,desc:"",cards:[]}},getSortedPhase:function(e,t){return"title"===e?t.cards.sort((function(e,t){return e.title.localeCompare(t.title)})):"firstCreated"===e?t.cards.sort((function(e,t){return e.createdAt-t.createdAt})):t.cards.sort((function(e,t){return t.createdAt-e.createdAt}))},addActivity:function(e,t,a,n,r){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,c={at:Date.now(),operation:a,user:t,type:n,object:r,desc:o};e.activities.unshift(c)},createNewBoard:function(e,t,a){return{name:e,bgColor:t,createdAt:Date.now(),creator:a,members:[a],desc:null,activities:[],phaseLists:[],labels:[],isLabelTxtShown:!1,imgUrl:null}},getNewLabel:function(e){return{txt:e.txt,color:e.color,id:T()}}},F=a(164),R=a.n(F),J={setup:function(){U=R()("/")},terminate:function(){U=null},on:function(e,t){U.on(e,t)},off:function(e,t){U.off(e,t)},emit:function(e,t){U.emit(e,t)}};var W={_id:"5eccd4e1cb39d7f54947fd7e",fullName:"Guest",email:"noemail@no.com",password:"123456",img:"https://img.icons8.com/plasticine/2x/user.png"};function K(e){return function(){var t=Object(p.a)(m.a.mark((function t(a){var n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_.getById(e);case 2:n=t.sent,a({type:"LOAD_BOARD",board:n});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}function q(e){return function(){var t=Object(p.a)(m.a.mark((function t(a,n){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:"UPDATE_BOARD",board:e}),t.prev=1,t.next=4,_.update(e);case 4:t.next=8;break;case 6:t.prev=6,t.t0=t.catch(1);case 8:J.emit("board updated",e._id);case 9:case"end":return t.stop()}}),t,null,[[1,6]])})));return function(e,a){return t.apply(this,arguments)}}()}function z(e){return function(t){t({type:"SET_CARD",card:e})}}var V=a(58),G=a(433),H=a(415),Y=a(422),Z=function(e){Object(b.a)(a,e);var t=Object(g.a)(a);function a(){var e;Object(h.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={card:{title:""}},e.handleChange=function(t){var a=t.target;e.setState({card:{title:a.value}})},e.onAddCard=function(){var t=Object(p.a)(m.a.mark((function t(a){var n,r,o;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),e.state.card.title.trim()){t.next=3;break}return t.abrupt("return");case 3:return n=_.getBoardCopy(e.props.board),r=n.phaseLists.findIndex((function(t){return t.id===e.props.phaseId})),o=_.getNewCard(e.state.card),n.phaseLists[r].cards.push(o),_.addActivity(n,W,O,L,{id:o.id,title:o.title}),t.next=10,e.props.updateBoard(n);case 10:e.setState({card:{title:""}}),e.props.bottomCard.scrollIntoView({behavior:"smooth"});case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handleClick=function(t){t.target!==e.addCardBtn&&t.target!==e.cardNameInput&&(e.state.card.title&&e.addCardBtn.form.dispatchEvent(new Event("submit",{cancelable:!0})),e.props.toggleAddCardShown())},e}return Object(f.a)(a,[{key:"componentDidUpdate",value:function(){this.props.isAddCardShown?(this.cardNameInput.addEventListener("keypress",this.submitOnEnter),window.addEventListener("mouseup",this.handleClick),this.props.bottomCard.scrollIntoView({behavior:"smooth"})):window.removeEventListener("mouseup",this.handleClick)}},{key:"submitOnEnter",value:function(e){13!==e.which||e.shiftKey||(e.target.form.dispatchEvent(new Event("submit",{cancelable:!0})),e.preventDefault())}},{key:"render",value:function(){var e=this,t=this.handleChange,a=this.onAddCard,n=this.state,o=this.props,c=o.toggleAddCardShown,s=o.isAddCardShown;return r.a.createElement(r.a.Fragment,null,s&&r.a.createElement("form",{className:"add-card",onSubmit:a},r.a.createElement("textarea",{className:"card-name-input",required:!0,autoFocus:!0,type:"text",name:"title",autoComplete:"off",onChange:t,spellCheck:"false",ref:function(t){return e.cardNameInput=t},value:n.card.title,placeholder:"Enter a title for this card.."}),r.a.createElement("div",{className:"form-btns flex align-end"},r.a.createElement("button",{ref:function(t){return e.addCardBtn=t},className:"submit-btn",type:"submit"},"Add Card"),r.a.createElement("button",{className:"close-btn",onClick:c},r.a.createElement(H.a,null)))))}}]),a}(n.Component),Q={updateBoard:q},X=Object(s.b)((function(e){return{board:e.trelloApp.board}}),Q)(Z),$=function(e){Object(b.a)(a,e);var t=Object(g.a)(a);function a(){var e;Object(h.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).toggleIsLabelTxtShown=function(t){t.stopPropagation();var a=_.getBoardCopy(e.props.board);a.isLabelTxtShown=!a.isLabelTxtShown,e.props.updateBoard(a)},e.getUpdatedLabels=function(){if(!e.props.board.labels.length)return[];var t=e.props.labels,a=_.getBoardCopy(e.props.board);return t.reduce((function(e,t){var n=a.labels.find((function(e){return e.id===t.id}));return n&&e.push(n),e}),[])},e}return Object(f.a)(a,[{key:"render",value:function(){var e=this.toggleIsLabelTxtShown,t=this.props.board.isLabelTxtShown,a=this.getUpdatedLabels(),n=t?"shown":"";return r.a.createElement("div",{className:"labels-container flex wrap"},a.map((function(a){return r.a.createElement("span",{title:a.txt,className:"label ".concat(n),style:{backgroundColor:a.color},onClick:e,key:a.id},r.a.createElement("span",{className:"label-txt"},t&&a.txt))})))}}]),a}(n.Component),ee={updateBoard:q},te=Object(s.b)((function(e){return{board:e.trelloApp.board}}),ee)($),ae=a(420),ne=a(431),re=a(432),oe=a(94),ce=a.n(oe),se=a(37),le=a.n(se),ie=a(418),de=function(e){var t=e.dueDate,a=t?le()(t).format("MMM Do"):null,n=t-Date.now()<864e5,o=Date.now()>t?"#eb5a46":n?"#f2d600":"",c=o?"#fff":"#5e6c84";return r.a.createElement("div",{style:{backgroundColor:o,color:c},className:"card-due flex align-center"}," ",r.a.createElement("span",{className:"due-icon"},r.a.createElement(ie.a,{fontSize:"small"})),a)};function ue(e){var t,a=(t=e.member?e.member.fullName.split(" "):e.fullName.split(" ")).map((function(e){return e.charAt(0)})).join("").slice(0,2),n=e.member;return r.a.createElement("div",{title:t.join(" "),className:"member-avatar"},(!n||!n.img)&&r.a.createElement("span",{className:"member-initial"},a.toUpperCase()),n&&n.img&&r.a.createElement("span",{style:{backgroundImage:"url("+n.img+")"},className:"member-initial-img"}))}var me=a(52),pe=a(428),he=a(429),fe=a(430),be=a(421),ge=a(419);function ve(e){var t=e.label,a=e.toggleEditMode,n=e.card.labels.some((function(e){return e.id===t.id}));return r.a.createElement("div",{className:"label-edit flex align-center"},r.a.createElement("span",{onClick:function(){e.toggleLabelOnCard(t)},className:"grow flex align-center",style:{backgroundColor:t.color}},t.txt,n&&r.a.createElement(ge.a,{className:"icon"})),r.a.createElement("button",{onClick:function(){a(t)}},r.a.createElement(ae.a,{className:"icon"})))}var Ee=function(e){Object(b.a)(a,e);var t=Object(g.a)(a);function a(){var e;Object(h.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={txt:"",color:"#b3bac5"},e.handleChangeColor=function(t){var a=t.target;e.setState({color:a.value})},e.handleChange=function(t){var a=t.target;e.setState({txt:a.value})},e.handleSubmit=function(t){t.preventDefault(),e.props.addLabel(e.state)},e}return Object(f.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.txt,n=t.color;return r.a.createElement("section",{className:"add-label"},r.a.createElement("div",{className:"add-label-header flex align-center"},r.a.createElement("p",{className:"grow"},"Add a label"),r.a.createElement("button",{onClick:this.props.toggleIsAddLabelShown},r.a.createElement(be.a,null))),r.a.createElement("div",{className:"add-label-gallery"},r.a.createElement("p",null,"Select a color"),r.a.createElement("label",{className:"#61bd4f"===n?"color-preview c-61bd4f selected":"color-preview c-61bd4f"},r.a.createElement("input",{onClick:this.handleChangeColor,className:"display-none",type:"radio",value:"#61bd4f"})),r.a.createElement("label",{className:"#f2d600"===n?"color-preview f2d600 selected":"color-preview f2d600"},r.a.createElement("input",{onClick:this.handleChangeColor,className:"display-none",type:"radio",value:"#f2d600"})),r.a.createElement("label",{className:"#ff9f1a"===n?"color-preview ff9f1a selected":"color-preview ff9f1a"},r.a.createElement("input",{onClick:this.handleChangeColor,className:"display-none",type:"radio",value:"#ff9f1a"})),r.a.createElement("label",{className:"#eb5a46"===n?"color-preview eb5a46 selected":"color-preview eb5a46"},r.a.createElement("input",{onClick:this.handleChangeColor,className:"display-none",type:"radio",value:"#eb5a46"})),r.a.createElement("label",{className:"#0079bf"===n?"color-preview c-0079bf selected":"color-preview c-0079bf"},r.a.createElement("input",{onClick:this.handleChangeColor,className:"display-none",type:"radio",value:"#0079bf"})),r.a.createElement("label",{className:"#00c2e0"===n?"color-preview c-00c2e0 selected":"color-preview c-00c2e0"},r.a.createElement("input",{onClick:this.handleChangeColor,className:"display-none",type:"radio",value:"#00c2e0"})),r.a.createElement("label",{className:"#ff78cb"===n?"color-preview ff78cb selected":"color-preview ff78cb"},r.a.createElement("input",{onClick:this.handleChangeColor,className:"display-none",type:"radio",value:"#ff78cb"})),r.a.createElement("label",{className:"#344563"===n?"color-preview c-344563 selected":"color-preview c-344563"},r.a.createElement("input",{onClick:this.handleChangeColor,className:"display-none",type:"radio",value:"#344563"})),r.a.createElement("label",{className:"#b3bac5"===n?"color-preview b3bac5 selected":"color-preview b3bac5"},r.a.createElement("input",{onClick:this.handleChangeColor,className:"display-none",type:"radio",value:"#b3bac5"})),r.a.createElement("label",{className:"#c377e0"===n?"color-preview c377e0 selected":"color-preview c377e0"},r.a.createElement("input",{onClick:this.handleChangeColor,className:"display-none",type:"radio",value:"#c377e0"})),r.a.createElement("form",{onSubmit:function(t){t.preventDefault(),e.props.addLabel(e.state)}},r.a.createElement("input",{type:"text",name:"txt",value:a,autoFocus:!0,placeholder:"Enter label name..",required:!0,autoComplete:"off",spellCheck:"false",onChange:this.handleChange}),r.a.createElement("button",{className:"save-btn"},"Save")),r.a.createElement("button",{className:"cancel-btn",onClick:this.props.toggleIsAddLabelShown},"Cancel")))}}]),a}(n.Component),we=function(e){Object(b.a)(a,e);var t=Object(g.a)(a);function a(){var e;Object(h.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={editLabel:null,isAddLabelShown:!1},e.hideLabelsEdit=function(t){"Escape"===t.code&&e.props.toggleProperty("isLabelEditShown")},e.toggleEditMode=function(t){e.setState({editLabel:t})},e.handleChange=function(t){var a=t.target;e.setState((function(e){return{editLabel:Object(v.a)(Object(v.a)({},e.editLabel),{},{txt:a.value})}}))},e.saveLabel=function(){var t=Object(p.a)(m.a.mark((function t(a){var n,r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),n=e.state.editLabel,(r=_.getBoardCopy(e.props.board)).labels=r.labels.map((function(e){return e.id===n.id?n:e})),t.next=6,e.props.updateBoard(r);case 6:e.toggleEditMode();case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.toggleLabelOnCard=function(t){var a=_.getBoardCopy(e.props.board),n=e.props.card.id,r=a.phaseLists.findIndex((function(e){return e.cards.some((function(e){return e.id===n}))})),o=a.phaseLists[r].cards.findIndex((function(e){return e.id===n})),c=a.phaseLists[r].cards[o];c.labels.some((function(e){return e.id===t.id}))?c.labels=c.labels.filter((function(e){return e.id!==t.id})):c.labels.push(t),a.phaseLists[r].cards[o]=c,e.props.updateBoard(a)},e.toggleIsAddLabelShown=function(){e.setState((function(e){return{isAddLabelShown:!e.isAddLabelShown}}))},e.addLabel=function(t){var a=_.getNewLabel(t),n=_.getBoardCopy(e.props.board);n.labels.push(a),e.props.updateBoard(n),e.toggleIsAddLabelShown()},e.removeLabel=function(t){var a=_.getBoardCopy(e.props.board),n=a.labels.filter((function(e){return e.id!==t}));a.labels=n,e.props.updateBoard(a),e.toggleEditMode(null)},e}return Object(f.a)(a,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.hideLabelsEdit)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.hideLabelsEdit)}},{key:"render",value:function(){var e=this,t=this.toggleEditMode,a=this.saveLabel,n=this.toggleLabelOnCard,o=this.removeLabel,c=this.state,s=c.editLabel,l=c.isAddLabelShown,i=this.props.board.labels;return r.a.createElement(r.a.Fragment,null,!l&&r.a.createElement("section",{className:"edit-labels flex column"},r.a.createElement("div",{className:"edit-labels-header flex align-center"},r.a.createElement("p",{className:"grow"},"Labels"),r.a.createElement("button",{onClick:function(){e.props.toggleProperty("isLabelEditShown")}},r.a.createElement(be.a,null))),r.a.createElement("div",{className:"labels-gallery grow"},!s&&i.map((function(o){return r.a.createElement(ve,{toggleLabelOnCard:n,card:e.props.card,saveLabel:a,key:o.id,label:o,toggleEditMode:t})})),s&&r.a.createElement("div",null,r.a.createElement("form",{onSubmit:a},r.a.createElement("input",{type:"text",name:"txt",value:s.txt,autoFocus:!0,autoComplete:"off",spellCheck:"false",onChange:this.handleChange}),r.a.createElement("button",{className:"save-btn"},"Save")),r.a.createElement("button",{className:"cancel-btn",onClick:function(){o(s.id)}},"Delete"))),r.a.createElement("button",{className:"add-label-btn flex align-center justify-center",onClick:this.toggleIsAddLabelShown},r.a.createElement(Y.a,{className:"add-icon"}),"Add Label")),l&&r.a.createElement(Ee,{addLabel:this.addLabel,toggleIsAddLabelShown:this.toggleIsAddLabelShown}))}}]),a}(n.Component),ye={updateBoard:q},Ce=Object(s.b)((function(e){return{board:e.trelloApp.board}}),ye)(we);function Ne(e){var t=e.member,a=e.toggleMemberOnCard,n=e.card.assignedTo.some((function(e){return e._id===t._id})),o=t.fullName.toUpperCase().split(" ").map((function(e){return e.charAt(0)})).join("").slice(0,2);return r.a.createElement("div",{onClick:function(){a(t)},className:"member-item flex align-center"},!t.img&&r.a.createElement("div",{className:"initials"},r.a.createElement("span",null,o)),t.img&&r.a.createElement("span",{style:{backgroundImage:"url("+t.img+")"},className:"member-img"}),t.fullName,n&&r.a.createElement(ge.a,{className:"icon"}))}var ke=function(e){Object(b.a)(a,e);var t=Object(g.a)(a);function a(){var e;Object(h.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={name:""},e.hideMembersEdit=function(t){"Escape"===t.code&&e.props.toggleProperty("isMembersEditShown")},e.handleChange=function(t){var a=t.target;e.setState({name:a.value})},e.toggleMemberOnCard=function(t){var a=_.getBoardCopy(e.props.board),n=e.props.card.id,r=a.phaseLists.findIndex((function(e){return e.cards.some((function(e){return e.id===n}))})),o=a.phaseLists[r].cards.findIndex((function(e){return e.id===n})),c=a.phaseLists[r].cards[o];c.assignedTo.some((function(e){return e._id===t._id}))?c.assignedTo=c.assignedTo.filter((function(e){return e._id!==t._id})):c.assignedTo.push(t),a.phaseLists[r].cards[o]=c,e.props.updateBoard(a)},e}return Object(f.a)(a,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.hideMembersEdit)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.hideMembersEdit)}},{key:"render",value:function(){var e=this,t=this.props,a=t.members,n=t.toggleProperty,o=t.card,c=this.state.name,s=a.filter((function(e){return e.fullName.toLowerCase().includes(c.toLowerCase())}));return r.a.createElement("section",{className:"edit-members"},r.a.createElement("div",{className:"edit-members-header flex align-center"},r.a.createElement("p",{className:"grow"},"Members"),r.a.createElement("button",{onClick:function(){n("isMembersEditShown")}},r.a.createElement(be.a,null))),r.a.createElement("input",{className:"search-name",onChange:this.handleChange,autoComplete:"off",type:"search",name:"name",value:c,placeholder:"Search members"}),r.a.createElement("div",{className:"members-gallery"},a&&s.map((function(t){return r.a.createElement(Ne,{toggleMemberOnCard:e.toggleMemberOnCard,card:o,key:t._id,member:t})}))))}}]),a}(n.Component),Se={updateBoard:q},xe=Object(s.b)((function(e){return{board:e.trelloApp.board}}),Se)(ke),Oe=a(451),je=function(e){Object(b.a)(a,e);var t=Object(g.a)(a);function a(){var e;Object(h.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={dueDate:0},e.hideDueDateEdit=function(t){"Escape"===t.code&&e.props.toggleProperty("isDueDateEditShown")},e.handleDateChange=function(t){e.setState({dueDate:t._d.getTime()})},e.handleSave=function(){e.props.changeDueDate(e.state.dueDate),e.props.toggleProperty("isDueDateEditShown")},e.removeDueDate=function(){e.props.changeDueDate(null),e.props.toggleProperty("isDueDateEditShown")},e}return Object(f.a)(a,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.hideDueDateEdit),this.setState({dueDate:Date.now()})}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.hideDueDateEdit)}},{key:"render",value:function(){var e=this.props.toggleProperty,t=this.state.dueDate;return r.a.createElement("div",{className:"date-picker"},r.a.createElement("div",{className:"date-picker-header flex align-center"},r.a.createElement("p",{className:"grow"},"Change Due Date"),r.a.createElement("button",{onClick:function(){e("isDueDateEditShown")}},r.a.createElement(be.a,{className:"icon"}))),r.a.createElement("div",{className:"date-picker-content flex column justify-center"},r.a.createElement(Oe.a,{className:"picker-input",disablePast:"true",views:["date","month","hours","minutes"],minDateMessage:"",value:t,onChange:this.handleDateChange}),r.a.createElement("div",{className:"flex space-between"},r.a.createElement("button",{onClick:this.removeDueDate,className:"remove-btn"},"Remove"),r.a.createElement("button",{onClick:this.handleSave,className:"save-btn"},"Save"))))}}]),a}(n.Component),Le=function(e){Object(b.a)(a,e);var t=Object(g.a)(a);function a(){var e;Object(h.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={card:{title:"",dueDate:0,labels:[],assignedTo:[]},isLabelEditShown:!1,isMembersEditShown:!1,isDueDateEditShown:!1},e.handleChange=function(t){var a=t.target;e.setState({card:{title:a.value}})},e.hideMenu=function(t){var a=e.state,n=a.isLabelEditShown,r=a.isMembersEditShown,o=a.isDueDateEditShown;"Escape"!==t.code||n||r||o||e.props.toggleIsMenuShown()},e.getPhaseIdxByCardId=function(t){return e.props.board.phaseLists.findIndex((function(e){return e.cards.some((function(e){return e.id===t}))}))},e.onDelete=function(){var t=e.props.card.id,a=_.getBoardCopy(e.props.board),n=e.getPhaseIdxByCardId(t);a.phaseLists[n].cards=a.phaseLists[n].cards.filter((function(e){return e.id!==t})),e.props.updateBoard(a),e.props.toggleIsMenuShown()},e.onChangeTitle=function(){if(e.state.card.title.trim()){var t=e.props.card.id,a=_.getBoardCopy(e.props.board),n=e.getPhaseIdxByCardId(t);a.phaseLists[n].cards.filter((function(a){return a.id!==t||(a.title=e.state.card.title),a})),e.props.updateBoard(a),e.props.toggleIsMenuShown()}},e.changeDueDate=function(t){var a=_.getBoardCopy(e.props.board),n=e.props.card.id,r=e.getPhaseIdxByCardId(n),o=a.phaseLists[r].cards.findIndex((function(e){return e.id===n}));a.phaseLists[r].cards[o].dueDate=t,e.props.updateBoard(a)},e.toggleProperty=function(t){e.setState((function(e){return Object(me.a)({},t,!e[t])}))},e}return Object(f.a)(a,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.hideMenu),this.titleInput.addEventListener("keypress",this.submitOnEnter);var e=this.props.card,t=e.title,a=e.dueDate,n=e.labels,r=e.assignedTo;this.setState({card:{title:t,dueDate:a,labels:n,assignedTo:r}})}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.hideMenu),this.titleInput.removeEventListener("keypress",this.submitOnEnter)}},{key:"submitOnEnter",value:function(e){13!==e.which||e.shiftKey||(e.target.form.dispatchEvent(new Event("submit",{cancelable:!0})),e.preventDefault())}},{key:"render",value:function(){var e=this,t=this.onDelete,a=this.handleChange,n=this.onChangeTitle,o=this.toggleProperty,c=this.changeDueDate,s=this.state,l=s.isLabelEditShown,i=s.card,d=s.isMembersEditShown,u=s.isDueDateEditShown,m=i.title;return r.a.createElement("section",null,r.a.createElement("div",{onMouseDown:this.props.toggleIsMenuShown,className:"screen"}),r.a.createElement("section",{className:"menu-container flex"},r.a.createElement("form",{onSubmit:n,className:"edit-card-form flex column"},r.a.createElement("textarea",{onChange:a,name:"title",value:m,cols:"30",rows:"5",ref:function(t){return e.titleInput=t},spellCheck:"false",autoComplete:"off",autoFocus:!0}),r.a.createElement("button",{onClick:n,className:"save-btn"},"Save")),r.a.createElement("div",{className:"card-menu flex column"},r.a.createElement("button",{onClick:function(){o("isLabelEditShown")},className:"flex align-center"},r.a.createElement(pe.a,{className:"icon"}),"Edit Labels"),l&&r.a.createElement(Ce,{card:this.props.card,toggleProperty:o}),r.a.createElement("button",{onClick:function(){o("isMembersEditShown")},className:"flex align-center"},r.a.createElement(he.a,{className:"icon"}),"Change Members"),d&&r.a.createElement(xe,{card:this.props.card,members:this.props.board.members,toggleProperty:o}),r.a.createElement("button",{onClick:function(){o("isDueDateEditShown")},className:"flex align-center"},r.a.createElement(ie.a,{className:"icon"}),"Change Due Date"),u&&r.a.createElement(je,{changeDueDate:c,toggleProperty:o}),r.a.createElement("button",{onClick:t,className:"flex align-center"},r.a.createElement(fe.a,{className:"icon"}),"Delete"))))}}]),a}(n.Component),Be={updateBoard:q},De=Object(s.b)((function(e){return{board:e.trelloApp.board}}),Be)(Le),Ae=function(e){Object(b.a)(a,e);var t=Object(g.a)(a);function a(){var e;Object(h.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={isMenuShown:!1},e.getUpdatedLabels=function(){if(!e.props.board.labels.length)return[];var t=e.props.card.labels,a=_.getBoardCopy(e.props.board);return t.reduce((function(e,t){var n=a.labels.find((function(e){return e.id===t.id}));return n&&e.push(n),e}),[])},e.toggleIsMenuShown=function(t){t&&(t.preventDefault(),t.stopPropagation()),e.setState((function(e){return{isMenuShown:!e.isMenuShown}}))},e}return Object(f.a)(a,[{key:"render",value:function(){var e=this,t=this.toggleIsMenuShown,a=this.state.isMenuShown,n=this.props.card,o=n.title,c=n.imgUrl,s=n.dueDate,l=n.checkList,i=n.assignedTo,d=n.attachments,u=l.filter((function(e){return e.isDone})).length,m=u===l.length?"#61bd4f":"",p=m?"#fff":"",h=this.getUpdatedLabels();return r.a.createElement(r.a.Fragment,null,a&&r.a.createElement(De,{card:this.props.card,toggleIsMenuShown:t}),r.a.createElement(V.b,{draggableId:this.props.card.id,index:this.props.index},(function(a,n){return r.a.createElement(ce.a,{style:a.draggableProps.style,snapshot:n},(function(n){return r.a.createElement("section",Object.assign({onContextMenu:t,onClick:function(){e.props.setCard(e.props.card)},className:"card-preview flex column"},a.draggableProps,a.dragHandleProps,{ref:a.innerRef,style:n}),r.a.createElement("button",{onClick:t,className:"show-menu-btn"},r.a.createElement(ae.a,{className:"show-menu-icon"})),c&&r.a.createElement("div",{className:"card-img"},r.a.createElement("img",{alt:"Card",src:c})),h&&r.a.createElement(te,{labels:h}),r.a.createElement("p",null,o),r.a.createElement("div",{className:"card-badges flex wrap"},s&&r.a.createElement(de,{dueDate:s}),d.length>0&&r.a.createElement("div",{className:"attach-badge flex align-center"},r.a.createElement(ne.a,{className:"attach-icon"}),r.a.createElement("span",null,d.length)),l.length>0&&r.a.createElement("div",{style:{backgroundColor:m,color:p},className:"checklist-badge flex align-center"},r.a.createElement("span",null,r.a.createElement(re.a,{className:"checklist-icon"})),r.a.createElement("span",null,u,"/",l.length))),r.a.createElement("div",{className:"members-badge flex align-center"},i.length>0&&i.map((function(e){return r.a.createElement(ue,{key:e._id,member:e})}))))}))})))}}]),a}(r.a.Component),Ie={loadBoard:K,setCard:z},Me=Object(s.b)((function(e){return{board:e.trelloApp.board}}),Ie)(Ae),Pe=function(e){Object(b.a)(a,e);var t=Object(g.a)(a);function a(){var e;Object(h.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={isInputShown:!1,isMenuShown:!1,isSortShown:!1,newPhaseName:"",isAddCardShown:!1},e.toggleInputShown=function(){e.state.isInputShown?window.removeEventListener("keydown",e.hideInput):window.addEventListener("keydown",e.hideInput),e.setState((function(e){return{isInputShown:!e.isInputShown}}))},e.hideInput=function(t){"Escape"!==t.code&&"onblur"!==t.type||(e.setState({isInputShown:!1}),window.removeEventListener("keydown",e.hideInput))},e.handleChange=function(t){var a=t.target;e.setState({newPhaseName:a.value})},e.handleSubmit=function(t){if(t.preventDefault(),e.state.newPhaseName.trim()){var a=_.getBoardCopy(e.props.board),n=e.props.phase.id,r=a.phaseLists.findIndex((function(e){return e.id===n}));a.phaseLists[r].name=e.state.newPhaseName,e.props.updateBoard(a),e.toggleInputShown()}},e.toggleMenuShown=function(){e.state.isSortShown?e.setState({isMenuShown:!1,isSortShown:!1}):e.setState((function(e){return{isMenuShown:!e.isMenuShown}}))},e.showAddCard=function(){e.setState({isAddCardShown:!0}),e.toggleMenuShown()},e.toggleAddCardShown=function(){e.setState((function(e){return{isAddCardShown:!e.isAddCardShown}}))},e.toggleIsSortShown=function(){e.setState((function(e){return{isSortShown:!e.isSortShown}}))},e.sortListBy=function(t){var a=_.getBoardCopy(e.props.board),n=e.props.phase.id,r=a.phaseLists.find((function(e){return e.id===n})),o=_.getSortedPhase(t,r);a.phaseLists=a.phaseLists.filter((function(e){return e.id===o.id?o:e})),e.props.updateBoard(a),e.toggleIsSortShown(),e.toggleMenuShown()},e.onDeletePhase=function(){e.toggleMenuShown();var t=_.getBoardCopy(e.props.board);t.phaseLists=t.phaseLists.filter((function(t){return t.id!==e.props.phase.id})),e.props.updateBoard(t)},e}return Object(f.a)(a,[{key:"componentDidMount",value:function(){this.setState({newPhaseName:this.props.phase.name})}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.hideInput)}},{key:"render",value:function(){var e=this,t=this.props.phase,a=t.name,n=t.id,o=t.cards,c=this.state,s=c.newPhaseName,l=c.isInputShown,i=c.isMenuShown,d=c.isSortShown,u=c.isAddCardShown;return r.a.createElement(V.b,{draggableId:n,index:this.props.index},(function(t,c){return r.a.createElement(ce.a,{style:t.draggableProps.style,snapshot:c},(function(m){return r.a.createElement("article",Object.assign({className:"phase flex column"},t.draggableProps,{ref:t.innerRef},c.isDropAnimating=!0,{style:m}),r.a.createElement("div",Object.assign({},t.dragHandleProps,{className:"phase-header flex space-between"}),!l&&r.a.createElement("h5",{className:"phase-title grow",onClick:e.toggleInputShown},a),l&&r.a.createElement("form",{className:"flex grow",onSubmit:e.handleSubmit},r.a.createElement("input",{className:"phase-name-input grow",type:"text",name:"newPhaseName",value:s,autoFocus:!0,autoComplete:"off",spellCheck:"false",onBlur:e.toggleInputShown,onChange:e.handleChange})),r.a.createElement(G.a,{className:"pointer",onClick:e.toggleMenuShown}),i&&r.a.createElement("div",{className:"phase-menu flex column"},r.a.createElement("div",{className:"menu-header flex align-center"},r.a.createElement("h5",{className:"grow"},"List Actions"),r.a.createElement(H.a,{className:"pointer",onClick:e.toggleMenuShown})),r.a.createElement("div",{className:"menu-btns flex column"},r.a.createElement("button",{onClick:e.showAddCard},"Add A Card"),r.a.createElement("button",{onClick:e.toggleIsSortShown},"Sort By.."),d&&r.a.createElement("div",{className:"sort-options flex column"},r.a.createElement("button",{onClick:function(){e.sortListBy("title")}},"Title"),r.a.createElement("button",{onClick:function(){e.sortListBy("firstCreated")}},"First Created"),r.a.createElement("button",{onClick:function(){e.sortListBy("lastCreated")}},"Last Created")),r.a.createElement("button",{onClick:e.onDeletePhase},"Delete List")))),r.a.createElement(V.c,{droppableId:n},(function(t){return r.a.createElement("div",Object.assign({className:"cards-list",ref:t.innerRef},t.droppableProps),o.map((function(e,t){return r.a.createElement(Me,{key:e.id,card:e,index:t})})),t.placeholder,r.a.createElement(X,{isAddCardShown:u,bottomCard:e.bottomCard,toggleAddCardShown:e.toggleAddCardShown,phaseId:e.props.phase.id}),r.a.createElement("div",{style:{opacity:0},ref:function(t){return e.bottomCard=t}}))})),!u&&r.a.createElement("button",{onClick:e.toggleAddCardShown,className:"add-card-btn flex align-center"},r.a.createElement(Y.a,{className:"add-icon",fontSize:"large"}),"Add a card"))}))}))}}]),a}(n.Component),Te={updateBoard:q},Ue=Object(s.b)((function(e){return{board:e.trelloApp.board}}),Te)(Pe),_e=function(e){Object(b.a)(a,e);var t=Object(g.a)(a);function a(){var e;Object(h.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={board:null,isInputShown:!1,newListName:"",phaseListToShow:null},e.toggleInputShown=function(){e.state.isInputShown?e.removeEventListeners():e.addEventListeners(),e.setState((function(e){return{isInputShown:!e.isInputShown}}))},e.hideInput=function(t){"Escape"!==t.code&&t.target===e.listNameInput||t.target===e.submitBtn||(e.setState({isInputShown:!1}),e.removeEventListeners())},e.handleChange=function(t){var a=t.target;e.setState((function(e){return Object(v.a)(Object(v.a)({},e),{},{newListName:a.value})}))},e.addEventListeners=function(){window.addEventListener("keydown",e.hideInput),window.addEventListener("mousedown",e.hideInput)},e.removeEventListeners=function(){window.removeEventListener("keydown",e.hideInput),window.removeEventListener("mousedown",e.hideInput)},e.onAddPhase=function(){var t=Object(p.a)(m.a.mark((function t(a){var n,r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),e.state.newListName.trim()){t.next=3;break}return t.abrupt("return");case 3:return n=_.getBoardCopy(e.props.board),r=_.getNewPhase(e.state.newListName),n.phaseLists.push(r),t.next=8,e.props.updateBoard(n);case 8:e.setState({newListName:""},(function(){e.listForm.scrollIntoView({inline:"end",behavior:"smooth"})}));case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onDragEnd=function(t){var a=t.destination,n=t.source,r=t.type;if(a&&(a.droppableId!==n.droppableId||a.index!==n.index)){var o=_.getBoardCopy(e.props.board);if("PhasePreview"===r){var c=o.phaseLists,s=c.splice(n.index,1)[0];c.splice(a.index,0,s)}else{var l=o.phaseLists,i=l.find((function(e){return e.id===n.droppableId})),d=l.find((function(e){return e.id===a.droppableId}));if(i.id===d.id){var u=i.cards.splice(n.index,1)[0];i.cards.splice(a.index,0,u)}else{var m=i.cards.splice(n.index,1)[0];d.cards.splice(a.index,0,m),_.addActivity(o,W,j,L,{id:m.id,title:m.title},"moved card from ".concat(i.name," to ").concat(d.name," -Card:"))}}e.props.updateBoard(o)}},e}return Object(f.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.setState({board:this.props.board},(function(){var t=e.getFilteredPhaseLists(e.props.filteredByUser);e.setState({phaseListToShow:t})}))}},{key:"componentDidUpdate",value:function(e){if(JSON.stringify(e.board)!==JSON.stringify(this.props.board)){var t=this.getFilteredPhaseLists(this.props.filteredByUser);this.setState({board:this.props.board,phaseListToShow:t})}if(JSON.stringify(e.filteredByUser)!==JSON.stringify(this.props.filteredByUser)){var a=this.getFilteredPhaseLists(this.props.filteredByUser);this.setState({phaseListToShow:a})}}},{key:"componentWillUnmount",value:function(){this.removeEventListeners()}},{key:"getFilteredPhaseLists",value:function(e){if(!e)return this.props.board.phaseLists;var t=_.getBoardCopy(this.props.board);return t.phaseLists.map((function(t){return t.cards=t.cards.filter((function(t){return t.assignedTo.find((function(t){return t.fullName.toLowerCase().includes(e.trim().toLowerCase())}))}))})),t.phaseLists}},{key:"render",value:function(){var e=this;if(!this.state.board||!this.state.phaseListToShow)return"loading..";var t=this.toggleInputShown,a=this.onAddPhase,n=this.handleChange,o=this.hideInput,c=this.state,s=c.isInputShown,l=c.newListName,i=c.phaseListToShow;return r.a.createElement(V.a,{onDragEnd:this.onDragEnd},r.a.createElement(V.c,{droppableId:"all-columns",direction:"horizontal",type:"PhasePreview"},(function(c,d){return r.a.createElement("section",Object.assign({className:"phase-list flex"},c.droppableProps,{ref:c.innerRef}),i&&i.map((function(e,t){return r.a.createElement(Ue,{key:e.id,index:t,phase:e})})),!s&&r.a.createElement("button",{className:"add-list-btn flex align-center",onClick:t}," ",r.a.createElement(Y.a,{fontSize:"small"}),"Add new list"),s&&r.a.createElement("form",{ref:function(t){return e.listForm=t},className:"add-list-form",onSubmit:a},r.a.createElement("input",{ref:function(t){return e.listNameInput=t},type:"text",autoFocus:!0,spellCheck:"false",name:"newListName",onChange:n,required:!0,autoComplete:"off",placeholder:"Enter list title..",value:l}),r.a.createElement("div",{className:"flex align-center"},r.a.createElement("button",{ref:function(t){return e.submitBtn=t},className:"submit-btn",type:"submit"},"Add List"),r.a.createElement(H.a,{className:"cancel-btn pointer",onClick:o}))),c.placeholder)})))}}]),a}(n.Component),Fe={updateBoard:q},Re=Object(s.b)((function(e){return{board:e.trelloApp.board}}),Fe)(_e),Je=a(435),We=function(e){Object(b.a)(a,e);var t=Object(g.a)(a);function a(){var e;Object(h.a)(this,a);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).dynamicActivity=function(t){var a=t.at,n=t.user,o=t.type,c=t.object,s=t.operation,l=t.desc,i=null,d=null;return l?(i=r.a.createElement("a",{className:"activity-user",href:"/user/".concat(n._id),target:"_blank",rel:"noopener noreferrer"},n.fullName),r.a.createElement("div",{className:"activity flex"},r.a.createElement(ue,{fullName:n.fullName}),r.a.createElement("div",{className:"activity-content flex column"},r.a.createElement("span",null,i," "," ".concat(l)),r.a.createElement("span",{onClick:e.OpenByObjectType,className:"activity-object"},c.title),r.a.createElement("div",{className:"activity-time"},le()(a).fromNow())))):n?(i=r.a.createElement("a",{className:"activity-user",href:"/user/".concat(n._id),target:"_blank",rel:"noopener noreferrer"},n.fullName),d=r.a.createElement("span",{onClick:e.OpenByObjectType,className:"activity-object"},c.title),r.a.createElement("div",{className:"activity flex"},r.a.createElement(ue,{fullName:n.fullName}),r.a.createElement("div",{className:"activity-content flex column"},r.a.createElement("span",null,i," "," ".concat(s," ").concat(o)," ",d),r.a.createElement("div",{className:"activity-time"},le()(a).fromNow())))):r.a.createElement("div",{style:{display:"none"}},"stam")},e.OpenByObjectType=function(){var t=e.props.activity,a=t.type,n=t.object;if("card"===a.toLowerCase()&&e.props.allowOpenCard){var r=JSON.parse(JSON.stringify(e.props.board)),o=n.id,c=r.phaseLists.find((function(e){return e.cards.some((function(e){return e.id===o}))})).cards.find((function(e){return e.id===o}));e.props.onCloseMenu(null),e.props.setCard(c)}},e}return Object(f.a)(a,[{key:"render",value:function(){var e=this.props.activity;return this.dynamicActivity(e)}}]),a}(r.a.Component),Ke={updateBoard:q,setCard:z},qe=Object(s.b)((function(e){return{board:e.trelloApp.board}}),Ke)(We),ze=a(434),Ve=function(e){Object(b.a)(a,e);var t=Object(g.a)(a);function a(){var e;Object(h.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={txt:""},e.handleChange=function(t){var a=t.target.value;e.setState({txt:a})},e.onEnterDown=function(t){13!==t.which||t.shiftKey||(e.handleSaveBoard(),t.preventDefault())},e.handleSaveBoard=function(){var t=JSON.parse(JSON.stringify(e.props.board)),a=e.props.card;e.state.txt.trim()&&(_.addActivity(t,W,O,L,{id:a.id,title:a.title},'commented "'.concat(e.state.txt,'"')),e.setState({txt:""}),e.props.updateBoard(t))},e}return Object(f.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.activities,n=t.showCommentBox,o=this.state.txt;return r.a.createElement("div",{className:"activity-container"},r.a.createElement("div",{className:"activity-header flex align-center"},r.a.createElement(ze.a,{className:"activity-icon"}),r.a.createElement("span",{className:"activity-header-text"},"Activity")),n&&r.a.createElement("div",{className:"flex column"},r.a.createElement("div",{className:"flex"},r.a.createElement(ue,{fullName:W.fullName}),r.a.createElement("input",{type:"text",className:"comment-input",ref:function(t){return e.cardNameInput=t},placeholder:"Write a comment...",onChange:this.handleChange,spellCheck:"false",onBlur:this.handleSaveBoard,onKeyDown:this.onEnterDown,value:this.state.txt})),o.length>0&&r.a.createElement("button",{onClick:this.handleSaveBoard,className:"add-comment-btn",type:"submit"},"Save")),a.map((function(t,a){return r.a.createElement(qe,{allowOpenCard:!n,onCloseMenu:e.props.onCloseMenu,key:a,activity:t})})))}}]),a}(r.a.Component),Ge={updateBoard:q},He=Object(s.b)((function(e){return{board:e.trelloApp.board}}),Ge)(Ve),Ye=function(e){Object(b.a)(a,e);var t=Object(g.a)(a);function a(){return Object(h.a)(this,a),t.apply(this,arguments)}return Object(f.a)(a,[{key:"render",value:function(){var e=this,t=this.props.isMenuShown?"shown":"",a=this.props.board,n=a.bgColor?{backgroundColor:a.bgColor}:{backgroundImage:'url("'.concat(a.imgUrl,'")'),backgroundSize:"cover"};return r.a.createElement("div",{className:"board-menu ".concat(t)},r.a.createElement("div",{className:"board-menu-header flex"},r.a.createElement("div",{className:"board-menu-header-content flex align-center grow"},r.a.createElement("h3",{className:"menu-header-title"},"Menu"),r.a.createElement(Je.a,{onClick:function(){return e.props.onToggleMenu(null)},className:"btn-header-menu"}))),r.a.createElement("div",{className:"flex column"},r.a.createElement("div",{className:"board-menu-content flex column"},r.a.createElement("div",{className:"board-menu-item flex align-center",onClick:function(){return e.props.onToggleMenu("backgroundMenu")}},r.a.createElement("div",{className:"board-menu-icon",style:n}),r.a.createElement("span",{className:"board-menu-text"},"Change Background")),r.a.createElement("span",{className:"board-menu-header-divider"}),r.a.createElement(He,{onCloseMenu:this.props.onToggleMenu,activities:a.activities}))))}}]),a}(n.Component),Ze=a(436),Qe=function(e){Object(b.a)(a,e);var t=Object(g.a)(a);function a(){var e;Object(h.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).changeBoardColor=function(t){if(t){var a=_.getBoardCopy(e.props.board);a.bgColor=t,a.imgUrl=null,_.addActivity(a,W,j,B,{id:a._id,title:a.name},"change board background color"),e.props.updateBoard(a)}},e}return Object(f.a)(a,[{key:"render",value:function(){var e=this,t=this.props.isMenuShown?"shown":"display-none";return r.a.createElement("div",{className:"board-menu ".concat(t)},r.a.createElement("div",{className:"flex column"},r.a.createElement("div",{className:"board-menu-header"},r.a.createElement("div",{className:"board-menu-header-content  flex justify-center"},r.a.createElement(Ze.a,{onClick:function(){return e.props.onToggleMenu("backgroundMenu")},className:"btn-header-menu"}),r.a.createElement("h3",{className:"menu-header-title"},"Change Background"),r.a.createElement(Je.a,{onClick:function(){return e.props.onToggleMenu(null)},className:"btn-header-menu"}))),r.a.createElement("div",{className:"board-menu-content"},r.a.createElement("div",{className:"flex space-between wrap"},r.a.createElement("div",{className:"btn-color",style:{backgroundColor:"rgb(0, 121, 191)"},onClick:function(){return e.changeBoardColor("rgb(0, 121, 191)")}}),r.a.createElement("div",{className:"btn-color",style:{backgroundColor:"rgb(210, 144, 52)"},onClick:function(){return e.changeBoardColor("rgb(210, 144, 52)")}}),r.a.createElement("div",{className:"btn-color",style:{backgroundColor:"rgb(81, 152, 57)"},onClick:function(){return e.changeBoardColor("rgb(81, 152, 57)")}}),r.a.createElement("div",{className:"btn-color",style:{backgroundColor:"rgb(176, 70, 50)"},onClick:function(){return e.changeBoardColor("rgb(176, 70, 50)")}}),r.a.createElement("div",{className:"btn-color",style:{backgroundColor:"rgb(137, 96, 158)"},onClick:function(){return e.changeBoardColor("rgb(137, 96, 158)")}}),r.a.createElement("div",{className:"btn-color",style:{backgroundColor:"rgb(205, 90, 145)"},onClick:function(){return e.changeBoardColor("rgb(205, 90, 145)")}}),r.a.createElement("div",{className:"btn-color",style:{backgroundColor:"rgb(75, 191, 107)"},onClick:function(){return e.changeBoardColor("rgb(75, 191, 107)")}}),r.a.createElement("div",{className:"btn-color",style:{backgroundColor:"rgb(0, 174, 204)"},onClick:function(){return e.changeBoardColor("rgb(0, 174, 204)")}}),r.a.createElement("div",{className:"btn-color",style:{backgroundColor:"rgb(131, 140, 145)"},onClick:function(){return e.changeBoardColor("rgb(131, 140, 145)")}})))))}}]),a}(n.Component),Xe={loadBoard:K,updateBoard:q},$e=Object(s.b)((function(e){return{board:e.trelloApp.board}}),Xe)(Qe),et=a(165),tt=function(e){Object(b.a)(a,e);var t=Object(g.a)(a);function a(){var e;Object(h.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={imgs:null},e.changeBoardImg=function(t){if(t){var a=_.getBoardCopy(e.props.board);a.imgUrl=t,a.bgColor=null,_.addActivity(a,W,j,B,{id:a._id,title:a.name},"change board background image"),e.props.updateBoard(a)}},e}return Object(f.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.state.imgs||et.a.getListPhotos().then((function(t){var a=t.map((function(e){return{thumbUrl:e.urls.thumb,regularUrl:e.urls.regular,fullUrl:e.urls.full,credit:"".concat(e.user.links.html,"?utm_source=Flowz&utm_medium=referral"),userName:"".concat(e.user.name)}}));e.setState({imgs:a},(function(){}))}))}},{key:"render",value:function(){var e=this,t=this.props.isMenuShown?"shown":"display-none",a=this.state.imgs;return r.a.createElement("div",{className:"board-menu ".concat(t)},r.a.createElement("div",{className:"flex column"},r.a.createElement("div",{className:"board-menu-header"},r.a.createElement("div",{className:"board-menu-header-content  flex justify-center"},r.a.createElement(Ze.a,{onClick:function(){return e.props.onToggleMenu("backgroundMenu")},className:"btn-header-menu"}),r.a.createElement("h3",{className:"menu-header-title"},"Photos by",r.a.createElement("a",{className:"unsplash",href:"https://unsplash.com/?utm_source=Flowz&utm_medium=referral&utm_campaign=api-credit"},"Unsplash")),r.a.createElement(Je.a,{onClick:function(){return e.props.onToggleMenu(null)},className:"btn-header-menu"}))),r.a.createElement("div",{className:"board-menu-content"},r.a.createElement("div",{className:"flex space-between wrap"},a&&a.map((function(t,a){return r.a.createElement("div",{className:"btn-photo flex column align-center flex-end ",style:{backgroundImage:'url("'.concat(t.thumbUrl,'")')},key:a,onClick:function(){return e.changeBoardImg(t.regularUrl)}})}))))))}}]),a}(n.Component),at={loadBoard:K,updateBoard:q},nt=Object(s.b)((function(e){return{board:e.trelloApp.board}}),at)(tt),rt=a(442),ot=a(443),ct=a(57),st=function(e){Object(b.a)(n,e);var t=Object(g.a)(n);function n(){return Object(h.a)(this,n),t.apply(this,arguments)}return Object(f.a)(n,[{key:"render",value:function(){var e=this,t=this.props.isMenuShown?"shown":"display-none";return r.a.createElement("div",{className:"board-menu ".concat(t)},r.a.createElement("div",{className:"flex column"},r.a.createElement("div",{className:"board-menu-header"},r.a.createElement("div",{className:"board-menu-header-content flex justify-center"},r.a.createElement(Ze.a,{onClick:function(){return e.props.onToggleMenu("mainMenu")},className:"btn-header-menu"}),r.a.createElement("h3",{className:"menu-header-title"},"Colors"),r.a.createElement(Je.a,{onClick:function(){return e.props.onToggleMenu(null)},className:"btn-header-menu"}))),r.a.createElement("div",{className:"board-menu-content"},r.a.createElement("div",{className:"flex space-between"},r.a.createElement("div",{className:"bg-btn flex column align-center",onClick:function(){return e.props.onToggleMenu("photoMenu")}},r.a.createElement("img",{className:"bg-btn-img",src:a(270),alt:""}),r.a.createElement("span",null,"Photos")),r.a.createElement("div",{className:"bg-btn flex column align-center",onClick:function(){return e.props.onToggleMenu("colorMenu")}},r.a.createElement("img",{className:"bg-btn-img",src:a(271),alt:""}),r.a.createElement("span",null,"Colors"))))))}}]),n}(n.Component),lt=a(168),it=a.n(lt),dt=function(e){Object(b.a)(a,e);var t=Object(g.a)(a);function a(){var e;Object(h.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={txt:"",onPhase:"",isTitleOnEdit:!1},e.toggleInput=function(){e.setState((function(e){return{isTitleOnEdit:!e.isTitleOnEdit}}))},e.handleSaveBoard=function(){if(!e.state.txt.trim())return e.toggleInput();if(e.state.isTitleOnEdit){var t=JSON.parse(JSON.stringify(e.props.board)),a=e.props.card.id;t.phaseLists.filter((function(e){return e.cards.find((function(e){return e.id===a}))}))[0].cards.forEach((function(t){t.id===e.props.card.id&&(t.title=e.state.txt)})),e.props.updateBoard(t),e.toggleInput()}},e.handleChange=function(t){var a=t.target.value;e.setState({txt:a}),e.autoGrow(e.elTextarea)},e.autoGrow=function(e){e.style.height=e.scrollHeight+"px"},e.backToboard=function(){d.push("/board/".concat(e.props.board._id))},e}return Object(f.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.card.id,t=this.props.board.phaseLists.filter((function(t){return t.cards.find((function(t){return t.id===e}))}));this.setState({txt:this.props.card.title,onPhase:t[0].name})}},{key:"handleKeyPress",value:function(e){13===e.keyCode&&e.target.blur()}},{key:"render",value:function(){var e=this;if(!this.state)return"loading";var t=this.state,a=t.txt,n=t.isTitleOnEdit,o=t.onPhase;return r.a.createElement("div",{className:"card-header"},r.a.createElement("div",{className:"card-header-container flex align-center"},r.a.createElement(it.a,{className:"icon"}),!n&&r.a.createElement("h3",{onClick:this.toggleInput,className:"card-title grow"},a),n&&r.a.createElement("textarea",{ref:function(t){return e.elTextarea=t},spellCheck:"false",onFocus:function(t){e.autoGrow(t.target)},onKeyDown:function(t){return e.handleKeyPress(t)},className:"card-title-input",autoFocus:!0,onBlur:this.handleSaveBoard,placeholder:"Title...",autoCorrect:"false",onChange:this.handleChange,value:a})),r.a.createElement("button",{className:"close-btn",onClick:function(){e.props.setCard(null)}},r.a.createElement(be.a,{className:"close-icon"})),r.a.createElement("p",{className:"card-link"},"in list ",r.a.createElement("span",{onClick:function(){e.props.setCard(null)}},o)))}}]),a}(n.Component),ut={loadBoard:K,updateBoard:q,setCard:z},mt=Object(s.b)((function(e){return{board:e.trelloApp.board}}),ut)(dt),pt=a(169),ht=a.n(pt),ft=function(e){Object(b.a)(a,e);var t=Object(g.a)(a);function a(){var e;Object(h.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={txt:""},e.handleChange=function(t){var a=t.target.value;e.setState({txt:a})},e.handleSaveBoard=function(){var t=JSON.parse(JSON.stringify(e.props.board)),a=e.props.card.id;t.phaseLists.filter((function(e){return e.cards.find((function(e){return e.id===a}))}))[0].cards.forEach((function(t){t.id===e.props.card.id&&(t.desc=e.state.txt)})),e.props.updateBoard(t)},e}return Object(f.a)(a,[{key:"componentDidMount",value:function(){this.setState({txt:this.props.card.desc})}},{key:"render",value:function(){return r.a.createElement("section",null,r.a.createElement("div",{className:"desc-header-container flex"},r.a.createElement(ht.a,{className:"icon"}),r.a.createElement("span",{className:"desc-header"},"Description")),r.a.createElement("textarea",{className:"card-desc-input",placeholder:"Add a more detailed description...",onChange:this.handleChange,spellCheck:"false",onBlur:this.handleSaveBoard,value:this.state.txt}))}}]),a}(n.Component),bt={loadBoard:K,updateBoard:q},gt=Object(s.b)((function(e){return{board:e.trelloApp.board}}),bt)(ft),vt=a(437);function Et(e){var t=e.idx,a=e.todo,n=e.onDelete,o=e.handleChange,c=e.handleSaveBoard,s=e.handleKeyPress;return r.a.createElement("div",{className:"checklist-item flex align-center",key:t},r.a.createElement("input",{className:"checkbox",type:"checkbox",name:"isDone",onChange:function(e){o(e,t)},onBlur:c,checked:a.isDone}),r.a.createElement("input",{className:"checklist-item-txt grow",type:"text",name:"txt",onChange:function(e){return o(e,t)},spellCheck:"false",onBlur:c,value:a.txt,onKeyDown:s}),r.a.createElement("button",{onClick:function(){n(t)}},r.a.createElement(be.a,{className:"icon"})))}var wt=function(e){Object(b.a)(a,e);var t=Object(g.a)(a);function a(){var e;Object(h.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={checkList:null,todoText:"",onAdd:!1,progress:0,checklistTitle:""},e.progressBarUpdate=function(){var t=e.state.checkList.reduce((function(e,t){return t.isDone&&e++,e}),0);e.setState({progress:Math.floor(t/e.state.checkList.length*100)})},e.addTodo=function(){if(e.state.todoText){var t={txt:e.state.todoText,isDone:!1},a=e.state.checkList.slice();a.push(t),e.setState({checkList:a,todoText:""},(function(){e.handleSaveBoard()}))}},e.handleSaveBoard=function(){var t=JSON.parse(JSON.stringify(e.props.board)),a=e.props.card.id,n=t.phaseLists.find((function(e){return e.cards.some((function(e){return e.id===a}))})),r=n.cards.map((function(t){return t.id===e.props.card.id&&(t.checkList=e.state.checkList,t.checklistTitle=e.state.checklistTitle),t})),o=t.phaseLists.findIndex((function(e){return e.id===n.id}));n.cards=r,t.phaseLists[o]=n,_.addActivity(t,W,j,L,{id:e.props.card.id,title:e.props.card.title},"update checklist on card"),e.props.updateBoard(t).then((function(){e.progressBarUpdate()}))},e.toggleAdd=function(){e.state.todoText&&e.addTodo(),e.setState((function(e){return{onAdd:!e.onAdd}}))},e.onDelete=function(t){var a=e.state.checkList.slice();a.splice(t,1);var n=1===e.state.checkList.length?"":e.state.checklistTitle;e.setState({checkList:a,checklistTitle:n},(function(){e.handleSaveBoard()}))},e.handleChange=function(t){var a=t.target,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,r=a.name,o="isDone"===r?a.checked:a.value,c=e.state.checkList.slice();"isDone"===r?(c[n].isDone=o,e.setState({checkList:c},(function(){e.handleSaveBoard()}))):-1===n?e.state.onAdd?e.setState({todoText:o}):e.setState({checklistTitle:o}):c[n].txt=o,e.setState({checkList:c})},e.handleFocus=function(e){return e.target.select()},e}return Object(f.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props.card.checklistTitle?this.props.card.checklistTitle:"My Checklist";this.setState({checkList:this.props.card.checkList,onAdd:!1,checklistTitle:t},(function(){return e.progressBarUpdate()}))}},{key:"handleKeyPress",value:function(e){13===e.keyCode&&e.target.blur()}},{key:"render",value:function(){var e=this,t=this.state,a=t.todoText,n=t.onAdd,o=t.checklistTitle,c=t.progress,s=t.checkList;if(!s||!s.length)return null;var l=100===this.state.progress?"#61bd4f":"#2196f3";return r.a.createElement("div",{className:"card-check-list"},r.a.createElement("div",{className:"checklist-title-container flex align-center"},r.a.createElement(vt.a,{className:"checklist-icon"}),r.a.createElement("input",{className:"checklist-title",type:"text",name:"txt",placeholder:"Checklist name...",onChange:this.handleChange,onKeyDown:this.handleKeyPress,spellCheck:"false",onFocus:this.handleFocus,onBlur:this.handleSaveBoard,value:o})),s&&s.length>0&&r.a.createElement("div",{className:"progress-bar-container"},r.a.createElement("div",{className:"progress-bar",style:{width:"".concat(c,"%"),backgroundColor:l}})),s&&s.length>0&&this.state.checkList.map((function(t,a){return r.a.createElement(Et,{todo:t,key:a,onDelete:e.onDelete,handleChange:e.handleChange,handleSaveBoard:e.handleSaveBoard,idx:a,handleKeyPress:e.handleKeyPress})})),!n&&r.a.createElement("button",{className:"add-btn",onClick:this.toggleAdd},"Add Todo"),n&&r.a.createElement("div",{className:"add-item flex align-center"},r.a.createElement("input",{type:"text",onChange:this.handleChange,onKeyDown:this.handleKeyPress,autoFocus:!0,onBlur:this.toggleAdd,value:a}),r.a.createElement("button",{className:"save-checklist-item-btn"},"Save")))}}]),a}(n.Component),yt={loadBoard:K,updateBoard:q},Ct=Object(s.b)((function(e){return{board:e.trelloApp.board}}),yt)(wt),Nt=a(438),kt=a(439),St=a(440),xt=a(441);function Ot(){return(Ot=Object(p.a)(m.a.mark((function e(t){var a,n,r,o;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.target,"marmelada",n="https://api.cloudinary.com/v1_1/".concat("marmelada","/image/upload"),(r=new FormData).append("file",a.files[0]),r.append("upload_preset","balulu"),e.prev=6,e.next=9,w.a.post(n,r);case 9:return o=e.sent,e.abrupt("return",o.data.url);case 13:throw e.prev=13,e.t0=e.catch(6),console.error(e.t0),e.t0;case 17:case"end":return e.stop()}}),e,null,[[6,13]])})))).apply(this,arguments)}var jt={uploadImg:function(e){return Ot.apply(this,arguments)}},Lt=a(170),Bt=a.n(Lt),Dt=function(e){var t=e.isImgLoading,a=e.imgUrl,n=e.title,o=e.removeImgUrl;return r.a.createElement(r.a.Fragment,null,t&&r.a.createElement("div",{className:"loading-field flex column align-center"},r.a.createElement(Bt.a,{secondaryColor:"#2196f3d9",type:"Circles",color:"#2196F3",className:"loader",height:60,width:60}),r.a.createElement("p",null,"Loading your image..")),a&&r.a.createElement(r.a.Fragment,null,r.a.createElement("img",{className:"card-img",src:a,alt:n}),r.a.createElement("button",{className:"remove-btn flex align-center",title:"Remove cover image",onClick:o},r.a.createElement(fe.a,{className:"icon"}))))},At=function(e){Object(b.a)(a,e);var t=Object(g.a)(a);function a(){var e;Object(h.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={card:null,isLabelEditShown:!1,isMembersEditShown:!1,cardActivities:[],isDueDateEditShown:!1,isImgLoading:!1},e.getUpdatedLabels=function(){if(!e.props.board.labels.length)return[];var t=e.state.card.labels,a=_.getBoardCopy(e.props.board);return t.reduce((function(e,t){var n=a.labels.find((function(e){return e.id===t.id}));return n&&e.push(n),e}),[])},e.hideCard=function(t){var a=e.state,n=a.isLabelEditShown,r=a.isMembersEditShown,o=a.isDueDateEditShown;"Escape"!==t.code||n||r||o||e.props.setCard(null)},e.toggleProperty=function(t){e.setState((function(e){return Object(me.a)({},t,!e[t])}))},e.getActivities=function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=e.props.board.activities.filter((function(e){return e.object.id===t}));return n.length>10?n.slice(0,a):n},e.addCheckList=function(){var t=JSON.parse(JSON.stringify(e.state.card));t.checkList.length||(t.checkList.push({txt:"todo..",isDone:!1}),e.setState({card:t}))},e.getPhaseIdxByCardId=function(t){return e.props.board.phaseLists.findIndex((function(e){return e.cards.some((function(e){return e.id===t}))}))},e.removeMemberFromCard=function(t){var a=_.getBoardCopy(e.props.board),n=e.props.card.id,r=e.getPhaseIdxByCardId(n),o=a.phaseLists[r].cards.findIndex((function(e){return e.id===n})),c=a.phaseLists[r].cards[o];c.assignedTo=c.assignedTo.filter((function(e){return e._id!==t._id})),a.phaseLists[r].cards[o]=c,e.props.updateBoard(a)},e.changeDueDate=function(t){var a=_.getBoardCopy(e.props.board),n=e.props.card.id,r=e.getPhaseIdxByCardId(n),o=a.phaseLists[r].cards.findIndex((function(e){return e.id===n}));a.phaseLists[r].cards[o].dueDate=t,e.props.updateBoard(a)},e.removeImgUrl=function(){var t=_.getBoardCopy(e.props.board),a=e.props.card.id,n=e.getPhaseIdxByCardId(a),r=t.phaseLists[n].cards.findIndex((function(e){return e.id===a}));t.phaseLists[n].cards[r].imgUrl=null,e.props.updateBoard(t)},e.onUploadImg=function(){var t=Object(p.a)(m.a.mark((function t(a){var n,r,o,c,s;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({isImgLoading:!0}),t.next=3,jt.uploadImg(a);case 3:n=t.sent,r=_.getBoardCopy(e.props.board),o=e.props.card.id,c=e.getPhaseIdxByCardId(o),s=r.phaseLists[c].cards.findIndex((function(e){return e.id===o})),r.phaseLists[c].cards[s].imgUrl=n,e.props.updateBoard(r),e.setState({isImgLoading:!1});case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(f.a)(a,[{key:"componentDidMount",value:function(){var e,t=this;window.addEventListener("keydown",this.hideCard),this.props.board.phaseLists.forEach((function(a){var n=a.cards.find((function(e){return e.id===t.props.cardId}));n&&(e=n)}));var a=this.getActivities(e.id);this.setState({card:e,cardActivities:a})}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.hideCard)}},{key:"componentDidUpdate",value:function(e){var t=this;if(JSON.stringify(e.board)!==JSON.stringify(this.props.board)){var a;this.props.board.phaseLists.forEach((function(e){var n=e.cards.find((function(e){return e.id===t.props.cardId}));n&&(a=n)}));var n=this.getActivities(a.id);this.setState({card:a,cardActivities:n})}}},{key:"render",value:function(){var e=this;if(!this.props.board||!this.state.card)return"Loading";var t=this.state,a=t.card,n=t.isLabelEditShown,o=t.isMembersEditShown,c=t.cardActivities,s=t.isDueDateEditShown,l=t.isImgLoading,i=a.assignedTo,d=a.dueDate,u=a.imgUrl,m=a.title,p=this.toggleProperty,h=this.changeDueDate,f=this.removeImgUrl,b=this.getUpdatedLabels();return r.a.createElement("section",null,r.a.createElement("div",{onClick:function(){e.props.setCard(null)},className:"card-modal"},r.a.createElement("div",{onClick:function(e){return e.stopPropagation()},className:"card-container"},r.a.createElement("div",{className:"card-img-container flex justify-center"},r.a.createElement(Dt,{isImgLoading:l,imgUrl:u,title:m,removeImgUrl:f})),r.a.createElement(mt,{card:a}),r.a.createElement("div",{className:"card-content flex"},r.a.createElement("div",{className:"card-details flex column grow"},i.length>0&&r.a.createElement("div",{className:"card-details-members"},r.a.createElement("h3",null,"Members"),r.a.createElement("div",{className:"flex align-center"},i.map((function(t){return r.a.createElement("span",{key:t._id,onClick:function(){e.removeMemberFromCard(t)}},r.a.createElement(ue,{member:t}))})))),b.length>0&&r.a.createElement("div",{className:"card-details-labels"},r.a.createElement("h3",null,"Labels"),r.a.createElement("div",{className:"labels-gallery flex wrap align-center"},b.map((function(e){return r.a.createElement("span",{title:e.txt,className:"label",onClick:function(){p("isLabelEditShown")},style:{backgroundColor:e.color},key:e.id}," ",r.a.createElement("span",{className:"label-txt"},e.txt))})))),d&&r.a.createElement("div",{className:"card-details-date"},r.a.createElement("h3",null,"Due Date"),r.a.createElement("div",{onClick:function(){p("isDueDateEditShown")},className:"date flex align-center"},r.a.createElement("span",{className:"date-str"},"".concat(le()(d).format("MMM Do"),"\n                                     at ").concat(le()(d).format("HH:mm"))))),r.a.createElement(gt,{card:a}),a.checkList.length>0&&r.a.createElement(Ct,{card:a}),r.a.createElement(He,{card:a,showCommentBox:!0,activities:c})),r.a.createElement("div",{className:"card-sidebar"},r.a.createElement("button",{onClick:function(){p("isMembersEditShown")},className:"card-sidebar-btn"},r.a.createElement("span",null,r.a.createElement(Nt.a,{className:"icon"})),"Members"),o&&r.a.createElement(xe,{members:this.props.board.members,card:a,toggleProperty:p}),r.a.createElement("button",{onClick:function(){p("isLabelEditShown")},className:"card-sidebar-btn"},r.a.createElement("span",null,r.a.createElement(pe.a,{className:"icon"})),"Labels"),n&&r.a.createElement(Ce,{card:a,toggleProperty:p}),a.checkList.length<1&&r.a.createElement("button",{className:"card-sidebar-btn",onClick:this.addCheckList},r.a.createElement("span",null,r.a.createElement(vt.a,{className:"icon"})),"Checklist"),r.a.createElement("button",{onClick:function(){p("isDueDateEditShown")},className:"card-sidebar-btn"},r.a.createElement("span",null,r.a.createElement(kt.a,{className:"icon"})),"Due Date"),s&&r.a.createElement(je,{changeDueDate:h,toggleProperty:p}),r.a.createElement("button",{className:"card-sidebar-btn"},r.a.createElement("span",null,r.a.createElement(St.a,{className:"icon"})),"Attachment"),!u&&r.a.createElement(r.a.Fragment,null,r.a.createElement("label",{htmlFor:"imgUrl",className:"card-sidebar-btn pointer"},r.a.createElement("span",null,r.a.createElement(xt.a,{className:"icon"})),"Cover"),r.a.createElement("input",{className:"display-none",type:"file",id:"imgUrl",onChange:this.onUploadImg})))))))}}]),a}(n.Component),It={loadBoard:K,updateBoard:q,setCard:z},Mt=Object(s.b)((function(e){return{board:e.trelloApp.board,card:e.trelloApp.card}}),It)(At),Pt=a(171),Tt=a.n(Pt);function Ut(e){return r.a.createElement("form",null,r.a.createElement("div",{className:"search-input-container"},r.a.createElement("input",{className:"board-filter-input",placeholder:"Filter by user...",type:"text",list:"users",name:"user",onChange:function(t){return e.onInputChanged(t.target.value)}}),r.a.createElement(Tt.a,{className:"search-icon"})))}var _t=function(e){Object(b.a)(a,e);var t=Object(g.a)(a);function a(){var e;Object(h.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={boardMenus:{currentOpend:null,menusState:{mainMenu:!1,backgroundMenu:!1,colorMenu:!1,photoMenu:!1}},filteredByUser:null},e.openSocket=function(){J.setup();var t=e.props.match.params.id;J.emit("open board socket",t),J.on("board updated",(function(){e.getBoardById()}))},e.getBoardById=Object(p.a)(m.a.mark((function t(){var a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.props.match.params.id,t.next=3,e.props.loadBoard(a);case 3:case"end":return t.stop()}}),t)}))),e.toggleMenu=function(t){var a=e.state.boardMenus,n=JSON.parse(JSON.stringify(a));t?(null!=n.currentOpend&&(n.menusState[n.currentOpend]=!n.menusState[n.currentOpend]),n.menusState[t]=!n.menusState[t],n.currentOpend=t):(n.menusState[n.currentOpend]=!1,n.currentOpend=null),e.setState({boardMenus:n},(function(){e.state.boardMenus.currentOpend?window.addEventListener("keydown",e.handleKeyDown):window.removeEventListener("keydown",e.handleKeyDown)}))},e.handleKeyDown=function(t){"Escape"===t.code&&e.toggleMenu(null)},e.onInputChanged=function(){var t=Object(p.a)(m.a.mark((function t(a){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.setState({filteredByUser:a});case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(f.a)(a,[{key:"componentDidMount",value:function(){this.getBoardById(),this.openSocket()}},{key:"componentWillUnmount",value:function(){J.off("open board socket"),J.terminate()}},{key:"render",value:function(){var e=this,t=this.state.filteredByUser,a=this.props.board;if(!a||!this.state)return"";var n=this.state.boardMenus.menusState,o=n.mainMenu,c=n.backgroundMenu,s=n.colorMenu,l=n.photoMenu,i=a.bgColor?{backgroundColor:a.bgColor}:{backgroundImage:'url("'.concat(a.imgUrl,'")'),backgroundSize:"cover"};return a?r.a.createElement("main",{style:i,className:"board flex column grow"},r.a.createElement("section",{className:"board-nav flex space-between"},r.a.createElement("div",{className:"flex"},r.a.createElement("div",{className:"board-title",href:"#"},r.a.createElement("span",{dir:"auto"},a.name)),r.a.createElement("span",{className:"board-nav-divider"}),r.a.createElement("div",{className:"board-members flex align-center"},a.members&&a.members.map((function(e){return r.a.createElement(ue,{key:e._id,member:e})}))),r.a.createElement(Ut,{users:a.members,onInputChanged:this.onInputChanged}),r.a.createElement(ct.a,{to:"/board/".concat(a._id,"/dashboard")},r.a.createElement("div",{className:"nav-btn  flex align-center"},r.a.createElement(rt.a,{className:"nav-icon"}),r.a.createElement("span",{className:"btn-text"},"Statistics")))),r.a.createElement("div",{className:"nav-btn flex align-center",onClick:function(){return e.toggleMenu("mainMenu")}},r.a.createElement(ot.a,null)),r.a.createElement(Ye,{isMenuShown:o,board:a,onToggleMenu:this.toggleMenu}),r.a.createElement(st,{isMenuShown:c,board:a,onToggleMenu:this.toggleMenu}),r.a.createElement($e,{isMenuShown:s,board:a,onToggleMenu:this.toggleMenu}),r.a.createElement(nt,{isMenuShown:l,board:a,onToggleMenu:this.toggleMenu})),r.a.createElement("section",{className:"board-content flex grow"},r.a.createElement(Re,{filteredByUser:t})),this.props.card&&r.a.createElement(Mt,{cardId:this.props.card.id})):"loading"}}]),a}(n.Component),Ft={loadBoard:K},Rt=Object(s.b)((function(e){return{board:e.trelloApp.board,card:e.trelloApp.card}}),Ft)(_t),Jt=function(e){Object(b.a)(a,e);var t=Object(g.a)(a);function a(){return Object(h.a)(this,a),t.apply(this,arguments)}return Object(f.a)(a,[{key:"render",value:function(){return r.a.createElement("main",{className:"home-container"},r.a.createElement("div",{className:"text-area flex column align-start"},r.a.createElement("h1",null,"Don't Waste Papers"),r.a.createElement("h3",null,r.a.createElement("span",null,"Flowz")," the project managment software that keep teams going and Collaborate"),r.a.createElement(ct.a,{to:"/board/5ecbc8edcb39d7f5494f8d40"}," ",r.a.createElement("span",{className:"btn-home"},"Get Started"))))}}]),a}(n.Component),Wt=Object(s.b)((function(e){return{}}),{})(Jt),Kt=a(458),qt=a(425),zt=a(446),Vt=a(452),Gt=a(447),Ht=a(454),Yt=a(444),Zt=a(427),Qt=a(453),Xt=a(172),$t=a.n(Xt),ea=a(178),ta=a(423),aa=a(445);function na(){return r.a.createElement(ea.a,{variant:"body2",color:"textSecondary",align:"center"},"Copyright \xa9 ",r.a.createElement(Yt.a,{color:"inherit",href:"https://material-ui.com/"},"Your Website")," ",(new Date).getFullYear(),".")}var ra=Object(ta.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}));function oa(){var e=ra();return r.a.createElement(aa.a,{component:"main",maxWidth:"xs"},r.a.createElement(zt.a,null),r.a.createElement("div",{className:e.paper},r.a.createElement(Kt.a,{className:e.avatar},r.a.createElement($t.a,null)),r.a.createElement(ea.a,{component:"h1",variant:"h5"},"Sign in"),r.a.createElement("form",{className:e.form,noValidate:!0},r.a.createElement(Vt.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",autoFocus:!0}),r.a.createElement(Vt.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password"}),r.a.createElement(Gt.a,{control:r.a.createElement(Ht.a,{value:"remember",color:"primary"}),label:"Remember me"}),r.a.createElement(qt.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit},"Sign In"),r.a.createElement(Zt.a,{container:!0},r.a.createElement(Zt.a,{item:!0,xs:!0},r.a.createElement(Yt.a,{href:"#",variant:"body2"},"Forgot password?")),r.a.createElement(Zt.a,{item:!0},r.a.createElement(Yt.a,{href:"#",variant:"body2"},"Don't have an account? Sign Up"))))),r.a.createElement(Qt.a,{mt:8},r.a.createElement(na,null)))}function ca(){return(ca=Object(p.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"",e.next=3,y("user/".concat(""));case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function sa(){return(sa=Object(p.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y("user/".concat(t));case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function la(){return(la=Object(p.a)(m.a.mark((function e(t){var a,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={fullName:this.createfullName(t.fName,t.lName),password:t.password,email:t.email,createdAt:Date.now()},e.next=3,C("user",a);case 3:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}function ia(){return(ia=Object(p.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N("user",t);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function da(){return(da=Object(p.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k("user/".concat(t));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ua={query:function(e){return ca.apply(this,arguments)},getById:function(e){return sa.apply(this,arguments)},remove:function(e){return da.apply(this,arguments)},add:function(e){return la.apply(this,arguments)},update:function(e){return ia.apply(this,arguments)},makeId:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,t="",a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=0;n<e;n++)t+=a.charAt(Math.floor(Math.random()*a.length));return t},getUserCopy:function(e){return JSON.parse(JSON.stringify(e))},createfullName:function(e,t){return e+" "+t}};var ma=function(e){Object(b.a)(a,e);var t=Object(g.a)(a);function a(){var e;Object(h.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={firstName:null,lastName:null,email:null,password:null},e.handleChange=function(t){var a=t.target,n=a.name,r=a.value;e.setState((function(e){return Object(v.a)(Object(v.a)({},e),{},Object(me.a)({},n,r))}),(function(){return console.log(e.state)}))},e.submitForm=function(){e.props.addUser(e.state)},e}return Object(f.a)(a,[{key:"render",value:function(){return r.a.createElement("main",{className:"sign-up-container"},r.a.createElement("form",{className:"sign-up-form",onsubmit:this.submitForm,noValidate:!0},r.a.createElement(Vt.a,{onChange:this.handleChange,className:"signup-first-name",autoComplete:"fname",name:"firstName",variant:"outlined",required:!0,fullWidth:!0,id:"firstName",label:"First Name",autoFocus:!0}),r.a.createElement(Vt.a,{onChange:this.handleChange,className:"signup-last-name",variant:"outlined",required:!0,fullWidth:!0,id:"lastName",label:"Last Name",name:"lastName",autoComplete:"lname"}),r.a.createElement(Vt.a,{onChange:this.handleChange,className:"signup-email",variant:"outlined",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email"}),r.a.createElement(Vt.a,{onChange:this.handleChange,className:"signup-password",variant:"outlined",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password"}),r.a.createElement(qt.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:"sign-up-submit-btn"},"Sign Up")))}}]),a}(n.Component),pa={addUser:function(e){return function(){var t=Object(p.a)(m.a.mark((function t(a){var n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ua.add(e);case 2:n=t.sent,a({type:"ADD_USER",user:n});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}},ha=Object(s.b)((function(e){return{user:e.trelloUser.userReducer}}),pa)(ma),fa=a(448),ba=a(449),ga=a(450),va=function(e){Object(b.a)(a,e);var t=Object(g.a)(a);function a(){var e;Object(h.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={isCreateBoardMenuShown:!1,newBoardName:"",newBoardColor:"#61acca"},e.handleChangeColor=function(){var t=Object(p.a)(m.a.mark((function t(a){var n,r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=a.target,r=n.value,t.next=4,e.setState({newBoardColor:r});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handleChange=function(t){var a=t.target.value;e.setState({newBoardName:a})},e.toggleAddBoard=function(){e.setState((function(e){return{isCreateBoardMenuShown:!e.isCreateBoardMenuShown}}))},e.createNewBoard=Object(p.a)(m.a.mark((function t(){var a,n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.state.newBoardName.trim()?e.state.newBoardName:"New Board",n=_.createNewBoard(a,e.state.newBoardColor,W),t.next=4,e.props.addBoard(n);case 4:d.push("/board/".concat(e.props.board._id)),e.setState({isCreateBoardMenuShown:!1,newBoardName:""});case 6:case"end":return t.stop()}}),t)}))),e}return Object(f.a)(a,[{key:"render",value:function(){var e=this.state,t=e.isCreateBoardMenuShown,a=e.newBoardName,n=e.newBoardColor;return this.state?r.a.createElement("header",{className:"main-header flex space-between"},r.a.createElement("nav",{className:"flex align-center"},r.a.createElement(ct.a,{to:"/"},r.a.createElement("div",{className:"btn-main-nav"},r.a.createElement(fa.a,{className:"btn-icon"}))),r.a.createElement(ct.a,{to:"/boards"},r.a.createElement("div",{className:"btn-main-nav flex align-center"},r.a.createElement(ba.a,{className:"btn-icon"}),r.a.createElement("span",{className:"btn-text"},"Boards")))),r.a.createElement("div",{className:"nav-center flex align-center justify-center"},r.a.createElement(ct.a,{to:"/"},r.a.createElement("div",{className:"logo flex align-center"},r.a.createElement(ga.a,{className:"btn-icon"}),r.a.createElement("span",{className:"logo-text"},"Flowz")))),r.a.createElement("nav",{className:"right-nav flex flex-end align-center"},r.a.createElement("div",{className:"btn-main-nav",onClick:this.toggleAddBoard},r.a.createElement(Y.a,{className:"btn-icon"})),t&&r.a.createElement("div",{className:"create-board-menu  flex column"},r.a.createElement("div",{className:"create-board-header flex align-center"},r.a.createElement("h5",{className:"grow"},"New Board"),r.a.createElement(H.a,{className:"close-create-board-menu",onClick:this.toggleAddBoard})),r.a.createElement("div",{className:"create-board-btns flex column"},r.a.createElement("div",{className:"color-container"},r.a.createElement("label",{className:"rgb(81, 152, 57)"===n?"color-preview green selected":"color-preview green"},r.a.createElement("input",{onClick:this.handleChangeColor,className:"color-preview-input",type:"radio",name:"green",value:"rgb(81, 152, 57)"})),r.a.createElement("label",{className:"#d29034"===n?"color-preview orange selected":"color-preview orange"},r.a.createElement("input",{onClick:this.handleChangeColor,className:"color-preview-input",type:"radio",name:"orange",value:"#d29034"})),r.a.createElement("label",{className:"rgb(0, 121, 191)"===n?"color-preview blue selected":"color-preview blue"},r.a.createElement("input",{onClick:this.handleChangeColor,className:"color-preview-input",type:"radio",name:"blue",value:"rgb(0, 121, 191)"})),r.a.createElement("label",{className:"rgb(176, 70, 50)"===n?"color-preview red selected":"color-preview red"},r.a.createElement("input",{onClick:this.handleChangeColor,className:"color-preview-input",type:"radio",name:"red",value:"rgb(176, 70, 50)"})),r.a.createElement("label",{className:"rgb(137, 96, 158)"===n?"color-preview purple selected":"color-preview purple"},r.a.createElement("input",{onClick:this.handleChangeColor,className:"color-preview-input",type:"radio",name:"purple",value:"rgb(137, 96, 158)"})),r.a.createElement("label",{className:"rgb(205, 90, 145)"===n?"color-preview pink selected":"color-preview pink"},r.a.createElement("input",{onClick:this.handleChangeColor,className:"color-preview-input",type:"radio",name:"pink",value:"rgb(205, 90, 145)"})),r.a.createElement("label",{className:"rgb(75, 191, 107)"===n?"color-preview light-green selected":"color-preview light-green"},r.a.createElement("input",{onClick:this.handleChangeColor,className:"color-preview-input",type:"radio",name:"light-green",value:"rgb(75, 191, 107)"})),r.a.createElement("label",{className:"rgb(73, 169, 215)"===n?"color-preview turquise selected":"color-preview turquise"},r.a.createElement("input",{onClick:this.handleChangeColor,className:"color-preview-input",type:"radio",name:"turquise",value:"rgb(73, 169, 215)"}))),r.a.createElement("input",{className:"board-name-input",type:"text",onChange:this.handleChange,placeholder:"Your Board's name...",value:a}),r.a.createElement("button",{className:"create-board-btn",onClick:this.createNewBoard},"Create a new Board"))),r.a.createElement("span",{className:"logged-in flex align-center"},r.a.createElement(ue,{fullName:"Or Levy"})))):""}}]),a}(n.Component),Ea={loadBoard:K,updateBoard:q,addBoard:function(e){return function(){var t=Object(p.a)(m.a.mark((function t(a){var n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_.add(e);case 2:n=t.sent,a({type:"ADD_BOARD",board:n});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}},wa=Object(s.b)((function(e){return{board:e.trelloApp.board}}),Ea)(va),ya=function(e){Object(b.a)(a,e);var t=Object(g.a)(a);function a(){var e;Object(h.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={txt:""},e.handleChange=function(t){var a=t.target.value;e.setState({txt:a}),e.autoGrow(e.elTextarea)},e.backToboard=function(){d.push("/board/".concat(e.props.board._id))},e.handleLoadBoard=function(t){e.props.loadBoard(t),d.push("/board/".concat(t))},e}return Object(f.a)(a,[{key:"componentDidMount",value:function(){this.props.queryBoards()}},{key:"render",value:function(){var e=this;if(this.state){var t=this.props.boards;return r.a.createElement("section",null,r.a.createElement("div",{className:"boards-page"},r.a.createElement("div",{className:"boards flex column"},r.a.createElement("h1",{className:"boards-title flex"},"Boards"),r.a.createElement("div",{className:"boards-container"},t&&t.map((function(t,a){return r.a.createElement("div",{className:"board-item board-item".concat(a),key:a,onClick:function(){return e.handleLoadBoard(t._id)},style:t.imgUrl?{backgroundImage:"url(".concat(t.imgUrl,")"),backgroundSize:"cover"}:{backgroundColor:t.bgColor}},r.a.createElement("h3",null,t.name))}))))))}}}]),a}(n.Component),Ca={loadBoard:K,updateBoard:q,queryBoards:function(e){return function(t){_.query(e).then((function(e){return t({type:"QUERY_BOARDS",boards:e})}))}}},Na=Object(s.b)((function(e){return{board:e.trelloApp.board,boards:e.trelloApp.boards}}),Ca)(ya),ka=a(49),Sa=a(77),xa=a(174),Oa=a.n(xa),ja=["#273d5d","#006c95","#009da2","#00ca78","#a8eb12","#003f5c","#2d4f73","#4f608a","#72709e","#9580b0","#b991bf","#dda2cc","#ffb5d7"],La=["#FF6384A0","#36A2EBA0","#FFCE56A0","#e53935","#e57373","#6633FF","#FF00CC","#9900FF","#DAF7A6","#82b1ff","#1976d2","#e53935","#e57373","#6633FF","#FF00CC"],Ba=function(e){Object(b.a)(a,e);var t=Object(g.a)(a);function a(){var e;Object(h.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).getBoardById=Object(p.a)(m.a.mark((function t(){var a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.props.match.params.id,t.next=3,e.props.loadBoard(a);case 3:case"end":return t.stop()}}),t)}))),e.getSprintProgress=function(){var t=e.props.board,a={};return t.phaseLists.forEach((function(e){e.cards.forEach((function(e){e.checkList.forEach((function(e){e.isDone?a.Completed?a.Completed+=1:a.Completed=1:a["In Progress"]?a["In Progress"]+=1:a["In Progress"]=1}))}))})),{labels:Object(ka.a)(Object.keys(a)),datasets:[{label:"Sprint Progress",data:Object(ka.a)(Object.values(a)),backgroundColor:ja,hoverBackgroundColor:La}]}},e.getTaskPerPhaseDistribution=function(){var t=e.props.board,a={};return t.phaseLists.forEach((function(e){e.cards.forEach((function(t){a[e.name]?a[e.name]+=1:a[e.name]=1}))})),{labels:Object(ka.a)(Object.keys(a)),datasets:[{label:"Task Per Phase Distribution",data:Object(ka.a)(Object.values(a)),backgroundColor:ja,hoverBackgroundColor:La}]}},e.getTaskByLables=function(){var t=e.props.board,a={};return t.phaseLists.forEach((function(e){e.cards.forEach((function(e){e.labels.forEach((function(e){a[e.txt]?a[e.txt]+=1:a[e.txt]=1}))}))})),{labels:Object(ka.a)(Object.keys(a)),datasets:[{label:"Tasks by Labels",data:Object(ka.a)(Object.values(a)),backgroundColor:ja,hoverBackgroundColor:La}]}},e.goBack=function(){d.push("/board/".concat(e.props.match.params.id))},e}return Object(f.a)(a,[{key:"componentDidMount",value:function(){this.getBoardById()}},{key:"getTasksPerDevloperData",value:function(){var e=this.props.board,t={};return e.phaseLists.forEach((function(e){e.cards.forEach((function(e){e.assignedTo.forEach((function(e){t[e.fullName]?t[e.fullName]+=1:t[e.fullName]=1}))}))})),{labels:Object(ka.a)(Object.keys(t)),datasets:[{label:"Task Per Devloper",data:Object(ka.a)(Object.values(t)),backgroundColor:ja,hoverBackgroundColor:La}]}}},{key:"render",value:function(){if(!this.props.board)return"loading";var e=this.getTasksPerDevloperData(),t=this.getTaskPerPhaseDistribution(),a=this.getTaskByLables(),n=this.getSprintProgress();return r.a.createElement("div",{className:"dashboard flex column align-center justify-center grow"},r.a.createElement("div",{className:"btn-back flex space-between align-center",onClick:this.goBack},r.a.createElement(Oa.a,null),r.a.createElement("span",null,"Back")),r.a.createElement("section",{className:"chart-cont flex column justify-center align-center"},r.a.createElement("article",{className:"chart sprint-progress flex justify-center column align-center"},r.a.createElement("h2",null,"Sprint Progress"),r.a.createElement(Sa.c,{data:n,options:{scales:{yAxes:[{ticks:{beginAtZero:!0}}]}}})),r.a.createElement("article",{className:"chart tasks-per-devloper flex column justify-center align-center"},r.a.createElement("h2",null,"Task Per Devloper"),r.a.createElement(Sa.a,{data:e,options:{scales:{yAxes:[{ticks:{beginAtZero:!0}}]}}})),r.a.createElement("article",{className:"chart tasks-per-phase flex column justify-center align-center"},r.a.createElement("h2",null,"Task Per Phase"),r.a.createElement(Sa.b,{data:t,options:{scales:{yAxes:[{ticks:{beginAtZero:!0}}]}}})),r.a.createElement("article",{className:"chart tasks-by-lables flex column justify-center align-center"},r.a.createElement("h2",null,"Task By Labels"),r.a.createElement(Sa.a,{data:a,options:{scales:{yAxes:[{ticks:{beginAtZero:!0}}]}}}))))}}]),a}(n.Component),Da={loadBoard:K},Aa=Object(s.b)((function(e){return{board:e.trelloApp.board}}),Da)(Ba);function Ia(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(l.b,{history:d},r.a.createElement(wa,null),r.a.createElement(l.c,null,r.a.createElement(l.a,{path:"/",component:Wt,exact:!0}),r.a.createElement(l.a,{path:"/board/:id",component:Rt,exact:!0}),r.a.createElement(l.a,{path:"/signin",component:oa,exact:!0}),r.a.createElement(l.a,{path:"/signup",component:ha,exact:!0}),r.a.createElement(l.a,{path:"/board/:boardId/card/:cardId",component:Mt,exact:!0}),r.a.createElement(l.a,{path:"/board/:id/dashboard",component:Aa}),r.a.createElement(l.a,{path:"/boards",component:Na,exact:!0}))))}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Ma=a(30),Pa=a(175),Ta={boards:[],board:null,card:null};var Ua={users:[],user:null,card:null};var _a=Object(Ma.c)({trelloApp:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ta,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"QUERY_BOARDS":return Object(v.a)(Object(v.a)({},e),{},{boards:t.boards});case"LOAD_BOARD":return Object(v.a)(Object(v.a)({},e),{},{board:Object(v.a)({},t.board)});case"ADD_BOARD":return Object(v.a)(Object(v.a)({},e),{},{board:t.board});case"UPDATE_BOARD":return J.emit("board updated",t.board._id),Object(v.a)(Object(v.a)({},e),{},{board:Object(v.a)({},t.board)});case"REMOVE_BOARD":return Object(v.a)(Object(v.a)({},e),{},{boards:e.boards.filter((function(e){return e._id!==t.boardId}))});case"SET_CARD":return Object(v.a)(Object(v.a)({},e),{},{card:t.card});default:return e}},trelloUser:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ua,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"QUERY_USERS":return Object(v.a)(Object(v.a)({},e),{},{users:t.users});case"LOAD_USER":return Object(v.a)(Object(v.a)({},e),{},{user:Object(v.a)({},t.user)});case"ADD_USER":return Object(v.a)(Object(v.a)({},e),{},{user:t.user});case"UPDATE_USER":return J.emit("user updated",t.user._id),Object(v.a)(Object(v.a)({},e),{},{user:Object(v.a)({},t.user)});case"REMOVE_USER":return Object(v.a)(Object(v.a)({},e),{},{users:e.users.filter((function(e){return e._id!==t.userId}))});case"SET_CARD":return Object(v.a)(Object(v.a)({},e),{},{card:t.card});default:return e}}}),Fa=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||Ma.d,Ra=Object(Ma.e)(_a,Fa(Object(Ma.a)(Pa.a))),Ja=a(176),Wa=a(24);c.a.render(r.a.createElement(s.a,{store:Ra},r.a.createElement(Wa.a,{utils:Ja.a},r.a.createElement(Ia,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[198,1,2]]]);
//# sourceMappingURL=main.5741598f.chunk.js.map